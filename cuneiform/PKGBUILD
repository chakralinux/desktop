## Apps Packages for Chakra, part of chakra-project.org
#
# maintainer abveritas@chakra-project.org

pkgname=cuneiform
pkgver=1.1.0
_dpkgver=1.1
pkgrel=3
pkgdesc="Linux port of an OCR system developed in Russia. Supports more than 20 languages."
arch=('x86_64')
url="https://launchpad.net/cuneiform-linux"
license=('BSD')
depends=('imagemagick')
makedepends=('cmake')
source=("http://launchpad.net/cuneiform-linux/${_dpkgver}/${_dpkgver}/+download/cuneiform-linux-${pkgver}.tar.bz2")
screenshot=("http://i1-win.softpedia-static.com/screenshots/CuneiForm_3.png")
md5sums=('09fd160cdfc512f26442a7e91246598d')

_SRC_ROOT="${srcdir}/${pkgname}-linux-${pkgver}"

build() {
  
  cd "${_SRC_ROOT}"
  sed -i 's#lib64#lib#' install_files.cmake
  mkdir -p builddir
  cd builddir

  cmake -DCMAKE_BUILD_TYPE=release -DCMAKE_INSTALL_PREFIX=/usr ..
  make
}

package() {
  cd "${_SRC_ROOT}"/builddir
  make DESTDIR="${pkgdir}" install

  mkdir -p "${pkgdir}/usr/share/licenses/cuneiform"
  cp "${_SRC_ROOT}/cuneiform_src/Kern/license.txt" \
    "${pkgdir}/usr/share/licenses/cuneiform"
}

