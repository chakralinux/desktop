#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config

pkgname=imagewriter
pkgver=1.9
pkgrel=1
pkgrelsuse=2.3.1
pkgdesc="SUSE Studio Imagewriter"
arch=('i686' 'x86_64')
url="http://kiwi.berlios.de"
license=('GPLv2')
depends=('coreutils' 'syslinux')
makedepends=('rpmextract')
provides=('imagewriter')
categories=('utils')
source=(http://download.opensuse.org/repositories/openSUSE:/11.4:/Update/standard/i586/$pkgname-$pkgver-$pkgrelsuse.i586.rpm)
md5sums=('d7cd068bdefe1122a4addcf5d262f0fd')

[ "$CARCH" = "x86_64" ] && source=(http://download.opensuse.org/repositories/openSUSE:/11.4:/Update/standard/x86_64/$pkgname-$pkgver-$pkgrelsuse.x86_64.rpm)
[ "$CARCH" = "x86_64" ] && md5sums=('0896254f4994e8f5189a841a9c1110ef')

build() {
    cd $startdir/pkg/

    if [ "$CARCH" = "x86_64" ]; then
        rpmextract.sh ${startdir}/src/$pkgname-$pkgver-$pkgrelsuse.x86_64.rpm
    else
        rpmextract.sh ${startdir}/src/$pkgname-$pkgver-$pkgrelsuse.i586.rpm
    fi

    chmod a+rx -R *
    find . -type f -exec chmod -x \{\} \;
    chmod +x usr/bin/imagewriter
}