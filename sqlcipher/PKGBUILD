pkgname=sqlcipher
pkgver=4.0.0
pkgrel=1
pkgdesc="SQLite extension that provides transparent 256-bit AES encryption of database files"
arch=('x86_64')
url="https://www.zetetic.net/sqlcipher/"
license=('BSD')
makedepends=('openssl' 'sqlite3' 'tcl')
source=(https://www.zetetic.net/$pkgname/verify/$pkgver/$pkgname-v$pkgver.zip)
sha256sums=('3f0387584e278bf3c0638d0f9c79e9237f128d97f74b8531f8368d93f85f677c')

build() {
  cd "${srcdir}"/$pkgname

  ./configure --prefix=/usr --enable-tempstore=yes \
                CFLAGS="$CFLAGS -DSQLITE_HAS_CODEC" LDFLAGS="-lcrypto"
  make
}

package() {
  cd "${srcdir}"/$pkgname

  make DESTDIR="${pkgdir}" install

  install -Dm644 LICENSE "${pkgdir}"/usr/share/licenses/$pkgname/LICENSE
}
