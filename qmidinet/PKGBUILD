pkgname=qmidinet
pkgver=0.4.2
pkgrel=1
pkgdesc="A MIDI network gateway application that sends and receives MIDI data (ALSA Sequencer) over the network, using UDP/IP multicast"
arch=('x86_64')
url="http://qmidinet.sourceforge.net/"
license=('GPL')
depends=('qt5-base' 'qt5-tools' 'jack' 'hicolor-icon-theme')
categories=('multimedia')
install="$pkgname.install"
source=("http://downloads.sourceforge.net/project/$pkgname/$pkgname/$pkgver/$pkgname-$pkgver.tar.gz"
	"qmidinet.png")
sha1sums=('453d130c6b1f01122e3dc505eee9314f8beb99f2'
          '23e962d83cb8d0a32d4d2d2d0c442087f971a90d')

prepare() {
  cd $pkgname-$pkgver
# fix to make .configure recognize Qt>=5.1
export CXXFLAGS="${CXXFLAGS} -std=c++11" 
}
          
build() {
  cd "$srcdir/$pkgname-$pkgver"

  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  make DESTDIR="$pkgdir/" install
  install -D ../qmidinet.png ${pkgdir}/usr/share/pixmaps/${pkgname}.png
}
