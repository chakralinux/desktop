#
# Apps Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>
# contributor (x86_64): Giuseppe Cal√† <jiveaxe@gmail.com>

pkgname=skrooge
pkgver=1.2.0
pkgrel=1
pkgdesc="Allows you to manage your personal finances in KDE"
arch=('i686' 'x86_64')
url="http://skrooge.org"
license=('GPL')
depends=('kde-runtime' 'libofx' 'qca-ossl')
makedepends=('automoc4' 'cmake' 'docbook-xsl')
install=$pkgname.install
source=(http://skrooge.org/files/$pkgname-$pkgver.tar.bz2)
#"$pkgname-$pkgver-numbers.diff::http://quickgit.kde.org/?p=skrooge.git&a=blobdiff_plain&h=6419c8feca1e52e29ea80bed40968332559d58ca&hp=c123c16274a1f19c172a7ce0604835f76ffd7288&f=skgbasegui/skgcalculatoredit.cpp")
md5sums=('d137d2940f2f7d3dca5432aa652359e9')
#         'a841957f870a997ea0cba11b01775b97')

build() {
  cd $srcdir/$pkgname-$pkgver

# Patch for https://bugs.kde.org/show_bug.cgi?id=283683:
#  patch -uNp1 -i $srcdir/$pkgname-$pkgver-numbers.diff

  [[ -d build ]] && rm -r build
  mkdir build && cd build
  cmake \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_BUILD_TYPE=RelWithDebInfo \
    ..
  make
}
 
package() {
  cd $srcdir/$pkgname-$pkgver/build
  make DESTDIR=$pkgdir install
}
