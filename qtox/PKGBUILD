pkgname=qtox
_pkgname=qTox
pkgver=1.15.0
pkgrel=1
pkgdesc='Powerful Tox client written in C++/Qt that follows the Tox design guidelines'
arch=('x86_64')
url='https://github.com/tux3/qTox'
screenshot="https://camo.githubusercontent.com/22edee6a50bd284bd985ed7b219d57130e5241c8/687474703a2f2f692e696d6775722e636f6d2f363641524247432e706e67"
license=('GPL3')
depends=('libxss' 'desktop-file-utils' 'openal' 'ffmpeg' 'qrencode' 'qt5-svg' 'sqlcipher' 'toxcore' 'libexif' 'qt5-base')
makedepends=('qt5-tools' 'cmake' 'check' 'pkg-config')
provides=('qtox')
conflicts=('qtox-git')
replaces=('qtox-git')
source=("https://github.com/$_pkgname/$_pkgname/archive/v$pkgver.tar.gz")
sha512sums=('bd2ebc27cff36713853e6beb64c9cafc2a69a7da8427b482a6dfdaf34bd03c94f6046d930a79c96593d76e5120a1a6e1adda0cdaaa6e49f60efefa0d63bd7329')

build() {
  cd $_pkgname-$pkgver
  mkdir -p build
  cd build
  cmake .. -DCMAKE_INSTALL_PREFIX=/usr \
	       -DENABLE_GTK_SYSTRAY=False
  make
}

check() {
  cd $_pkgname-$pkgver
  cd build
  make test
}

package() {
  # executable
  cd $_pkgname-$pkgver/build
  make DESTDIR=$pkgdir install
}
