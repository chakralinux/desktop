# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>
# (c) 2010 Drake Justice

pkgname=cbundle
pkgver=0.4.2
pkgrel=1
depends=('squashfs-tools' 'fakechroot' 'unionfs-fuse')
makedepends=('qt' 'automoc4' 'kdebase-workspace')
pkgdesc="A shared library for using Chakra software bundles"
arch=("i686" "x86_64")
license=('GPL')
url="http://chakra-project.org/"

source=("http://chakra-project.org/sources/cinstall/jmc-88-cbundle-$pkgver.tar.xz")
md5sums=('8c36f1fc34f0da841644ac1e512df667')

# create tarball: source PKGBUILD && mksource

mksource() {
  git clone git://gitorious.org/~jmc-88/cinstall/jmc-88-cbundle.git
  pushd jmc-88-cbundle
  popd
  tar -cvJf jmc-88-cbundle-${pkgver}.tar.xz jmc-88-cbundle/*
  md5sum jmc-88-cbundle-${pkgver}.tar.xz
}

build() {
        cd "${srcdir}/jmc-88-cbundle"
        

        cmake  \
          -DCMAKE_INSTALL_PREFIX=/usr \
          -DCMAKE_BUILD_TYPE=Release
        make || return 1
        make DESTDIR=${pkgdir} install || return 1
}
