#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf



#
# package info
#
pkgname=kde-wallpapers
pkgver=1.0
pkgrel=1

pkgbase="${_pkgprefix}-wallpapers"
pkgname=("${_pkgprefix}-wallpapers-crunchy-branch-blue"
	 "${_pkgprefix}-wallpapers-ashoc")

pkgdesc="KDE Wallpapers for Chakra"
url="http://www.chakra-project.org"
license="GPL"
arch=('any')
options=('!splithdr' 'splitdbg')

groups=("${_pkgprefix}" "${_pkgprefix}-complete" "${_pkgprefix}-uninstall" "${_pkgprefix}-minimal")

source=("http://chakra-project.org/sources/kde-wallpapers/kde-wallpapers-crunchy-branch-blue-1.0.tar.gz"
	"http://chakra-project.org/sources/kde-wallpapers/kde-wallpapers-ashoc-1.0-2.tar.gz")
md5sums=("52d75a03f18204dde7965bd3dccb9ce4"  #  kde-wallpapers-crunchy-branch-blue-1.0.tar.gz
	 "e6a3a7e170a739d226c180f5c2a09618") #  kde-wallpapers-ashoc-1.0-2.tar.gz

#_gitroot="git://git.chakra-project.org/artwork/wallpapers.git"
#_gitname="wallpapers"

#
# build function
#
build() {

	echo "Let's go"
	# Smart hack here, cool :)

#        cd "${srcdir}"
#        msg "Connecting to GIT server...."
#
#        if [ -d $_gitname ] ; then
#        cd $_gitname && git pull
#        msg "The local files are updated."
#        else
#	      git clone $_gitroot
#        fi
#        msg "GIT checkout done or server timeout"
#        msg "Starting make..."
#
#        rm -rf "${srcdir}/$_gitname-build"
#
#        cp -r "${srcdir}/$_gitname" "${srcdir}/$_gitname-build"

}

#
# split-install functions
#

package_kde-wallpapers-crunchy-branch-blue()
{

	pkgver=1.0
	pkgrel=1
	pkgdesc="Crunchy-Branch Wallpaper (blue) by Carles Codony"
	groups=("${_pkgprefix}" "${_pkgprefix}-complete" "${_pkgprefix}-uninstall" "${_pkgprefix}-minimal" "${_pkgprefix}-wallpapers")

	_WALLPAPER="crunchy-branch-blue"

	cd ${srcdir}/$_WALLPAPER
	
	mkdir -pv $pkgdir/usr/share/wallpapers/$_WALLPAPER/contents/images
	cp -Rv * $pkgdir/usr/share/wallpapers/$_WALLPAPER/contents/images
	cd $pkgdir/usr/share/wallpapers/$_WALLPAPER/contents/images

#	#fix structure
#	_FILES="*.jpg"
#	for i in $_FILES
#	do
#	#proper rename
#	_OUT=$(echo $i | sed "s/KDEmod-Galaxair-//g" | sed 's/-/x/g')
#	mv -v $i $_OUT
#	done
	cp -v $startdir/metadata.desktop $pkgdir/usr/share/wallpapers/$_WALLPAPER
	cd $pkgdir/usr/share/wallpapers/$_WALLPAPER
	sed -i -e "s~WALLPAPERNAME~$_WALLPAPER~g" metadata.desktop
	sed -i -e "s~AUTHOR~Carles Codony~g" metadata.desktop

}

package_kde-wallpapers-ashoc()
{

	pkgver=1.0
	pkgrel=2
	pkgdesc="Ashoc Wallpaper by Taner Candan"
	groups=("${_pkgprefix}" "${_pkgprefix}-complete" "${_pkgprefix}-uninstall" "${_pkgprefix}-minimal" "${_pkgprefix}-wallpapers")

	_WALLPAPER="ashoc"

	cd ${srcdir}/$_WALLPAPER
	
	mkdir -pv $pkgdir/usr/share/wallpapers/$_WALLPAPER/contents/images
	cp -Rv * $pkgdir/usr/share/wallpapers/$_WALLPAPER/contents/images
	cd $pkgdir/usr/share/wallpapers/$_WALLPAPER/contents/images

#	#fix structure
#	_FILES="*.jpg"
#	for i in $_FILES
#	do
#	#proper rename
#	_OUT=$(echo $i | sed "s/KDEmod-Galaxair-//g" | sed 's/-/x/g')
#	mv -v $i $_OUT
#	done
	cp -v $startdir/metadata.desktop $pkgdir/usr/share/wallpapers/$_WALLPAPER
	cd $pkgdir/usr/share/wallpapers/$_WALLPAPER
	sed -i -e "s~WALLPAPERNAME~$_WALLPAPER~g" metadata.desktop
	sed -i -e "s~AUTHOR~Taner Candan~g" metadata.desktop

}
