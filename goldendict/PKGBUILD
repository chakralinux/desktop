#
# Apps Packages for Chakra, part of chakra-project.org
#
# Maintainer: Neo Kolokotronis <tetris4@gmail.com>
# Contributor: csslayer <wengxt AT gmail com>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=goldendict
pkgver=1.0.1
pkgrel=5
pkgdesc="Feature-rich dictionary lookup program"
arch=('i686' 'x86_64')
url="http://goldendict.berlios.de/"
license=('GPL3')
depends=('hunspell' 'libvorbis' 'libxtst' 'libzip' 'qt' 'phonon')
provides=('stardict')
changelog=$pkgname.changelog
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver-src.tar.bz2
        $pkgname-paths.diff
	fix-compile.patch)
sha256sums=('b3fb0405a5edb38f02ef881b48c36e46e2eacf641b0caf8d99403f595a4be9a6'
            '1dacae7b7a7d7c20a22b4595c07dbd65fdad134a0d4cf283312ea3bdb5f42589'
            '6d695b870fdd2411c72cf3202375c3aad68224e8b62163e72943c39275a18590')

build(){
  cd ${srcdir}

  patch -Np0 -i ${srcdir}/$pkgname-paths.diff
  patch -Np0 -i ${srcdir}/fix-compile.patch

  qmake
  make
  qmake
}

package() {
  cd ${srcdir}

  make INSTALL_ROOT=${pkgdir} install

  #removing unneeded
  rm -rf ${pkgdir}/usr/share/app-install
}

