#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=quassel
pkgver=0.6.1
pkgrel=1
pkgdesc="QT4 irc client with a separated core"
url="http://quassel-irc.org"
arch=('i686' 'x86_64')
license=('GPL')
depends=('kdelibs' 'oxygen-icons' 'hicolor-icon-theme' 'libindicate-qt')
makedepends=('cmake' 'automoc4')
source=("$url/system/files/$pkgname-$pkgver.tar.bz2"
	'rc.quassel'
        'quassel.conf')
install=quassel.install
backup=(etc/conf.d/quassel.conf)

build() {
  cd ${srcdir}

  mkdir build
  cd build

  cmake -D CMAKE_INSTALL_PREFIX=/usr/ -DWITH_KDE=1 -D CMAKE_BUILD_TYPE="Release" ../$pkgname-$pkgver/ -Wno-dev || return 1
  make || return 1
  make DESTDIR=${pkgdir} install

  install -D -m755 ${srcdir}/rc.quassel \
    ${pkgdir}/etc/rc.d/quassel || return 1
  install -D -m644 $srcdir/quassel.conf $pkgdir/etc/conf.d/quassel || return 1
}
md5sums=('569d310d06f124952009704d55a98100'
         '91e414cb313430a2360f1a594b1d6ed3'
         '479229556ba0dd94e3ce28e31e5deea9')
