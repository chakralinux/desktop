#
# Chakra Packages for Chakra, part of chakra-project.org
#
# contributor (x86_64): Giuseppe Cal√† <jiveaxe@gmail.com>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=smc
pkgver=1.9
pkgrel=2
pkgdesc="Secret Maryo Chronicles"
arch=('i686' 'x86_64')
url="http://www.secretmaryo.org/"
license=('GPL3')
depends=('boost' 'cegui' 'gettext' 'glew' 'libogg' 'libpng' 'libvorbis' 'mesa' 'sdl' 'sdl_image' 'sdl_mixer' 'sdl_ttf')
source=(http://downloads.sourceforge.net/smclone/$pkgname-$pkgver.tar.bz2
        http://downloads.sourceforge.net/smclone/SMC_Music_4.1_high.zip
        smc.desktop
        smc.png)
md5sums=('75ab7826303c49aec25b052a8b90287f'
         'f0d5fad6f1d0387bd909c93226698ba9'
         '0a681420afc9227e8fe975972dbf6226'
         'efca7580e28748625eb676c9d24ee122')

build() {
  cd $srcdir/$pkgname-$pkgver
  ./autogen.sh
  ./configure --prefix=/usr
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make install LDADD=-lpng DESTDIR=$pkgdir

  # install some freedesktop.org compatibility
  install -Dm644 $srcdir/$pkgname.desktop $pkgdir/usr/share/applications/$pkgname.desktop
  install -Dm644 $srcdir/$pkgname.png $pkgdir/usr/share/pixmaps/$pkgname.png

  cp -R $srcdir/data/music $pkgdir/usr/share/smc/
}
