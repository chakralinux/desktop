#
# Chakra Packages for Chakra, part of chakra-project.org
#
# contributor (x86_64): Giuseppe Cal√† <jiveaxe@gmail.com>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=kdeplasma-applets-menubar
pkgver=0.1.16
pkgrel=2
pkgdesc="Plasmoid to display menubar of application windows"
url="https://launchpad.net/plasma-widget-menubar"
arch=('i686' 'x86_64')
license=('GPL')
depends=('kdebase-workspace' 'appmenu-qt' 'qjson')
makedepends=('cmake' 'automoc4')
conflicts=('plasma-widget-menubar')
replaces=('plasma-widget-menubar')
provides=('plasma-widget-menubar')
source=("http://launchpad.net/plasma-widget-menubar/trunk/${pkgver}/+download/plasma-widget-menubar-${pkgver}.tar.bz2"
        "https://bugs.launchpad.net/plasma-widget-menubar/+bug/762865/+attachment/2111453/+files/fix_gtk_apps.diff")
sha1sums=('be5a904bd73d8021b7d4909083931f1fbabe985c'
          'f874222526e7b00848ad104c41bfa0254ce085cd')

build() {
  cd ${srcdir}/plasma-widget-menubar-${pkgver}

  cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix`

  make || return 1
  make DESTDIR=${pkgdir} install || return 1
}
