#
# Chakra Packages for Chakra, part of chakra-project.org
#
# Maintainer: Giuseppe Cal√† <jiveaxe@gmail.com>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=allegro
pkgver=5.0.2.1
pkgrel=1
pkgdesc="Portable library mainly aimed at video game and multimedia programming."
arch=('i686' 'x86_64')
url="http://alleg.sourceforge.net/"
license=('ZLIB')
depends=('dumb' 'freetype2' 'jack' 'libjpeg' 'libxpm' 'libxxf86vm' 'libxxf86dga' 'libxcursor' 'libpng' 'mesa')
makedepends=('cmake')
source=(http://downloads.sourceforge.net/alleg/$pkgname-$pkgver.tar.gz)
md5sums=('b92276fb9bf47555476d7c1ed39634a9')

build() {
  cd $srcdir/$pkgname-$pkgver
  mkdir build && cd build

  cmake \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_BUILD_TYPE=RelWithDebInfo \
    ..
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver/build
  make DESTDIR=$pkgdir install

  install -m755 -d $pkgdir/usr/share/licenses/$pkgname
  install -m644 ../LICENSE.txt $pkgdir/usr/share/licenses/$pkgname/
}
