#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=skype
pkgver=2.2.0.25
pkgrel=2
arch=('i686')
pkgdesc="P2P software for high-quality voice communication"
url="http://www.skype.com/"
license=('custom')
depends=('qt' 'alsa-lib' 'libxss' 'libxv' 'xdg-utils' 'hicolor-icon-theme' 'libcanberra' 'v4l-utils')
conflicts=('skype-staticqt')
options=('!strip')
install=skype.install
source=(http://download.skype.com/linux/$pkgname-$pkgver.tar.bz2 PERMISSION)
md5sums=('dacece3b56f28fbd70a713db12d5bfaf'
         '26e1772379d4d4df9471b6ed660a6d97')

package() {
  cd "$srcdir/$pkgname-$pkgver"

  install -dm 755 "$pkgdir/usr/share/$pkgname/avatars" || return 1
  install -dm 755 "$pkgdir/usr/share/$pkgname/lang" || return 1
  install -dm 755 "$pkgdir/usr/share/$pkgname/sounds" || return 1
  install -m 644 avatars/* "$pkgdir/usr/share/$pkgname/avatars" || return 1
  install -m 644 lang/* "$pkgdir/usr/share/$pkgname/lang" || return 1
  install -m 644 sounds/* "$pkgdir/usr/share/$pkgname/sounds" || return 1

  install -Dm 755 "$pkgname" "$pkgdir/usr/bin/$pkgname" || return 1
  install -Dm 644 "$pkgname.conf" "$pkgdir/etc/dbus-1/system.d/$pkgname.conf" || return 1
  install -Dm 644 icons/SkypeBlue_16x16.png "$pkgdir/usr/share/icons/hicolor/16x16/$pkgname.png" || return 1
  install -Dm 644 icons/SkypeBlue_32x32.png "$pkgdir/usr/share/icons/hicolor/32x32/$pkgname.png" || return 1
  install -Dm 644 icons/SkypeBlue_48x48.png "$pkgdir/usr/share/icons/hicolor/48x48/$pkgname.png" || return 1
  install -Dm 644 icons/SkypeBlue_48x48.png "$pkgdir/usr/share/pixmaps/$pkgname.png" || return 1
  install -Dm 644 "$pkgname.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop" || return 1
  install -Dm 644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE" || return 1
}
