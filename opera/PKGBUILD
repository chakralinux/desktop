#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=opera
pkgver=10.10
_buildver=4742
pkgrel=1
pkgdesc="The Opera web browser"
url="http://www.opera.com"
depends=('qt')
license=('custom:opera')
arch=('i686' 'x86_64')
source=(http://ftp.opera.com/pub/opera/linux/${pkgver/./}/final/en/i386/opera-${pkgver}.gcc4-qt4.i386.tar.bz2 opera.desktop)
md5sums=('b22f377a7a85df3f7a3831fcd2a4b2e4'
         '43331f6889a24c55274968bb47ae824d')

[ "$CARCH" = "x86_64" ] && source=(http://ftp.opera.com/pub/opera/linux/${pkgver/./}/final/en/x86_64/opera-${pkgver}.gcc4-qt4.x86_64.tar.bz2 opera.desktop)
[ "$CARCH" = "x86_64" ] && md5sums=('bedd94ab5a663d8e4b694da4772471b4'
         '43331f6889a24c55274968bb47ae824d')
build() {
if [ "$CARCH" = "x86_64" ]; then
       cd ${srcdir}/opera-${pkgver}-${_buildver}.gcc4-qt4.x86_64
  else cd ${srcdir}/opera-${pkgver}-${_buildver}.gcc4-qt4.i386
fi

   ./install.sh DESTDIR=${pkgdir}

   install -D -m 644 ${srcdir}/opera.desktop ${pkgdir}/usr/share/applications/opera.desktop
   install -D -m 644 LICENSE ${pkgdir}/usr/share/licenses/opera/license.txt

   if [ "$CARCH" = "x86_64" ]; then
      install -D -m 644 ${srcdir}/opera-${pkgver}-${_buildver}.gcc4-qt4.x86_64/usr/share/pixmaps/opera.xpm ${pkgdir}/usr/share/pixmaps/opera.xpm
   else
      install -D -m 644 ${srcdir}/opera-${pkgver}-${_buildver}.gcc4-qt4.i386/usr/share/pixmaps/opera.xpm ${pkgdir}/usr/share/pixmaps/opera.xpm
   fi
}
