#
# Apps Packages for Chakra, part of chakra-project.org
#

pkgname=opera
pkgver=12.01
_buildver=1532
pkgrel=1
pkgdesc="A fast and secure web browser and Internet suite."
url="http://www.opera.com/browser/"
depends=('gcc-libs' 'libxt' 'freetype2' 'libxext')
optdepends=('gtk2: GTK integration' \
	    'kde-runtime: KDE4 integration' \
	    'gstreamer0.10-base-plugins: HTML5 open codecs support'
	    'gstreamer0.10-good: HTML5 open codecs support'
	    'gstreamer0.10-ffmpeg: HTML5 not so open codecs support'
	    'gstreamer0.10-bad-plugins: HTML5 not so open codecs support')
install=${pkgname}.install
options=(!strip)
license=('custom:opera')
categories=('network')
arch=('i686' 'x86_64')

if [ "$CARCH" = "i686" ]; then
    __arch=i386
    source=(http://ftp.opera.com/pub/opera/linux/${pkgver/./}/opera-${pkgver}-${_buildver}.${__arch}.linux.tar.xz)
	md5sums=('892fa890e9945809dc5f6bc19b45b0d4')
elif [ "$CARCH" = "x86_64" ]; then
    __arch=$CARCH
    source=(http://ftp.opera.com/pub/opera/linux/${pkgver/./}/opera-${pkgver}-${_buildver}.${__arch}.linux.tar.xz)
	md5sums=('80dbb801d895c901e8518b488a837524')
fi

package() {
        opera-${pkgver}-${_buildver}.${__arch}.linux/install --prefix /usr --repackage "${pkgdir}/usr"
        install -D -m 644 "${pkgdir}/usr/share/${pkgname}/defaults/license.txt" "${pkgdir}/usr/share/licenses/${pkgname}/license.txt"
}
