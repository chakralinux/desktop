#
# Apps Packages for Chakra, part of chakra-project.org
#

pkgname=opera
pkgver=12.15
_buildver=1748
pkgrel=2
pkgdesc="A fast and secure web browser and Internet suite."
arch=('x86_64')
url="http://www.opera.com/browser/"
license=('custom:opera')
depends=('gcc-libs' 'libxt' 'freetype2' 'libxext')
optdepends=('gtk2: GTK integration' \
	    'kde-runtime: KDE4 integration' \
	    'gstreamer0.10-base-plugins: HTML5 open codecs support'
	    'gstreamer0.10-good: HTML5 open codecs support'
	    'gstreamer0.10-ffmpeg: HTML5 not so open codecs support'
	    'gstreamer0.10-bad-plugins: HTML5 not so open codecs support')
install=${pkgname}.install
options=(!strip)
categories=('network')
source=(http://ftp.opera.com/pub/opera/linux/${pkgver/./}/opera-${pkgver}-${_buildver}.${arch}.linux.tar.xz
        extra-pluginpath.diff)
md5sums=('59e1bb087e5861126a296ef0a68df8a4')

package() {
        opera-${pkgver}-${_buildver}.${arch}.linux/install --prefix /usr --repackage "${pkgdir}/usr"
        install -D -m 644 "${pkgdir}/usr/share/${pkgname}/defaults/license.txt" "${pkgdir}/usr/share/licenses/${pkgname}/license.txt"
 
        cd ${pkgdir}/usr/share/opera/defaults
        patch -p0 -i ${srcdir}/extra-pluginpath.diff
}
