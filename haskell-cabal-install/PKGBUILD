# Maintainer: UtG <utg[dot]chakra.linux[at]gmail[dot]com>
# Contributors: H W Tovetj√§rn (totte) <totte@tott.es>
# 		Stephen McIntosh <stephenmac7[at]gmail[dot]com>
#               Thomas Dziedzic <gostrc@gmail.com>
#               Vesa Kaihlavirta <vesa@archlinux.org>
#               Arch Haskell Team <arch-haskell@haskell.org>

## NOTE: when you update Haskell packages you'll have to update the entire stack to not break it ##

_hkgname=cabal-install
pkgname=haskell-cabal-install
pkgver=1.18.0.2
pkgrel=1
pkgdesc="Command-line interface for Cabal and Hackage"
url="http://hackage.haskell.org/package/cabal-install"
license=('custom:BSD3')
arch=('x86_64')
depends=('gmp' 'zlib')
makedepends=('ghc')
options=('strip' 'staticlibs')
source=("http://hackage.haskell.org/packages/archive/${_hkgname}/${pkgver}/${_hkgname}-${pkgver}.tar.gz")
install="${pkgname}.install"
md5sums=('e7e46406d43539616388aeafa01c689d')

build() {
    cd cabal-install-${pkgver}

    sh bootstrap.sh --user
}

package() {
    cd cabal-install-${pkgver}

    install -D -m755 /build/.cabal/bin/cabal $pkgdir/usr/bin/cabal
    install -D -m644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"

    # Add bash completion
    install -d "${pkgdir}/usr/share/bash-completion/completions"
    install -m644 bash-completion/cabal \
        "${pkgdir}/usr/share/bash-completion/completions"
}

