# maintainer: Neophytos Kolokotronis <tetris4@gmail.com>
# contributor: Jakub Kozisek <nodevel at gmail dot com>

pkgname=kdev-python
pkgver=1.5.2
_branch=stable
pkgrel=1
pkgdesc="KDevelop plugin that starts a script by opening a webbrowser"
arch=('x86_64')
url="http://www.kdevelop.org/"
license=('GPL')
depends=('kdevelop')
makedepends=('cmake' 'automoc4' 'kdevelop-pg-qt')
source=("http://master.kde.org/${_branch}/kdevelop/${pkgname}/${pkgver}/src/${pkgname}-v${pkgver}.tar.xz")
md5sums=('1acb6ec3f3ef1fb56d75b2d51a6249fe')

build() {
    cd "${srcdir}"
    mkdir build
    cd build 
    cmake ../${pkgname}-v${pkgver} \
        -DCMAKE_BUILD_TYPE=RELWITHDEBINFO \
        -DCMAKE_{SHARED,MODULE,EXE}_LINKER_FLAGS='-Wl,--no-undefined -Wl,--as-needed' \
        -DCMAKE_INSTALL_PREFIX=/usr

    make parser
    make
}

package() {
    cd "${srcdir}"/build

    make DESTDIR="${pkgdir}" install
}
