#
# Games Packages for Chakra, part of chakra-project.org
#
# Maintainer: Adrián Chaves Fernández (Gallaecio) <adriyetichaves gmail.com>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=speed-dreams
pkgver=1.4.0
_pkgver=1.4.0-r2307
pkgrel=3
pkgdesc="A racing simulatir with rich graphics and physics."
arch=('i686' 'x86_64')
url="http://speed-dreams.sourceforge.net/"
license=('GPL2')
depends=('enet' 'freealut' 'freeglut' 'libpng' 'libxi' 'libxmu' 'libxrandr'
'plib>=1.8.3' 'libjpeg' 'speed-dreams-data' 'zlib')
source=("http://sourceforge.net/projects/$pkgname/files/$pkgver/$pkgname-$_pkgver-src.tar.bz2/download"
	"$pkgname.sh")
md5sums=('92c324c2c47a598dea9278d9a66c5b78'
         'f0f5040a3746084d9967e055afa35f32')

build() {
  cd $srcdir/$pkgname-$pkgver-src
  
  unset LDFLAGS MAKEFLAGS

  ./configure \
    --prefix=/opt/$_pkgname \
    --x-includes=/usr/include \
    --x-libraries=/usr/lib 
  
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver-src
  make DESTDIR=$pkgdir/ install datainstall

  install -D -m644 icon.png $pkgdir/usr/share/pixmaps/$pkgname.png
  install -D -m755 ../$pkgname.sh $pkgdir/bin/$pkgname

  find $pkgdir/ -type d -exec chmod 755 {} \;
  rm -r $pkgdir/opt/share
}
