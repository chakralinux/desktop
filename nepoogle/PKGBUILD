#
# Apps Packages for Chakra, part of chakra-project.org
#
# maintainer abveritas@chakra-project.org
# contributor Michael Kutschall <michaelkutschall@web.de>
 
pkgname=nepoogle
pkgver=1.0.2
pkgrel=1
pkgdesc="A search utility for Nepomuk inspired in Google's search syntax."
arch=('any')
url="http://kde-apps.org/content/show.php/Nepoogle?content=145505"
screenshot="http://opendesktop.org/CONTENT/content-pre2/145505-2.jpeg"
license=('GPL')
depends=('kdebindings-python2')
#source=("http://kde-apps.org/CONTENT/content-files/145505-nepoogle_v$pkgver.tar.gz")
source=("https://github.com/serantes/${pkgname}/archive/v${pkgver}.tar.gz")
md5sums=('1ecb8ba1acad767c656645418b8eafb6')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    ./build.py nepoogle nepooglev1
}

package() {
    #install the icons
    for i in 32 48 128; do
      install -dm755 ${pkgdir}/usr/share/icons/hicolor/${i}x${i}/status/
    done
    install -Dm644 ${srcdir}/${pkgname}-${pkgver}/icons/rating_{empty,half,full}.png ${pkgdir}/usr/share/icons/hicolor/32x32/status/
    for i in 1 2 3 4 5 6 7 8; do
    install -Dm644 ${srcdir}/${pkgname}-${pkgver}/icons/orientation_${i}.png ${pkgdir}/usr/share/icons/hicolor/48x48/status/
    done
    install -Dm644 ${srcdir}/${pkgname}-${pkgver}/icons/no_{cover,photo,symbol,video_thumbnail}.png ${pkgdir}/usr/share/icons/hicolor/128x128/status/
   
    #install the binary
    install -dm744 ${pkgdir}/usr/{bin/,share/applications/}
    install -Dm644 ${srcdir}/${pkgname}-${pkgver}/nepoogle ${pkgdir}/usr/bin/
    
    #install the .desktop file
    install -Dm644 ${srcdir}/${pkgname}-${pkgver}/nepoogle.desktop ${pkgdir}/usr/share/applications/
}
