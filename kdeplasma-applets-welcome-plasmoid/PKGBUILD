#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

pkgname=kdeplasma-applets-welcome-plasmoid
pkgver=2013.09
pkgrel=1
branch="master"
depends=('kde-workspace')
makedepends=('make' 'cmake' 'automoc4')
pkgdesc="Chakra's Welcome plasmoid, for live ISO info sharing"
arch=("x86_64")
license=('GPL')
#install=$pkgname.install
url="http://chakra-project.org/"
source=("${pkgname}-${pkgver}.tar.gz"::"http://gitorious.org/chakra/welcome-plasmoid/archive-tarball/${branch}")
md5sums=('c7e95506341e5101feaaecc60cf14ee4')

# create tarball: source PKGBUILD && mksource <git-branch>

mksource() {
  if [ "${1}" == "" ] ; then  
    git clone git://gitorious.org//chakra/welcome-plasmoid.git
  else
    git clone -b "${1}" git://gitorious.org//chakra/welcome-plasmoid.git
  fi
  pushd welcome-plasmoid
  popd
  tar -cvJf welcome-plasmoid-${pkgver}.tar.xz welcome-plasmoid/*
  md5sum welcome-plasmoid-${pkgver}.tar.xz
}

build() {
        cd "${srcdir}/chakra-welcome-plasmoid"
        
        cmake  \
          -DCMAKE_INSTALL_PREFIX=/usr \
          -DCMAKE_BUILD_TYPE=Release
        make
}

package() {
        cd  "${srcdir}/chakra-welcome-plasmoid"
        make DESTDIR=${pkgdir} install
}

