#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>
# (c) 2010 Drake Justice

pkgname=cinstall
pkgver=0.4.6.5
pkgrel=3
depends=('rsync' 'cbundle')
makedepends=('kdelibs' 'qt' 'automoc4' 'libcroco')
pkgdesc="Chakra's Bundle manager"
arch=("i686" "x86_64")
license=('GPL')
install=$pkgname.install
url="http://chakra-project.org/"

source=("cinstall-$pkgver.tar.xz" 'refresh.patch')
md5sums=('1c5119fbb846ffb25aa1517e4a75e89f'
         'c4e85f9e536fb62f466a535cd5a1dedc')

# create tarball: source PKGBUILD && mksource

mksource() {
  git clone git://gitorious.org/~fritzvantom/chakra/fritzvantoms-cinstall-differentui.git
  pushd fritzvantoms-cinstall
  popd
  tar -cvJf cinstall-${pkgver}.tar.xz fritzvantoms-cinstall-differentui/*
  md5sum cinstall-${pkgver}.tar.xz
}

build() {
        cd "${srcdir}/fritzvantoms-cinstall-differentui"
        patch -Np1 -i "${srcdir}/refresh.patch"
        cmake  \
          -DCMAKE_INSTALL_PREFIX=/usr \
          -DCMAKE_BUILD_TYPE=Release
        make || return 1
        make DESTDIR=${pkgdir} install || return 1
}
