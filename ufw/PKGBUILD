#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=ufw
pkgver=0.30.1
pkgrel=1
pkgdesc="Uncomplicated and easy to use CLI tool for managing a netfilter firewall"
arch=('any')
url="https://launchpad.net/ufw"
license=('GPL3')
depends=('iptables' 'python')
backup=('etc/ufw/before.rules'
        'etc/ufw/before6.rules'
        'etc/ufw/after.rules'
        'etc/ufw/after6.rules'
        'etc/ufw/ufw.conf'
        'etc/ufw/user.rules'
        'etc/ufw/sysctl.conf'
        'etc/default/ufw'
        'lib/ufw/user.rules'
        'lib/ufw/user6.rules')
categories=('network')
source=(http://launchpad.net/${pkgname}/0.30/${pkgver}/+download/${pkgname}-${pkgver}.tar.gz \
        $pkgname.rc)
md5sums=('3182fad2249cf5f7e5589f44f0f078bd'
         'e15e82645bcb61e85ecc6e6c7c2fc46e')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  python2 setup.py install --root=${pkgdir}

  install -Dm755 ${srcdir}/$pkgname.rc ${pkgdir}/etc/rc.d/$pkgname

  install -D -m755 ${pkgdir}/usr/sbin/$pkgname ${pkgdir}/usr/bin/$pkgname
  rm -rf ${pkgdir}/usr/sbin
  chmod 644 ${pkgdir}/etc/ufw/*.rules ${pkgdir}/lib/ufw/*.rules
}