#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.3.4.2
pkgver=5.3.4
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('8158f7c5a1a0bd1e29bff898950e7256'
         'd63abf9eb6ded08dffb2bf6e18cf0b24'
         '179600e82050519c08479cfc6159f380'
         '989017052561ffc30fd6a8a80d23a6e5'
         '833bee6ae377c807132f031b7bcb1936'
         '29eb8edd0f4768ebe595c0d07e96d2e2'
         'b034b35119edf38382fd121677642844'
         'a43ecb624ae52763099c8e229f9cb5fd'
         'f60ac6cf6a28f4c40a3412b017415703'
         'a60de8f3ec27cc149e8ad635629e1e85'
         'ac6b3699ee2653f5123eb6d01f3e14c1'
         'f9db6034ee3c7545767e006e198a59b0'
         '95912db21055fe7b011194d4a60fd0ba'
         '315c9aaf5b26736e2b10fa374c688d6a'
         'dd665bf904ccf7a0be4a96ae955349cc'
         'fcab8dce2f7bca14be242152be954f19'
         '7880f222699138ec308bca007b178160'
         '382f326232a50749eb64b45139ebf679'
         '6a95dd01d35aafd88a330fe6120e5dbd'
         '64e01f7989810849bb0d38d9ed2f5c3e'
         '29050ede7a7cd5ab34d3f55991e03e1f'
         '8cf5a063dd971dfecc049a236bb33620'
         '28f11b93f717e17cf09e688558195cd9'
         '0c5a947dea7f8c36a99632d96163095b'
         '78b1355026eb78d7e48664597929302b'
         'ab3594887ff8948b1f3f16453eb95a6e'
         'b2f86d393582ee10d666262319fa7984'
         '2f6c722ecc612b4c18403ccb272bef0d'
         '6b789d5fb7361b7338283f6a1f6fa45c'
         '3118a95d27c9440093a72f4f3b01773a'
         '3235a2b266a9371dbbcf89b7ea2c967f'
         '78fb4a6b25482448ce37846fe0e961ba'
         'e260a9005fde79a4208e616ca1f63a0e'
         '33ef7dc29904cd0ea47714873b449d08'
         'f1cc592d4c706afd740994bf8c9f2862'
         'd81b9c28b46c29ddc68d9760bb6a6e5a'
         'b49e21f3f856432d4a244a4a1a8f6d81'
         '782882fccf3bbb4f65105196cfc81897'
         '4a70f56b270a1fb1dc74403d6186ac4b'
         'a7653a5d7a9a095f96bd9bc9033bf928'
         'f143d14c93589b87844abc2c670a4673'
         '88d6d0dfe7a8d392399a81cf6c1353e3'
         '817a1360957062204f994fe6f2f78cb2'
         '0bac1f586740b8448695738f6bf4a738'
         'c3427c182445a2a9773f1758ebf466db'
         'c97aabfe8e4bda2233fd14c44f2d567c'
         '2a85d17b85b4fc486e6838ff6870395f'
         'fe8e0b78d750f3ccf987c61a1eb3ba85'
         '7153bf224ae9a5a2e04168f5dfe30f35'
         '61a50ea9340c1d51b13c1799da3f5145'
         'd34f9bf2bcfb806c7e051eedeca845c5'
         'af065b25bdfe94d373971aaa43801cd7'
         '324eb47f3452d2d71e753131089a6faf'
         'e87e766c0c59c8013ff042ae6e5a9afd'
         '19296e10aa08611c787a61a250f3cd83'
         'b0e082e241b8b2f6da99e476a958f5a6'
         'a98965a1d5a59b47a543ef6f6225ce6e'
         '2662ced4c3ec69427bd8e737e9d452fe'
         'bd5d526ca6250aa7fd088a27228c6e63'
         '27064852ac1be1ee8c4e4b14e449fabc'
         '7539d4cefeee0ff1a516e5e396632c7d'
         'e5b2cf64e6ce949bcbfa4a0e0621701a'
         'e20d0884f19f29787309c86b1cd3f37b'
         'bf2c43917e940fe7a978d692983d8d39'
         '0e4cd0d8d9d8f12dea9011ebe5870957'
         '140c2a170245e29968b5df140fadbeed'
         '69da72190a194138f9949d3a7c71992d'
         '810e3dfd33abf547a02d43d010b557bd'
         '477d69f9058526cde5c46e5523b8369e'
         'ea572c74a0dd30dc859cb8cdcb910202'
         '3dd13f1c01e4fa7390e448ec0b7d29c4'
         '81a560509bd1757df4b6450bff91e748'
         '7b2cc619d1e272a6838fea2e12dce0bb'
         '037b0abd8b6e9a577387f1d74ccaecf6'
         'e85fb8f4e055a360e27f0160bb3dc910'
         '849a3a69bf2b1848d709992b162d80df'
         '59f992b64635cfdfc8e68e1ab2455122'
         'eb4cb80cd7fd9ec4d1eb5b5671584a44'
         'efb259666f656d6095d3ed7ec335fe5e'
         'da102e4ae758c74e4ec144b127ce4383'
         '76ea65056440f7e71094a3e904523ffd'
         'd4c06140cfa5481f058071a3d006573c'
         '509cf0d781d6e4abc00b2280c2d2fa1d'
         'cf507548bdf788993d8e9ca5167fc617'
         '89d47590aa174ba07eec773629efc3bb'
         '6eb418387a45c45e8ca8f8a4d1b7a7ce'
         '0cb298d12602dc309b621a536046c595'
         '407b91a7b88f5cd8a256f43db5476230'
         'f14af358d1a7adc60ce8efd73bb43ed6'
         'e14110a2e7e0abc54f0b541ecc3dea45'
         'bff1a3e67379d7460d534727835261b1'
         'a6f5cb6e01d4b10e972b93eb664559d8'
         '3a5067305734f4d2d18a1f414aebae13'
         '8f390d8e0983c966a40fab4626695a33'
         '2f8f798ee468d9fdf4cabe040555cd79'
         '02ae5d01fa33046fcb0283141716e6f6'
         '4c97886807f91197c73da9b172fdfa4b'
         'f6f1017561b991e5c6202eecc58d278d'
         '47189b71d44937fbe2d86e8a3ee61aa1'
         '7ec6184b87d47a28e5bcf027c7a6b38f'
         'ef7709c9e246a55b01e3578aff17b537'
         '8c6fc684db6f5f024dbef497b055e935'
         '3d7b167f321a943bf19c3c370e5e3b67'
         '4b4c1a1811c12bcf1cb1e2924cccd2ff'
         'f75ab94faa87488614dad9292bd387ca'
         '07c17beea1599a539b1f0063003951bf'
         '0f3eaf5ab0bdbf547991c12ed02a530d'
         '324fb2e320eb1ac945e3fd3e00841459'
         '4f4266f194be6ff2b4b13720d8034f5f'
         'ada0b4b6b6e67afc40897af98c7a1c07'
         '369e37a8ba7f48f2d2b79983279849a0'
         '346c31187e973bc9b42a8b783f1ba0f9'
         'a3e57594cc4fc8c68d3febf1408ee543'
         'ade3de0ba13ee88f7e10703253daad05'
         'ee286e355641639188d16c623da5889f'
         'f68e23d03488c05e874cd1b435b18b20'
         '98d9ea42e26244b24a517f8609b1669c'
         '3f559f387731898c22398f89b907c6c3'
         'bf4b340c7a1d0b1ace23712cd7de7527'
         '9b18dd36170a1c09cefb650f2b0a222a'
         'c830231743c6b4491bbceee5646bd747'
         'db32688f87c6ae369a03d84347f106b7'
         '702130283f1fc3982f73939a8b4568f2'
         'f7b01df72d17ec1d6aae856300769857'
         '936769c095078bd981527200a649378c'
         'f3b3c3185190e630d8067d1607b7711d'
         'e858d02a304b5f205659519ee79a2c7f'
         '566ae325d9b409caa003cdf1222211d5'
         '426626b9d57cd4fdc451f9c2d2845551'
         'db11734d72b40f614bcb837a3d84af8d'
         '62ace482aae9aed52276845433ff8f7f'
         'd85c8d9cb34fbc7566ed4c827ed5aa57'
         '5b8ee4c0a78011fbba90903654962d39'
         '3dbb32a09982fd8cc931e400a3312f69'
         '05f26a17fa87385ad0aa05a6885d0cac'
         'e0662edf7b883c7c170304696a2fa885'
         '5b3e7d30c8d8db90ef593304f2d04065'
         '973caf4792d103cd128e8e077149459f'
         'cf0001b0c088b34f571d8758b5c53231'
         '564312276baec8deaffb4b98a07a8fe6'
         '6648221102356f3f38469824e863434b'
         '30c86a733cb69dda84c683abf3e0f76b'
         'b4b82d0e06fc054ff1d82bb10e772349'
         '3bfcc2b5c0f9a118e149ad26744e83a2'
         '2c693f7864e5871d90bc4c5fb1b63020'
         '7c432f4b66f909acb45f98d9a1ca1c88'
         '83ca1d4faa541d422ff03cc64fb1c124'
         'b45fbe5d2d7d8bc8790cf3c6988c54b8'
         '1352460d1d66fc901597963f0c8dd6f9'
         '50002df12676dedfbe3c4a213f79d73e'
         '222ab5b7c0157acb0f5defdde1872bbd'
         '0fc1e91fb5cd3f8290bf60d48d439e78'
         '924f907cc60740a98fc69729a167f3a7'
         'aed2d2074e686f590023875e11e09a10'
         '73b337d99c123dad96caf50dee6736ab'
         'bb365646638234d609db97f037a5445a'
         '2ce36590bc4792e237d3b662fea8c39d'
         '9f123dcaf523cddd067c20cc8d0159cf'
         '8ecfef4cb07013e97ad470ed3e718ffa'
         'ff8962d74ac17ba620e07e5a06fb2eb0'
         'eedd56ab00e57e526a4c63a775c082c0'
         '9beb9fe26b32fa24cf7def2c7d39a8db'
         '33a1b878ad372597c7cf402bdb0b570e'
         'dd9f572c9bb43080a047f7b2b29a6b3d'
         '8474d55ad4458e9850a5cc66813de9a3'
         '36cdaa04236aab4bcc434f3f16d74bd5'
         '5b3cafa2981abdfc7e8521b1da45e199'
         'e2cbd18d1c716bfc6258fb41854428c0'
         '88303faa826d07612348126494084557'
         '91adb2131e52f7530ade01edcfad89be'
         'c41503e17961255cd89c1337475d0d0c'
         '96b95229a519292c6a4b7685e8a82d0f'
         'd666c448b6518163787ff31e126a2e44')
