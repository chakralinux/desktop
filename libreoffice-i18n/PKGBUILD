#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=6.0.2.1
pkgver=6.0.2
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('ae2d844d0c28b772e315dbf0c178cbb1'
         'a7fbb49fabb1e3c1e836520738b5f688'
         'f164467642eb21144dbcd93ee34d54ac'
         '9ab553d8dd23864745529c1174131e2e'
         'd63ebb8637e5fe4280302b30f7028e53'
         '320e8a4c0b2d4f42344264389dee8d5b'
         '6d123ebd910a67d01984293448f226bb'
         '79f809b2d0d001ac6d1de3c596037f70'
         'b9b3ee4da0676aba7b4eadfab301bece'
         '548e2c1286a75a5371463e21a1fe52ee'
         '0b78f51192af12e8d8491acfe464f01e'
         '527d7014ff5013878de0089b804073b3'
         'a22f51df46c569514a69929716842150'
         '0b6c350b5b620a751dde2c5573dba388'
         '759597717e9f64430412890accae1685'
         '59976ffcbff79788939018a57f9f0fc7'
         '7936acd0298c77859799635c6a6a2ec2'
         'e1e100322979ca5aee10dcf34fdd20a5'
         '35370943a1f58548a47b5b6f832891b7'
         'ba600a17443ddb192a19bde2d083ec6b'
         '92d6547cb24233247c11b37b51bbbf80'
         '40c1ac4f70c560d6b7b5665ac1604bf2'
         '4beec60fcd678ff02e533d2ad909435a'
         '234f44c16f33022da55d8dd08eb298c6'
         'a966726659dd32ee34ac80f3b2dcc4a3'
         '0053314a93f2404d5a0af8f0e968d087'
         'bd08429adb3e2671fb7f7dff5d13acfe'
         'f823b122e87194eb1fe2b1740a17d0d1'
         'ae5cc30bd9a212811206bc14e9c0bd0c'
         '63d979789b9346476a8b6fbc1237e561'
         'bbc721f118b5d2a2b21d299174d6bc72'
         'eaf6f601ec57ca37eb268fe7387026f6'
         'babff2b8ef76c6c2f198e0106405640d'
         'f8b1413d089a38c62286cd3988ff8610'
         '9b35bd43b11b79389d879f61e0689ce8'
         '26840eda24be3f49ebf6afb9fcef8cfc'
         'b71d792cf007f6db4a7c6a4dfeda0304'
         '7f5e32ca43c28c1854957147a090f383'
         'ed01d118ffc0701877b6e436c0c67f1b'
         '3bfc09287e4240cc95c6f6dee90c46b4'
         '1487227e332d94b57ed2bbb326c5bf2c'
         '671cccdab8a1d0885f8c9251ce826297'
         'acf7f21e02185e065d004f1e5e9a9c52'
         'a8604930ebc63195e033954c753e8137'
         '9ead6bd4d238b852cbae9c6b69c14926'
         'd1d939d6d133a991528748fc71544f45'
         '5d6424c98ed5ebbcc518976a75ccdf3b'
         '6ea76776cd0a3a44e12fe7370ad9f6ac'
         '9a9a42606fb9da170f008bd378667bb1'
         '7ce318dc2a7a86bea72d83f099bef19a'
         'e03a3c086fdf77270ec665aa8a1559b7'
         'f0f28af0b6ae5e865961c9557c51baa2'
         'ca3885ba224e80caa549ae2e94cf1787'
         'bed2b4c781c5d38e47ae4c3a3910b6c2'
         'f7aad476412ea256fe94828d8b13dc4f'
         'd57c0d057b3f99a449f9132d4382ffee'
         '20a861353ac69e598fc61399c9e6462c'
         '0712254cca2d792c52f3a8371f3111b5'
         'f754e50f452e2c6e03852bed23568200'
         'cf82560739f20a6cdebd5ee046507c80'
         '3ead192096f2e25d3eff02631e3376c4'
         'aa840730be3c096853aede686af29952'
         '5611fd0694a6dd5c8181e32d2bc8a2f3'
         'bf50d26271b02aec2da1cd8d74e802cd'
         'a05560d7b5bc69bff1e77863db936b0d'
         'cfe825536fe00a4c8858c2f90b65c829'
         '46091647122ffb6be08a145100e0bfe0'
         'bba13b8784e422b295207bf971147867'
         '5c41a5bc076f31d3f93aa4523edd88c5'
         'c914b742a2f5143ddac5239f7693f5bd'
         'd693959a13a7c766220faa5001122701'
         '3380632ce97a55ca8037cbeff8e61968'
         'd54b8e404f8a96af543417580365382b'
         '97e7ea28ca2fd75c3cc510c9c0efc801'
         'ae5ab876cbd0879040caab9abddb9b33'
         'c8d8934d97752b9c0cab460f29dcedce'
         'e136cda781fb52229ec20e00ef1a8652'
         '8a7f62862d4545984dccb292dd025279'
         'd23ff7c6c454197ac85c2b592aaebe5e'
         '62bffd34becbde01048f9a7fae20476d'
         '773b394623c51c46e30731c2648db401'
         '8756e5b80375bb52c7f3e3d29b226236'
         '8b3ec97d007cf4a47ffeba3ce95107f7'
         '63cc581f67e8c250502e952dda15311d'
         '2447e8ddea3bc0f69e691de4605bfd88'
         'b44c69b526c69bb22e92e0c197bdf8a4'
         '328f2b386f7d554cd4ff8fbb9dd77882'
         '81a6ca94dd7e3c5c7cbe41e4c60bb40b'
         '3e36cbbf7b1b207428b48a5c501f1b93'
         '4b5be969bda03acdec6c7c0cdfd8b742'
         '9a866f50ea3670d720e29de0a08a618e'
         'dafea697c9a93342c78d5c9801ce8776'
         '50f8dabb08e40259c22441540f7c676b'
         'a05307772ef940df5e648b194ad09a69'
         '844a3c2734cb812e4c68b9d41bbdf687'
         '0e704dab2adee327d10d91d0314253b0'
         '203bb3167bf183f5ff65b4985377eb4f'
         'f58585c7f9c99cca9b0585dd7c4833d8'
         'cff56da4e505624fde5d1fe27f78a87a'
         'd80fd30064b2bdbb079f87f5ad381b93'
         'da15c0d9558ec42e4820b6ecf34b9846'
         'd40a4c73a76c4f811343e625501e43df'
         'f43ebe377259709046c209a410ef47da'
         'bf88d93d1320d5123b57d1561f669074'
         '505f9bffe17181ab89b80133e8671ee4'
         '04a5160599b66f77f336a48cff0c69eb'
         '1bb6fdcf7379d1efab8324c3b393afc7'
         '4601a678f33d892445fdaa3a0bd0deb0'
         'f6e82d25d35977b28a1ba05289247d87'
         'c123354635405c384d45baee7d23e15a'
         '0a7ffe8c542b814aa13b49bd8408352d'
         '49bd9960e246d455acdc9f3a6a070ae8'
         '523108604b9cd331af182766b9ee7fc1'
         '2481469d368f3e0dfe6646eed93d35e8'
         '31950491310be22dff8c6c7838787d67'
         '0e54844c5b4cffd77fefac434dbb2720'
         '621c8fb0b794bafa72d5d9da8789e5f3'
         '481152e87b44d30d2765c1622f0e7376'
         '11cb37806574afb0c551fe0c489412bc'
         '865d3ea7d6ac37df404ce34cc094374a'
         '1f3b6e9d9ab537499a0ca7f3c98e7e26'
         '18e198f6b0f0635886b1dd3fdc3136c0'
         '1dba86cd9d9eeea4722085a615f2c41d'
         '505be09c6fc88bd4a3d2af8fda2e7ab2'
         'b7845409ab48c2d7c8d7f0e9f0a17135'
         '698a3ccff6340f1017c44f288d276451'
         'a377298b0d6355eb2fbb6894afdc6f0c'
         'b673ce054e63e6d8f9cff0817fac6874'
         '16676e0f317ee7f9ebecc67f04b32f9c'
         '137e65122fb74781c5057fce54819358'
         '6b1beb41dff11738d07f49c6f9dcda6e'
         '5f8aa6caca5a7660ff2717daea0b7d0d'
         'e23470b85a2350d13c4464b3f7911931'
         '15934e7346bbfee327a2368ec6891368'
         '164b4f2cb252d0f25bc132a028eec3c5'
         'cb3633434dd0abb239f1b93a7a25ff21'
         '255e842d1e8c409813e6519181cbda6d'
         '1bb01a678953bd3c42de48cb32d2ebe2'
         '4f8074855d70e866c8e55e60121685b4'
         '65b4358e69d4c400a0360c27b287ac00'
         '9628fe450ffe52dda78e65ae81b7e37a'
         '0545da0e4d7ecdb595d76b20de85c64e'
         'c6a6eb1055e328c54f88382bb52cf4c7'
         '29385154969fa11c78a6241d1938e05b'
         'a1303dcc23507dede04480b8b5c93051'
         '535b87d106d3828d63399528adec65c0'
         '67d0039a1f925a6d7ef5fafa977b2c68'
         'cecf6eb8e2ca505c80439fa5e5e97138'
         '00a88b9939a32347f150f82b293697b9'
         'ec649c170ad18a15cbea1a7e85cf8268'
         '7865e3d2aea8720bd8a44edc5922b77d'
         '8cfc441906f329efcdb47d710986f6b1'
         '99a4a5a1ff5de9bd042e2ea72cdb9684'
         'fe18792a9d11d0f83267a0312fce974b'
         '0256096988281423160baee379f8d2cf'
         'fff35cfdaccff41f96105631cde29078'
         '0a162a22fc3d7080409af30c35c22ecc'
         '24893616e12d3f8087a6be0d57a03135'
         '3ca2f16470e847f9b74e2b360dd50ddd'
         '9dae14dcae80b9b919d41535a607be51'
         'd20dbd2550e59ed3107e0d019f6496fd'
         '499d6e08cf8531eb963fa49c48fcfc20'
         '9370b0254def2cd6a84aa7e439e363ae'
         '898029f530b8282108c758ca390c0db9'
         '986660d3c3aa99f38731bbf771f9f726'
         'c757791591bf841572eca1e6a3aad6e5'
         '0db7d063986caa139b513f999367fead'
         'f4f16749643e429a91bd41b7b68ec891'
         '6855583c4d4a26338ef18dad28658c17'
         '93640dbf4e93e02134f134f93c7e1577'
         '21a95bc09a4b0e6c92bf2619d3781b7a'
         '623b49d14cbb291a9357a3a92722b92a'
         '757ed2c7c378eb3c0fcc48fe31d58ad2'
         '1f566e2007eabaf961b186f41ca3cce5'
         '5cd8dd52d06c7cb4e04614d3f3200199'
         'c4861af6c8b729aef8c010c2a2309290')
