#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.3.5.2
pkgver=5.3.5
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('6dd3df5d78acb6191939692305b8344e'
         '5bffccd9ef91dca48f7fbacb0c771f0c'
         '6496644b013fc9675d9fe719ab3cf5a7'
         '58ddb011c00e2453e73967231d7a1057'
         '7ab629ce4226086faa3f7dbdfe6237ae'
         '16ad3ae2199529e17a16fe4c99aaccba'
         '7f7e758a942a18e9b057820588a3dede'
         'b5239de5aa49070e84dcd025128dfa18'
         '892673d56121294107551317f34ddbe9'
         '91daa6fd55158e6a527a42c51071a1b3'
         '13519b795c91dac702c056cd99c97532'
         'cc2e3f80ad1e488cce080bf6654b7f96'
         'f4a13f4a460dc2bb9f7edb935ff6e8a1'
         '123679a50bc39241b8e64100e9d7176f'
         'b7f36817d966234521eb67ca2f046458'
         'f6bd14096e704aed7cc671da1e385722'
         'bf01a9cfdfc6a809fa6f5b0066222f3a'
         '3b51e509d8b2e86caffd0ee32551e5e3'
         '239e1f7a16a644d53409e53d65618548'
         '69e5befeadfab031e06efdea63b3eec1'
         'b8f56e1efea9d78678a1606f35066110'
         'b55419b1035513464db79f47ba322911'
         '688ac05efe469eaa65de986f18c59745'
         'f6bd0ff3c557c8d2a91552d72527de3a'
         '8cae699d6a3ead7e05e6bc6983424c51'
         '657f2bda252826367ffd58b0ee03691a'
         'b51f6d9c9942ecdb25690e4df94f6a5f'
         '587200afcc92f4382a697be927d17956'
         '32b5614cc0164d1e15dc995c61156165'
         'cce6c8b8195e986ed5cf7f0580f9947f'
         '061dede122d177a820717ca076af20fa'
         'f57b27ca5ff4bcd159cf1fc383f0fe8e'
         'f664129e29b0c50d74ee77aa3a960da9'
         '5637b45a252ec821442c1b70676feb49'
         '96aa4efe02d6a37e3f3fbc2bbb3e8d8b'
         '1c4b0933af2f5439d49ac6aef9e56b04'
         'a8ceb2ee3ccee806746e0019486fae4d'
         '4794fba42381d790926e371a11652d39'
         'a210b06de5449177a0c2688c0deda48d'
         'f22b5e9f02f27f0cbecad841b2ca4f53'
         '08084a519baca5a17610357bb97ce30e'
         '408606c1c3ab1c8250d30f8858b86a05'
         '735db147dc8cb19c500079b7b870f746'
         '8947b3c4f00e57232952feee8b4bf6b8'
         'd4ed5734dc5375d4db3c6c009f474581'
         '6c3edd9e831512b714bc1825ab73aeb1'
         '81fa2fb946682c493965e8ed573b04dd'
         '6eb7891f130b3cb36607941dea68a3e6'
         '864e947ef7c055366c6543111112c782'
         'eae44e2f55b8145321718976045e6a31'
         'a78164df1ce3a5dca11a7653b21ee509'
         'c89dfc2afcd5708c7a5e0fd01abe772f'
         'b6cc03e84f9e184a3f13a669262551b1'
         '4f8961400726d2517317d88acbbb5347'
         '29f6b877d1df3b78a3c334b6c28a5d5c'
         '5358cf0607867ffd8b5e909624353afa'
         '9d2e428818e36f04d32c29b8867d054e'
         '6bcb616501a143b360b7473baedb9d33'
         '4f23a93d239e3633362a56f8be35a7d6'
         'c526ce244c44378bd153f51ba717bfec'
         '6a73687db39a1ccb57fe807defe303e3'
         'd5dafc8842435706afc086f83eaa972f'
         '9b652e16561728f90808878b92777575'
         'a4df60e95a8dbebe15100ba8552bbcba'
         '31e2a134721a1cea12ff7ab779e97d51'
         '4e873c7c388b48e3408213b41de00b4e'
         '43f639d4f9054a7268a66109c9ca04b0'
         'ab638f151ce997c42d683501e0e6eb9d'
         'e287ef1f4bf6011c2a7772379504c757'
         'ad0eea5a91e9f1d3993517baa7362864'
         '8b675bde71d8c03b21342553c2d3aec0'
         'ea643f5da65ab72bda2af857b9b1dd7d'
         'ed2586f09baf8d42de55bbd23236edf9'
         'ffe2c46c40d793d6283575779a2eebd1'
         '92f4318f7e29e95c0455b705a79099b3'
         'a5a2b638968750e887df16abea03a361'
         '05368443c556cb65e07a7645305de96c'
         'ab144a580212dd110988285a74dabf55'
         '874018518258ab78f57de777962e8862'
         'a56f0d6c2aaa9cb772ce91301b7f03ba'
         'de5f7eec0cd3dcf69b33e769def6192a'
         '07c81a8ce04159b3e4641c4b99280a8d'
         'c6c47d170409ad37362189cf260ea897'
         'c386764f559a9fbaa6cb4a4e69d7dfae'
         '6855ae70cefc9a16cb6ec9b6bcc7894b'
         '517f08faec9603e78d1e7d2ceaf0fc91'
         'e00b6595d8a74ce33d1349fa905aa176'
         '3236d93b9aa5a5534a4a06d78aabd5a9'
         '5ae41b477b629d3581367b73114a0773'
         '38b2815c5bf339bd5545e7ca51484b0b'
         '7e6f98301072211c7babe564f42b7b38'
         'dbe9c5ce994b14b6d8fabf126f036644'
         'ca2607852d02efb4596fdc8fb36d2c54'
         'bf9c781bfd6a1e3255cf975fe21a68f4'
         'e8edd369a6705f43c85bbce0b875ead7'
         '48117d7e1f33515964c50aa4805ab97e'
         'd64f3c0f4df267691080cfb42d9899da'
         '5e357eb3118e594c1ecf5c1630163f4d'
         '3b7ca5f74bf4e33fc5038dda9c990a60'
         '4f2b1f4d28a24b6ea2af46ca1ff41778'
         'd88dc1cd36ae870e6fe4e072b73a0bea'
         '6b8aff7c307771a38f19d4329507e557'
         '35607a83df88e87641554278a1e9dc65'
         'f7a5f7ce34075684d5f282445afe4695'
         '7ff4d1aff7f6f3c622b667e2a0a93dfe'
         'f1422fafc1f5259c2eb98e65df7f159a'
         'a70dc29dccb2017ed9236812951d7415'
         'a9492ffaaf0e9323e8464711bf4afa09'
         '3b266f8687abfd15dfa28ea237b2df9e'
         'ebba3a2deb7df0ccec308911586e24e0'
         '363847dce4942e0eea79528d3f4bb224'
         '1287aef1c92ee27e0a322544ff41cbb1'
         'a8cee297eea4b352c772a06ba05c9237'
         '70778725f637ef8735fcb070b2b1d7da'
         '2e7140278e190ec7d118544aaec17f97'
         'b81de0b5d6a3c105454ffe775b2fdf02'
         'ef5d99e56d97f1286adb27adee71abc6'
         '511ff4a9f81d7396f7a7aa45c3dfdf91'
         '2e7c5eb28d170930c6195cda6eaea0b0'
         '29f6249d1dc395ad0f1ceb43d792f244'
         'ef2533588c9b71db1969f4b982bb618c'
         '353c526e395f8f060a6463d0ef8ef824'
         '84383b6f73a7aad75299fa869847bf78'
         '747fe61ab19eecadeb51041370152c54'
         'a457bf6b59cd76697c8cb0b44ade90a1'
         '09a9249d1e4b977a65debe6849983f0c'
         '551eb8b75e3344b9e19f666a50af1fac'
         '67d7937713c8b8c171633e8e47c446ba'
         'c6fdd5a4a2c1b9debe5efdb64ed197df'
         'dccd574941a45e77b894ff01e6b44972'
         '954516637bef7673f49cda2a5c3d2c6e'
         '4b778b49891c62255471d71c1627faa0'
         'ed6f8636d55db54108dd87d39e0131dc'
         '8893ee3147c536bfb0972fcc57810fcd'
         'ef8f697117a519d72486781f73dcf3b7'
         '884193c73b5ba432da83fe77cf074d90'
         '1e01fe61ac8eb1b55ab81c7736eee524'
         '3b9c3585b2b51309850def09112c7261'
         'c640d2ea66b28a8c7125f02fb7e34787'
         'e88b7d3dabd29d41121b1e8696cfc3a4'
         'f0735fcfd846155e24d71cbbdb331d7f'
         'de36c24fb3c36d1b4e4f83833c01d1e0'
         'e245d19d1f0bd32637adf43a90672ac2'
         '54c3638c336281ab5fc4e8514cea482d'
         '566f70879c9b896fc7f6c479f7e1058d'
         '21aadd6ae66494a8426c91df45594ca0'
         'a8e2acfa35f3671b4a735cf1ba800095'
         'c2b273d294e8642eb06ec4babade0dd4'
         '750836df4556778313688dbe8c51c655'
         '374e6f651eb87bfc95279cd6d8612fdc'
         '1cc0ae5e0b603d3155ec0c6daf95eaa5'
         '24c815c2cc61451f51f86d036baa8c8e'
         'e0bff05e51058bbac107050c3e376a62'
         'd04457129f4870aabc26c90f64413054'
         '7ca0bf95b7f9daa97ef7f87bc50a775b'
         'f7ab6ed99093d89e517e34a3e142a842'
         '7c5a1b5f9170cb1e9abaaaa2ef1f5f09'
         'cbcaedb2522e7a679cd4552c9c837d28'
         '2a8832c35ecebe154724d891235d388a'
         'cb8cb09af5fd858f5711f0a23766e337'
         'e2c2d089261f28132c9d97d267275957'
         'fd2ddeb82017769d6b0cbefc1006b7cc'
         'c02ae0661910f93b201c462ac250216e'
         'b36550597305a551b5b5634c2ccf016d'
         'e84a335930ccb7a90c5cd669df275d79'
         '1023e0ec6d7fe9feb87fe9faa0ed2913'
         'eae04b77100064fd262ba6d8a0ca8deb'
         '5b6ec0c4e74411c08b480c3dd24ab670'
         '710fcb3e6bd93de4319b23fbebd4582d'
         '8b678e8d6eb4426a9b646d1a2c918168'
         'f70f715456f62cf7e59dbcbfa9d34f2f'
         '678e3ca288b98d19af9ad6e6550e812b'
         'c5d50d4d5611fb3274cd8652dfc174f4')
