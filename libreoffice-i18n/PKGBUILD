#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.4.4.2
pkgver=5.4.4
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('cfd6a4f5c2e18f70858b266d260e7dc9'
         'bc29c0e71b6dad13adfd91e15be2c0ce'
         'ceb93c7992054a5df643849280fc1423'
         'ebb157c64dbf22f1d18290a550cf7d64'
         '53d305658bfee23cb7368a48f91f7e4e'
         '961f0e3489590dca7bbf84fb51c4e133'
         '8a16223a7b77882f2c90af58c7b46b46'
         '559bbe471765036519d9ae65c439f20c'
         'f6d55059b8c80651609382865e3ce853'
         'f5a0ebc8b07773aa248b22cf407b5fdf'
         '912968b914cc01d4fa66fb7295b916a7'
         '8a384dcd05eee9ccae0d4dc5d74af52d'
         'b4170e670ca7397822e4558ac3b8be57'
         'd005c8e6b22dae16f1b3350e7c2d8020'
         '5027e7f2cef5f78dfbf3741c74272262'
         'a4cd4ca50f9d1775dbb8b7b1d0bda774'
         '88d0881e3253d4a1ac930d3c8b0a7cdc'
         '3ad92e558f4dc0252b39422fa0c69b64'
         '0d40fd52d98edc94bcb764ceb9ffaf01'
         'ceb7753a0262e87b4ff68ebd81d144a8'
         '57532a3874a1f60cb9c8343cc6f0978c'
         '0848a933923c23f3db9c6646732737e1'
         '12fe3d431fddc34d0264deab1b802da2'
         '184ee1f507f8fe2276695297c46d0333'
         'b682670eed0a3ea06c7da997072bc48d'
         '365f5bce6c8fdfdeb04327ce24e9e10c'
         'add7c134c7b13a16f40c85032013fb2f'
         '58676d6ebd16ea785cc321e2a4bfda2e'
         'efb1c5a8fda20bf9f35f596b7156af39'
         '1cb1bd3c5f07c06f780ede16079b6ac4'
         '95a50ae4c07bdd56f2ef7ff63425d489'
         'eadd8f29f21563a3bbdd688281b67564'
         '008ba4024eff15c359c666655d45536d'
         '7f8dd421698570075793c9cf6dd9c9e7'
         'cb8b6d680c4add397ac0fa246baf4bef'
         'e6bdcc50e40cfdfd4485b27c569d8c79'
         '71342b2b6350942c8ceb06a98bc0dad3'
         '1ff7c9c24d15b069b1c3b5c6be53a5bd'
         'd6daaf894b2f1b0c6e220c50d89f6140'
         '84a6b9a572528e8287ed3061e9917ec4'
         '69e36752acea7f285c476d7174c5ca6f'
         '459f3a00ad49211dbd7f34fc7fb6d8dd'
         'b2f5f2dc2cc1b7bb6a553516fdbe95a0'
         '27c11c3ee16bd4962457853763b17726'
         '584f8e8b0ef78dc44c668d66a6778834'
         '1e53d806e44975d65fcf016ae9218bf9'
         'cd132f431d67e903d2ed8869f4a622c3'
         '31a39874afb8ca0d3505a59a16b190cc'
         'e636a70bbbf20731f8fc0a107676faf1'
         'af25de1ebe3ffa64c208c468bb02d038'
         '41fb33d48ea5e0524026cdd2529fe91e'
         '75ff9e5f477b2bf001c32a29ade230da'
         '1dcdf4f2de790816a3efd4af9323bdc0'
         'a2f0c7670e249bbb29e812b19d62aadc'
         'd1374269ddd381135f88d492c971536a'
         '75128fe76c09573ae8a3a8167081b105'
         '59424dc4b5985f8d25fd41b4a283a5ab'
         'd5e264f5ddf7aad7a3da6076d2273884'
         'eccfb94f348d24b65f341e53475833c3'
         '7d67d010ee1638fd81acc9003bea9f71'
         'a7b85451239ffba37fd096c90bf8b967'
         '2b10532ca30f16ee3ce045fc3e900506'
         'ed4ab41392a1a57f3c7cf8b6fa2ef61f'
         'd271cdc6d0e74dd8172b1c3a1543f59f'
         '0d9a4ca52caf8b3aa223f6a0ff9d9131'
         '2e743a8ad564f8322ea566e430edeafa'
         '68da5df193c1b4342a02f533c7728256'
         '31d5ff96aa88dac4baa419b60dcda6ba'
         '5128380a776587b8626884f0eb9c8079'
         'ba94e54b1d079438dfcfd10d1e75b39d'
         '0c34884e1c4b97015c226ade69581119'
         '6d26dee37d5c328934cf51166143a2f3'
         'ee3dde16d40717520f1e07bec3d3c1a2'
         '7f1cbf65c7bc2a327bbb5f20ffd4d4b6'
         'ebff9447cb2a46554a91480836fd3f1b'
         '66d236ca1d59de485f95f3616ed129aa'
         '7997c14aa3eefb92cbdb76cdd413488d'
         '0092abddde4fc8fed875f2d61df5bda4'
         '8d41fd1821c6ea850bb8c8a09560b501'
         '8778f4a4c84c02c495869cf50d808d40'
         '74a1ac4ea34d43ede817c6504420e642'
         '57dc25683691eb7317fd01ab3f2188f2'
         'bbe54310914d5b06f5e7e22c62699518'
         'a6b140847f0c9421cc3ff9fc43b90cbd'
         '7cdc8d82eba3e16e56271fdc09a980d0'
         '10a40c2a1da17aed69c75ca18b08c590'
         '9be39b38cdcb9d61f04ed7cf154a34e0'
         'bedc13eb48814ef2eb3647398a3ccdf3'
         'c14f4a59c2276d069a00926c17cfc7a3'
         '6c3b7ca887065217f955d4f008649098'
         '05121ea6ff56871bbbbdcd5f150a2776'
         '2d1ad2b4797bbf04cc141ad134acb04f'
         '2926bb80a568bd8cf37f34a1c6db3688'
         'bbeb7e8340d96e43616926bd0da7cf89'
         '63a443100843204a2fe8f8d4b583870f'
         '67772de1e2ff3c1384d77dfc1a222be1'
         '9fa2e0bad2ec319dd86236e9b6b19ff0'
         '6fd50ea6709ab3209d014d8ad6048447'
         'f392e0330c3bd069f242cd5287968a60'
         '0b54e116c247aba4fdc83e24d8d67201'
         'a8a6c152c1f1e27d96c8d66c7467f8e0'
         'ca11c21809d8a9089dfa2d9e633ed7e2'
         '2642235d05f38d989dc5a1c17f3cd6d5'
         '9ee005ff7693fbbd6f7c1a14303fd883'
         'c533dd44806ce55cfa0f0f0b6e577646'
         '1f137e4b7461d4fbd78f37df1478c66d'
         'e127dca814e19165692f987e7dc033c8'
         'ea2676bae2b3e002e35cb97f422c869a'
         '9c8171946d027f614f05fe2380f84d47'
         '85e5ddd0c0a7fdaf4613e323b47f9852'
         '5ba6279918ae9c24f50ee7bd18b8ab02'
         '0805821036ca982d99169fc4b2192cf4'
         '950b9f38f493da455b812489dee6b35e'
         '82b43eb361b2b1eb73945e05b6702bf1'
         'a65d4ce3249d8c518c60225b6b715158'
         '42cf451908159b76be0bc3106bad2b72'
         'fc1febdfdcbbb4a467b50f24e6009168'
         'eebdf661e6893a2c3644f0240bfa1edc'
         'e0ee4b906257f42380c2313b1a31fb8a'
         '435c342aa6c3909c02aa6971b1d6cc2c'
         '8f317212ef38420477cc597a5a8f9ed0'
         '33dd8854f0cb2f7dce446b83027a3e65'
         'b5a7350102f359b734d2c133fe243503'
         '72a6779be250eb7937d5541d1e01f851'
         'f63eebc548587fa067b9aac094e181d3'
         '001c8f07b2fa91abbb8ef7cd78929227'
         'bf56e78215125137228563666dd52eae'
         '401e5711ef349fc869bff93b7a459331'
         '8d11007a174a2b66e2107e42fc9c53db'
         '107c566f1edeee349f341529856f87b8'
         'bec0301af0af1f5dc581fa2e2d90efba'
         '5d363ce6039a79e469cd558b5b98fb23'
         'e574221bf7d7969679745c647c5351ed'
         '5e78bf0fc3c02b6bafd2dc8d8aadad2b'
         '36b3b48045db2c772e2ae8693f4d0eed'
         'a4b1b701e2725c7f331a32621114dcfe'
         '9e7228c35048fc1e99fafc0a9f59333d'
         'ca45999f2a603f7f15e3388f40706cd3'
         'dd78bfad3cd3a94058fa8bfcb5748a6a'
         'b5994b49fd9324aa333ee819b53476a5'
         '433463b0e7d5633a7b6ea2b38c832a76'
         'ffc5b98ce695374554c0a9ece0513bcf'
         '05326102f7e8ca2e2c8b3e9ab49c1707'
         'b456caa33a448c9b115fc8ecf80083cf'
         '354c703e42cee8d80d9cd79504f360a1'
         '5d657aa820b020ae7b05944a20f39dfd'
         '06ba17799ed8d146fbc34b9b7c93f565'
         '1a7def3e343756269500f7891cad30f7'
         '5f27ca3bec847dda82155ea8cfbc5a8b'
         '232b8129db5a211fffbc8c0117f32a76'
         '440cce15d02226fcb0d7326caa3d62b0'
         'db5db88280d3e698e7614e493334a76b'
         '5b0f0b1f9e90f91538a23eb0d0b31b21'
         '9d7d912822bc9ff9bf72e37aa51d813e'
         '0fa1da2f987a3ca0052e9501d2a67c10'
         '9a5b231e7ac0bfdc6d2790aeb76b88e0'
         '72fdf08de7079f9813f461f42151663d'
         '5d0ddfbbccc272399b060cfc7e920347'
         'a1f6b40a4b402388aded551127770e17'
         'cab826d98404609b5d023e3c26f7cb65'
         '46c7b76549c1ec53b8e5ab85b2cfec23'
         '5cf81dfa159a79f7d0946073fdd6a2ea'
         'd668734af4a3062b940fb5ce13692587'
         '64635e9b7e7d29b11014fd56ccc86f33'
         'd0e3d208db904ce46fa5178040d67f20'
         'd847a85138623f725170f9bc054ffa7b'
         'a06c24ca5b41130d41cb7fb831b0f60f'
         'bdc151ad27174fa149a993d1ae70135b'
         'ab04985e1410250b53b88603ce5661e3'
         '40b92b4781494dac0e8eb7c461aa05da'
         'c0f0f853a07f2773f70651d57b670215'
         '20d895af29e0d99644975089e8e96428'
         'e31ddff61d78c8d5ca3e2fe180f83503'
         'ae22a69c7262de0a6da89d76ba00af6f'
         '58ba48a5e6137e9daa4e8c2a9210c824'
         'e31fd33639ea55a0c5797f650fbcfaf4')
