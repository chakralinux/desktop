#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=6.0.3.2
pkgver=6.0.3
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('17c9bb306f0783825de6664915426b5a'
         'aa02e3a4bd97aacc6778358ad6e20c48'
         '5658db95fa7286da977a9da4e91e3a60'
         'e620b8b3f0fa7d6989e360be3fc0e01c'
         'c27b06873cded7684f334e977c16b6f2'
         'b176b07a14e0ac7319268d44991d49bc'
         'f2953e95941cff8e51aaa37a53fafb0b'
         '2d2726c99c580e6e96e95f5130692b8f'
         'ae9c0338434ae4319c3f1b2bbf068239'
         '984563fe26933ad1989ae4b7ad548804'
         '914d27fa806dd96c09e76ff16cd4525f'
         'bae7f0622c0a9a8b907ef89d1971b50f'
         '0409369bacec6da895ac2b249837a9c3'
         '25a880f7a85686e231c30f6a278ca8a4'
         '44cc7d0f13b816512f1c33f39607974b'
         '943f080c871592026bca942113469037'
         '71a91450aa705e662e9cade63f6f2d88'
         'efc5092b02fbbd13ac5aab4f701f4bd4'
         '9f3eae35657409d743532f2f485f45b0'
         '925f6d1d183b1151d3d1dd80d40fc169'
         '22844ad138cb2f3b8a2606b0769e60c4'
         '9072ebc955767721adb91cac3c44d99f'
         'b583999f9f86ece0ca8c0d8b55ca48d9'
         '935d380a40e023fc4e7c6a8b26cabba2'
         'dffe8b14fd744b2579fafd29a0bfdb01'
         '9a25a265b96a45fb8f0209f211666e12'
         'f9dedcf15d08fc121451e5c32ec62b1d'
         '48e5362bbd76b8a62b3a09451b58e2e3'
         '37ede8b763510834b2c68941daa86498'
         '8b86ab7bf78eb3995462f0db1f735d82'
         'f4130cf64bc6684fa2aac9578c61588e'
         '18a7eff05ad442a811d4bc9ca82167bd'
         '2e65c3d7c2f0399f51d3c909a9072c56'
         '850057942f643de5af19b5258e73779b'
         '9561c98c55180f60fb46aac43cccebec'
         '1372418b5ca784f82f040584fdf83d13'
         '6fcb0fe4385f9809ae726c7fc819d038'
         '2767a06561e7fb2c1fb30086e38a4091'
         'd4986e1bdff91f106af460ca4a0477b6'
         '519cbb1a5e572f05d5a8293d6a1e80a4'
         'a2770dcb2ec7a78252a297ebef5bddcb'
         'b736705c157f607c9c32820c6eb26015'
         '9145032f08d066022cb9c71a609888c5'
         '61b06d4f5a83a4b87cfff008760ae9d3'
         '3f14831e57fdc571d1609ac4eea54354'
         '489b3339303c96fcee6692dac322df35'
         '2963056d9f399996e23dc2eb34f1ca0d'
         '9e098c238795fafe345053203e542343'
         '2a1b77b7c0bdbac3cc9af47cf462f413'
         '2b32ec0127ae4593a2cc9b7be4004496'
         '840f08eda67da6de19c5eb39084099c9'
         '323975ae46335abd541e2c0a88bb1ed8'
         '39a5333fb14533971c8dbcda29c9f227'
         'e8be8b89f06c0ffcdeae596fe673f99d'
         '455846eeca05796ff3a355da7bffd8c5'
         'eef2305b6b4b0c4b44e46a040e5d53d4'
         '458c17190a01f061b225c65ed82d9b38'
         '92b63d04fa6eb802a8e578b2b80214fb'
         '7b6cb0075e039e032308b9c7e447ccff'
         'c220c0adc411e860781074e98bdd1710'
         'a4ddc9deb590c4a196b1f0f6ef7a857d'
         '1fb475332386682d75402090365270e0'
         'cd4361c38dd08f2219eb595c28b94044'
         '46dcae12ab5abdf15ef37377455798dc'
         '976b9ba0d019b0ab4302cc4ddbe42d8c'
         'd65f1f8775de6cc37779e2e549f3482a'
         'e14ff5cc919f19a287f7a4373296e36a'
         '2ae5e3ade375d6aa36f99b308aa412dd'
         '96859a7edd0db2107c70a12eddc01699'
         '9c0f4fe450046151a080d02b46bc9b2c'
         'eb2db09d9015b39e75974a9dade19fac'
         '57ccdf6e43ec5b29dba3c580e9df7ba8'
         '5c7e9bd60f0e41fe9ee6bea0cbb5c3a2'
         'bddc38d2af694c12d2d75ae8828a9831'
         '8a6b1f300bf1fcb50c2fbb8d67a140d1'
         '6020cdf979131debbb174748aba4c017'
         '761f32423878a59c321d1fadb88dfeff'
         '9dcdd24de977896600c34a567ec61b7f'
         '8bf2a71ad8acafb30b289a6979d1aff7'
         'cd92a0c06568f3aef2ddb0fd54cec636'
         '3885b43543ebfc9a2e7891de9986ec8a'
         'cbd8d6d2c303ada1141c93e8bf8bc606'
         'cc911192686d7b641229daccf5bc793f'
         '14e52a3c6eaf8153e491cd9fe67d45ac'
         '2305cc678cc3bc3b9fd09311f86a98f4'
         '2a799f6a393d614194a9bd8672532647'
         '4153153cc77c2eb82388831697566729'
         '339d946d16c5bf9df3dda5e85e4e39df'
         '619b83d4c11505a70821c751e1f23308'
         'dcf289b9259ee1769435fc570c453320'
         'bec8c39495b01137309dd24b52b2d75d'
         '93c2e58ee5faf14d8b9560bb912ca056'
         '7de8abf8cd60961fc2639f5d4228fbc0'
         '790e0126e0d75814f38925eea361e636'
         '933c39649d537985f7670bed8c312905'
         '5986c0539890116352af1e8538c226f4'
         '45bb63d9a09a10f5edf6d633a8d8d618'
         '788e37847c3ed4eb1c47d7b13216bc21'
         'd9aeadb27c86147e1f6b4fcc4321c4ae'
         '9784106a4e39364d1ede507477b1d4ec'
         'f73dd30d0fcb005d417e479fb71e4e9b'
         'ebca996233b07113297fc280650f4902'
         '19f6cf82150a29843b47d7489f6f5957'
         'c868e4459c6712bc300b9c7022b56813'
         'e7c95960f0b94de394ea4cd239f429d0'
         '41b051590340c0a34e328145f97a5261'
         '355d175291b0b742df77b650701ac610'
         '17246ca9c11c8779010fa22fe3a4229e'
         '116f4b40008a5a3de544fbd5788502e1'
         '3712f2ab64968e7c53bec46038ac539f'
         '5c935c400fa87cdbb3347cc263f6816f'
         '1d51882a28f412820dfd608cd34650df'
         '88e44e35d8549e83be781ffb7a1359ec'
         '7132b2c3dada3c5495b2651e9df88d0f'
         '9a686b12c5947de4b38bca005a4db3a4'
         '563bd2ff63b523344104af704e9ef3f1'
         '41e92d100c0da27597c4d2005ad62f97'
         '426102290efe6e4bd26fc63635e4c2c0'
         '77de80bf863b37449c0a18e22097020a'
         '4396548e66ec757aad9a6f1485edd026'
         '8e67bc2fba8bdab3668591ac3e448e60'
         'c2c74c85e3f40da507d1ad0c5a34829e'
         'fad9960b9b940be0f3cf5a4116d110eb'
         '9b4e7feb924f085ab6ab9b2f89daa12b'
         '0c7c6b911ef82438a7fede2975c33abd'
         '9f4442e5c446d1e6108ad9f8654fe819'
         'd283066f3c4d630060e43dec436c2926'
         'ce9977e05475075d091931d4c49a2931'
         'e43d0f3d7067f2c76fb4e1d13f1c2beb'
         '8525d44933d99eaa54f22d06ab9822a5'
         '16570110964ebd3964184fc65b48b0a7'
         'c9b8662a85a45ab0e8bdecfb2955bb2b'
         '04232c84a396788198c94120fe2b44bc'
         '19224cd2e55aaf30cbe095fd5666e6b3'
         '90371f9ac19722205843aca4ac4efde8'
         '175c9874a35e8b976660ef126ff55607'
         '89eec75594161ee10790b654b991ca4a'
         '04e5821a2b5ed89932aecceebced02d6'
         '7fcd7709bdaa42a81e1b516b7a45f142'
         '501d7ee41c8110f029f4e0e311c24418'
         '0a3b5f71a5cc9a0caa653952d18031d7'
         '3043bb57a44cd69aadef522c4d90c250'
         '6986813c547976ac543ab4996af08763'
         'f126f545fca84ce7c5ad6f47e769dfdd'
         '4ae2aafbc8c69b628212eeb3a0851c78'
         '8982d4124d1aa2e683e9c32d88d1c7de'
         '0d45370082708cadcfac0faae2a5acb1'
         '88e183f5f0db8d9f4b483f17cb0f8b39'
         '387079b8175bf2ab20ba1727d756f8d2'
         '2f57b703a31af322927f67d049faa768'
         '5cfb5944789f669ed0b6a91b2b6c3c35'
         'f8195d87f75bebe38158e260a1f4f103'
         '8fcbb2d00d3ec594b9a1266e6f0d2a99'
         '8f4e2551982f9f939d5cc5141f90781d'
         'dd542423e31a3f27b82b9c48acbb70d1'
         'b8bb523620dd82981114cb1b7697cbad'
         '2f69a57d588708c877fa8310f0a09358'
         '8dce3f381d1c7a18d9a0329406a69d39'
         'b22a15a9b134b42c98fc6d4f865a7e6b'
         '0f3904cc634f26e739cfbce662b4eb11'
         '46334d834121bca3a51377e829b9da22'
         'a9fd86ca8a6b5f4a387b1574a9f59baf'
         '6c60dc25feb4094b104fb6c3bd498a39'
         '20c231cf4eeb0e9437e69edf60a92263'
         '148f6b9868255355569a9d6320bd2a29'
         '30e4993df1f61eaecc3582c520142485'
         '797add4cd0ab81cc8492c8133a553a5e'
         '7f3617ea3f870af425659406f0bde5b6'
         '9213046d11ece5b7fcbef522ea759b30'
         '15f962b61931280a4b53186f1168027a'
         '4995c46494cb4dc67281f0ea2d9fa320'
         'a73cd5bbb5e8e16e518a4b7f8de7c458'
         'e486eb0073f03ada75256a2217d9ff3f'
         '9f9d3fad47d54a831a0ade368c178a60'
         'fb0b4eca0aeb4178e42ffd611c0dde1d'
         '092b30c5b5df295fd48c8a4da8a8c659')
