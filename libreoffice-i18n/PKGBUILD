#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.2.6.2
pkgver=5.2.6
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('74292b2ea7dde2e207bb570417fea839'
         'ceaf1305e5b573a0f3d1ca6b305d9827'
         '9d3cf8ffef9c01d7305c85ebcf7a3272'
         'bcb39372a933481b9b68501faafe4b60'
         'fdde2887bb23f46660fd3507c137c3dd'
         '674dca9fbb52400030b1c38355aed99a'
         '50d6f4405ac56242fd9e21c0542661a7'
         'ccafc9d14cb36e5333bee55160e0c525'
         '5884606990ec227d273f4a7466e7e1d6'
         '4626a3eeffdbc180e36278acd8218129'
         'ac3142b0ebf6a4dc810a685e27755c59'
         '1add5356d846865a0cd30bfd08e75f6b'
         '31b2992e91b5155bddde44959451d875'
         '0fab94a9791bd581ab5701be20e4771a'
         'c8043734fb309142d089546507eef256'
         'ff29e07a5c60a62761824289f47cf645'
         '1d90d65de698d4f6119982b9284c9e67'
         'b3acb57869c6353b568cb1bd840f6066'
         'b05a60501666823c1ea77642cd5c29bf'
         '680fa68a1f6517c25994d1852b985c0c'
         '3f73fddde3078dfe7e8d7fa33f830bbd'
         '24e03660fe319a5114f52c03032c3492'
         '7bdc07e71532d09ae65d02fe5298430a'
         'f80799cabcaa8d6aa73f986e49de4fb3'
         'c7bb713a169733953f0b1b4f764ca5e3'
         'a82234124444395b0262dd01863bfd89'
         '77ed9b040435809e85052a12edf8085c'
         'b9dc9e6729300827c50137dbc36a26d2'
         '871492b8a31d90f8558241afa1de2588'
         '3b38a0669e275bef11ab5bb720ef6def'
         'fa2c5ca4544d0b44da1d6fa3cd9ac96b'
         '74d2d05da11ce0103051a5a8f56281cb'
         'd00cc27c4ca1a6f9c1d4b8754a282e83'
         '50cf485cfb1d5b279c2553258bea2e9e'
         '7ddb695ba70ff9e1a06c6bbb58b9c3e4'
         '9346d1b0ec4fb63b5b8d561bdd4f2cac'
         'c2afdcd6e1e55467eed94181e43facb8'
         '80cb38470b419bf6804a5fc3888cc61b'
         '8585130054a61f19670aa8a235b05d3d'
         '07e194d67c01f9e7f28961f55f4cf273'
         'fa829e08d9031715660cd74080cec50f'
         'f89519fb771e5da495d940543ee0db07'
         '9f7473c0677dd24340d005df2fc97872'
         'd0f276ebe2fd3488efa70472f3299072'
         'deb58d1060ebf87be1fd408dea54d37a'
         '76b3de31fc1a19f31f7af9a8ec65b814'
         'a3afca9f0a8361598a8a8c2406b0ddc7'
         'dcc792a4bfde343ecf9f1d46778310c1'
         '57e25cbfc2d2bcfaec8a845e060faa80'
         '450140700c3863faad9387c9b3691130'
         '395addbead658537f7d1a7e053b3ef9f'
         'c5daec7de4adcd5e608d26c49e122f57'
         '00e3c826998fbbe3da81ca975aa09ff1'
         '31adeafc112fa251bfb9a908ab867c29'
         'b1fddfa5ba2746d1789ffec86f81af94'
         'd4904d7016fab10d7d9b6c9a156b8108'
         '9811cece0b37a41c0bdcb0806a99bbcc'
         '4935c4c09b39fa652d85deb94b29baa9'
         '2d5b1f5d10f6f65782bbf7474a4f7b18'
         'ae2738c6cee446730410bbe8c14a2814'
         'e682690799fed026b1098be338a5641a'
         '69cd104fc3af79d1da20af2fb173f6d5'
         '9524af7b0a45903dc9634d90d44a7efd'
         '8119efea5314ce429596dc8ec69a611d'
         '47c70ded74bc34bbae7462b40b4d0de7'
         'e7207f9794537e997722665b78292b3d'
         'e66b3fa135609621cb4d8160845f08a5'
         '951a599cd2674f9563ef338b924e215e'
         '63dda16fe2fd4712ea705de5f5f58af9'
         '36475c97d0d6a4a3bdbfd60f1706089e'
         '422196f4b152fd72dc4f7022bd4b1a58'
         '1fa75c94e659fd74b2858184dbd69387'
         'c987f765148e8fff5bc24eda922ad09b'
         '7a8bc0304f15614a17024fe7f3d7e4fb'
         'a84671f5edd5441f316fce63ea2a5b30'
         'e35c026eca332d2dd5d786f2872b064a'
         '4e63c47d66e6258618a1f2746de72923'
         '82e62fb2d6057567e29b42b4fef351ac'
         '1f317c81e22eaca5a4fe2d731d247acb'
         'a24f486f1c506a4ce2ec8c4669f42bbc'
         'f4518b5c71a15575ebfec1b451cb4554'
         '6a8763f4b6704ae989e1f945b9c94eb1'
         '07a0be75803c3a5efe583518975d0186'
         'd69752dbde2dddbc870527b9c5d37421'
         '633708be0f16f42b123233417b95429e'
         'da0980d7e74f4c2367784de612cb76e1'
         '731f33dd92c5c8110fc01c2a15430074'
         '24ccf4949a86f86987452c4c7b5925a1'
         '957365b8948433f534bc3617bae20f8a'
         'c8cbfc3165037beb4bd02b2895d68ae7'
         '200f52414130238945d4b8ed2117a86a'
         'cc5132d7a05dc8708d2d44a88447060a'
         'e1bbeea8650e24a884f0eb74ad8e2a1c'
         '1d0d4af179b1b9ec3301c1ed6e7bb661'
         'c350b511832696ff1e9cb6f61f0a6233'
         'c67f5d61610b1b7a41580917224a0d79'
         '97c0bfb27fc4e0125f88d73ffab10842'
         'aa3e7c9c33c42b79eaa73a6d9aee9f05'
         '3a8781ed0f599a16a5413754e53c4bbd'
         '0c8f5759b3bfa006ca20f415d7a773fe'
         'b6c35d4164b64b7b6d890bce98fee266'
         'f0d89c674279f031fd80b6a04aa4f6ff'
         '76d70cb50b5c31cae8c867e2aa01123d'
         'b4d247652c454bc9841dc399b60bd9db'
         '273b3f70be1e42a0a46270fa318bbf8b'
         '7b3dbc73c7627d18e20ef9f792456ad2'
         '5d62b183e3bc8ced5cc616d3f7863e93'
         '3c309812563865a0793bc957b8693f3f'
         '375f7fb55e5f95380a02d89d0232db16'
         '0acf486c74f9b59349985d5759786b9f'
         '8da91c3cb9acc61302a26757c1ec3990'
         'ab703c6293b21ba04aa66a7a6ccb725c'
         'ff6d6db402a405ccbdeba29615b0a572'
         '6c998a7b1da75da487e4dfd2359df759'
         '30506b3fe6f6bd5cf6149330cf562115'
         '4e0aad9f3a3b553c39bac2f8c808b2fa'
         'fac2dba80e70ed7ce1cc7a9ec1dda41c'
         '6080deda8b1293a108699ff6db6521bf'
         'ca0edaca7ff97a3be5344dea6a1d6d4c'
         'f4b286eda34ad951bb989120394bc0ae'
         'd60fde62f148d0c14086502382de823a'
         'dd018c3256964da5facff6d1ec4bed21'
         'c8567a2c50b79790cb8518428924f2a3'
         'fd88218a2f8c212d3ec1022582d03cac'
         '1ac14231d97a185054972d81c8111b80'
         '2be5d5b0ba104cb9e33a7342877f2e10'
         'c7ffdde30393a290fcd5b48f638b50a5'
         '14efeb79f4aef29a5a48e76de8d268f8'
         'dd360abe33229b2cdb280959dced0e00'
         '85de83b537f903ef915a47ed6255fcdb'
         '301d74f5e0bc5c749c483c24716e1976'
         '29818cb93fc17088652424347f28db41'
         '735c5ae60c617a536687f2a7d20c19c5'
         'e3cfe77a77efd66ef8f76e75c1e2526e'
         'e8fe33215c0acb67e399076fca19b5d5'
         '0ca2969af9657ab98015e94254f56c39'
         '4226eaa8724d15b0f71cccfdc8cdb7a8'
         'fea65444f41da5b4a8aae494e401c077'
         '463f346f08ce6e6d56da24df3bea3496'
         '1d661b537f4cbca568979dc6cedc5239'
         '74f70adb0374a44862de7ffd821abe18'
         '5b47e1f9fbb3ac16ed63fef470d35280'
         '78f99cc8dd1c5006543eb87671a28b33'
         'fe27864eb239e5e5e836d6587f045999'
         '73da4d29ac0a48c36c2dbf585a53f870'
         '0cba068e95a1736679c3418338e12611'
         'dc3c870e0287e8d8c431be0553cd141e'
         '0a79f5fa7d9c8947d6ab60306c88857f'
         '2d06cd9e209a295616c37a39b18f2337'
         'bfe8e0abceb885ccfbce6633e1e79767'
         'ac8e387174e4744da6545fffcbe19ef6'
         '6bd6755cc43ff367755df3d26a717788'
         '4ecbc7d13c233b2dbb6713b8651695b0'
         '1e40beb00454a05e040b87707111e024'
         '5f534808b642d457459cd2b509ad54fd'
         '7eb29d8b78b6c1f13aa65fdabca67894'
         '785a652f2606ffc04664ef26a0043d70'
         '934cd0e7e60a2d9dc48b66ca34c19fff'
         '278de9d2884fef8054e0903fd854056f'
         '4132744705629eaeb58f1ded7fad5600'
         '33c4b934a6069288aa7ffc283b0550c5'
         'e919f79c66c197d26ce51a808cd9bff6'
         '69f214e2c13210aa404e8c0ca648916c'
         '20f8ba5c604ee80dd91854de466ab449'
         '68febdc1038db2bce91437e5743b5750'
         '6678d427f968506c270c37829a194c04'
         'ffd445e47ab6fd774a00861fd00e6cf5'
         'aae0d2543a0945b6faa3dcbe3ae80f02'
         '983d8f1afbba6a6173af8f4a321d293b'
         '892397202e97374a97f537b1173d2fc6'
         'fbbbfeca05758f2c5bdabdb8a2f4639e'
         '311f3e0dc52ef7e00c0152b4b3c37157'
         'ac288caf02ec81a8eb2347318a0f0970')
