#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.3.3.2
pkgver=5.3.3
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('dab171efe6be705142329fdd9f83a604'
         'fcb78571794b75c6e42a1fd1e86cda14'
         '4ddb359858326e02d2ec312f3d4ca2a1'
         '69b66ae8dcdad2dd487aeea919a64b29'
         '5739abb64fb64c97e3d4d98fd70ed553'
         '9c87072ff1861ac6b48ffa901aea9eeb'
         '4ac2867fc30df7a1c046d7a2b03b9ed6'
         '01b1bd0700a18a7dad3d7ead91ece9b7'
         'fe2bff99d49ca789a5e16cacbc4df54e'
         '077d572776d3db1b6351ea247b2e6829'
         '72b6657179832dc3a6dc6e073d5b8fde'
         '5888e87fbfa346a5adee5d3a8e7f73a7'
         'c5adbbde5892118ba1defedea082b7d3'
         '3d22a2bf133464087cc724c27834b02a'
         'e5340b28785ed1a704ad8b844ddd9f17'
         'd6f8a389e66cf68b035fc1d90cccf316'
         'c0f2fcda520ee8a750ac510ebd9371d1'
         '9732cf55ff21c7d32a8259c3ef69afb3'
         '4e355775eef0c49a5602ccf4fd99d6f3'
         '20633aacdab37827448a65bca2b72f0b'
         '7123a1bef5ba786dfd53422b864764be'
         '8206c48f65db38e009753eecd0e89119'
         '2d76f7215a31a0058c754e28f73b5fc8'
         '1b36c570028a4c47283f8ddbc9a429f2'
         'f905caed2f8b22a70689920f59496964'
         '2c25855a64394161b496413e0054f286'
         '8b61e36a93603a98d1697deece783e04'
         '4733219f37912478076e26ad728c4292'
         '2a1afb041b46043ac5b6c046120c1da4'
         'f2d3f3aad1dcccca40f9c4f7dcb89a87'
         '05a0daf8074cf6f9339270d89c455a25'
         'c15d01222156a3b8a77207311c8c52e7'
         '4e855833db3846d5607ab5006a4648b7'
         'e88b8341c08ba4748bf4caedf010785f'
         '20fd245effdf21051f469d9b15da7600'
         'a4f5fe13240555564c674f4167e00357'
         '33e23d7041d97062064b20be581715c2'
         '4919bd5c4e6ec1db47bbc7c79d2f0279'
         'b82bea94e3576402aac9f85b65a685d3'
         '503445fecb60010974181df4b37326ea'
         '79d3adf413992f8b16518a89e3ccdf36'
         '9499ad5c26316ebbfa95a6f429cccd0c'
         'dba06b27e2ef2b5a481fb406819f6d2e'
         '4c08ba6ac8a030bb9449baaa10d9118c'
         'd4c250426eaa7c41fac8f26b925bf56f'
         'baaa0233981907132e272770412fd364'
         '542a7d0346b435bf2cda2248b12561bb'
         '000149f3abe4f1af4c3f18ac6fda63c5'
         'f209d7799b56bc8bb8f184c572a26e22'
         'fa78e9c8d82f017a6ea669cd33727a84'
         'bbd23595e3f4169927be25bcb72d7d95'
         'f1f814ae3dd19379be70b8299247cdb5'
         '194b075164896958bdb96fc4fa0123dd'
         '806db8309911d787a0fc727f540e6865'
         'cc96447941ffd1a639240940eea605fa'
         '6201e6832e038050c8b9db20e1a6aabc'
         '995a0c16632af53668e0af5f27e6a436'
         '319c009ebae4c49504c3088f1f2f025f'
         '63e94628f58937c2b5fef6498969557e'
         '822a9fa881941297572c41e2154db3d8'
         '7bad8a325b88e8d37b5e71e2af3e5a6a'
         'd3e927a8968249bc9883ebe067720b2c'
         'fdc339e75c3c00dcfa05732a69f7ef9e'
         'fedecc7261410f214556e57c80c32eab'
         '5d5797e623467f189c9a8b710fde0a58'
         '98fe48c4926a15713e6a6d810c465d83'
         '41032e165c78cedb77cf1c3a6ae937dd'
         '7cd6a58fbb2095639707c1301b6e3f67'
         '0c9a62cfd405743965dde38a869b47aa'
         '6db2f2365831a6b264d796a598bc270a'
         '923f7c761a41f744b399bdd2d95f786d'
         '1b0988ba9d20cc0bf5093ad5d4c1cda4'
         '0f32c96fa88fba4e90ffdc30a9894249'
         '9ae54ef9456186b793b29b582a7c3c56'
         '00b839d710ffee3873be63c76d8d5521'
         '9a935bd0285edbfa092f7d65683b0c7e'
         '3ccfe1cbf26ac06922d69a2feebd1c30'
         '48d66a686e579f7a05803707a2838795'
         'f74836db34b592e8432165be2cc5478b'
         'e396271b9c2d486c02c4cdc3de988b54'
         '1f8f68f3d50124ccf5b1b717220c6f90'
         'de4449edaa9c8fd6bca5145a5fd1dfe0'
         '0a430e18c03f04713a3ba5c0c5914a8a'
         'b6f4aaa60dfdbc3627a68a0a5bacb0e6'
         '8f0fa0970f19a5adda6d7aaece9b2f10'
         '5e49138c1144d046cdee9b87e8467229'
         '4f5432d73c87841b6b39f79300db11a6'
         '8b2a97fcd0b5f7b1f72eb12f85b6310e'
         '13493de2432fd1605cc36b4f1ab57e8c'
         'f2afde8297bf64730b6afe31f2411c52'
         'cd3d7dd9db20d807b6ce2fd73921d4b1'
         '865204816074d5350cc93ecc1c7d33d9'
         'e2dbcdd074add9ee5037745e17d30ed5'
         'd18292329856b85a3f2f47e8061f62c6'
         '3aed42b0d19c19e51323c69508d5568f'
         '955179fbdf30d5c9b4b946e7d994fdf1'
         '47250bf5f71205ddbd1c16c689999ab8'
         '88c15c8e37ae9be82c566a20f588c65d'
         '03092bdfb6b1e62d10b00b82a61d01a8'
         '9f8a2a713d794cd1e3fdec344ad41a95'
         '83df81b950f14506af10fa3eb5a7628a'
         '55a81cd60018282942b8958b21263c7a'
         'dfda342844947f4ce47e23d69f2c77fa'
         '3d83126a690be84c02058c89b53fef12'
         '2970df8cd1b4932a242f4f17939088b7'
         '1e1b1fc9012b077da15add7751dd5361'
         '60e316b0ba35509da8f4b49a08d411a1'
         '9beb430fb92609ab5463f57e9cddf19d'
         '4fd7700dd24a85792c8e7812f3fe7691'
         '07732b484d737a2eaa0bf39560f74f3b'
         '72d0b84f79d84601d3452e05d5c9c8c6'
         'bef31faa5d2c45a467bd354b06bb53b2'
         '62153c4c60ee12d1e3c62cd35aede79c'
         'cf310902cc2949fbf496c12001b9fbcd'
         '6b77da234e103a1cafa36fd53b0e6ef8'
         '4d5f4d564ffc1ab168b4855abd31f85a'
         '17e62750a43e1dfb4d1f33f366ecfe85'
         '43f8d1138d9574b61d008b1d6e0dd857'
         '5f24e787330bc6d1c33c0488ecf4219b'
         'bb646894c8de0b9d25c9e839beea8b7c'
         '67af9ad7874902c3ce2d679177d7f5df'
         '55978f0a64e35bc86fe9b13e019313c2'
         '8c993cd6d759366186e4a2b4266dd1a3'
         '0a42d4f1cbf0c64afaf427f7550e2fd6'
         '3ab0609b2b54bd3135e43f78549540fc'
         '8e9c17a988af995bdab81099cfd8ad92'
         '4363d4c5eb09ea3ba0637a2cc5d36b6d'
         'd67af46d200d6bc7f9c671d63c1df35b'
         'a23a6eb5b4f98d0d515c099f6d00ac71'
         '1475f58ad6695052441cb98eb978a2ef'
         'a9279eeca1f6ba44fba85269de5f35c7'
         '475cda5ac8fb972de8a69c464798939f'
         '8a62e362db56b87415204eadf2fec6eb'
         '63873983316d962f2617bc2dafb516aa'
         'b06ad9d216dd2e19558a27905ada80e3'
         'cc0515381310d1789a2da86c15055900'
         '646549177f57fbb19b04a59917ad0d52'
         '2af081103c6afcdb311adad412e8488b'
         '08a22d45d76eb7b051cecec34023a856'
         '56faca2a717dcea16ffc2314757d24d0'
         '26e17d3fd7ec21caf3c4d853b87e32ab'
         '11ba7f41dda43c1c517d5bcfda0d6a78'
         'a77a62b61a105e0a4e96cabd70338299'
         '610a93d549be7b7489ff3de4840493f1'
         'ac6a119e1336b2f8d084aae4839f333c'
         '7b1515129b26d4957a34467a5e96cae5'
         'a20ef8a1d9df905e1ae16e65c64810bf'
         'c1c80442cbb9cbdbfc640d3561f6852f'
         'b0aa024f98f9a2cfdde65de50d0c9975'
         '8953844347bf7e88d2aabb6ac6375157'
         '4b1e3e3c215811c62b10856337d231f6'
         '64ae13b70948ea9f8fd58aeb8cf2206c'
         '9fd0ecb7e6a12509a96ccebe55116fbb'
         '11eda6fad37c0c4e1a6047e7a0e56f8b'
         'b416713ea204379189c9a76851e8ef25'
         '08a4cb00b683ac2df47745012bc5cd51'
         '5c6d69b129f19c925ed0b337f6c0a715'
         '9b577efeec553de5aec54c5d5fa0c107'
         '7e9dd1d127bed5f5b4f4d272069e3990'
         'e8c5073f6066386e0259b849ef25f168'
         'c2695ffe12784f33e36eaadadd3ee388'
         'b7202ff49db0d45ff3c46bebdbdf1cb6'
         'dd73eb59011292ce8039a0f62551b782'
         'ee1cf8c81569aac366de757fe7921236'
         'a917cbe5eec1f2edba5aabadc3df9492'
         '07dae5ed4cfe49bdfc3b2233d4a0b73b'
         '42e84511d7bb8f444e527e35e61a3993'
         '40d55be2b50ea1817b92263e9085d672'
         '0675673c1fe889a5bf43a85347d304f8'
         '2ae5948a27d7f6927fd826e589474abd'
         '52f62888bfd28e952ce5745421d663ce'
         '8eb02b1e5bc43aa8e796f504705277d6'
         '2dc8f256cf1a1d9c8915ce543c1a912c')
