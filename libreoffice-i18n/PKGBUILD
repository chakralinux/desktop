#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=6.0.1.1
pkgver=6.0.1
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('4035f62e087ecf24d708d339aff72513'
         'ee76e542fb19ff3d3d9572293fe1e789'
         '086612ae0368322e79f22ee0813e57a3'
         'cd5833d844aa9988fc49c60e18ed1fd2'
         '59c93c8cace6a63b33e2c351bd57f094'
         '730560198a9adfd9c1f97700a1f7d4ab'
         'cfc5ebbcc14381ba09d61049994171da'
         '042ca48adad47b65616c0f4cceffd4a6'
         '81ed306d08fe411935b46cfcf6f891f9'
         '7051c436227401dbe9b06d3474be3c31'
         '933fcc3dd75cd995e903f71e59355a6d'
         'c809400516005d9ef4446d16ffa9cc17'
         'd9955474588dbe3cd1b83f120cafcd0e'
         '7007bca5ef0c1e9ec21591d946c0ee6e'
         'f0acfb4831afd9f860a3276293bcd917'
         '7cde4b7c39f7da75fc980a9c70a48e08'
         '370436ed42ebee0838da84142e9bcc3a'
         'b62c750dfd649c8c89d8451903e6b73a'
         '332e0bb59eb1b0adb3814685e022fddb'
         '8f68799199c18f04d64d6b58ded6b043'
         '4df908b3a6012fb2a0eb2b661cb63cbe'
         'cb2b4b31f476d053fe5270337f0dd687'
         'bbe87910cf9b776f490212f4125a86ad'
         '89f019e6b89cb7977f2bc4d9d4afe299'
         'd8d6e01bce0dea518c5b387304d819be'
         'f7bf64ea44e8586d02cde6556c383996'
         '9535121c62097ce228fac343bd80d65e'
         'c2092640bdf69ebc94db7d42ab853c0a'
         'c6941aee2b9804bf92dd3dd5bab4a4c9'
         'a0038d9de690e0f0718e2a8d9c701a1e'
         'bf0610aac1b4e0f00dc37fdfed1ed7f8'
         'b2bf651334ae70aaab155b6a98edfadc'
         '6158b26fa6989c6422d3a9f3657ac06c'
         '5bbd9a53c962ffcc63ceb076dabe9338'
         '6362ee8ece13dc862685be47312507bd'
         '31b915415ce3fb04f270742b222391c6'
         'eee5c2fb5e8965799781f8810ce82811'
         'e5e87b6bc305db31d3cc28e9e4311997'
         '7f1be9737afc82fe05a6862bdf3d1050'
         'eec44dec4b524e035bb274be16d4e86e'
         '4290ec3d1d04cb9060123ab27e236af0'
         '1898eaa59948c50534e706c63a3dbb45'
         '943701458e1de19c335391d771659c98'
         '3802634b7a7c31c1787fa7876cb0e825'
         'dbcc9a8f855101df5706496a78c0f04b'
         '56884282fc17b2fd244374dc6b35bd16'
         '0b0716051cd0d3ff60fb303269c524c9'
         '6f58b08c596781c4480ac7e9677a602c'
         '10e9696994ea34f4f5dff76ff7f3239c'
         '7ed4d770b10c5516d980e575889713b2'
         'd3c3ae48b80d2f06fce703b140631946'
         'e1dcb03f2b92e2e86c8521ba76d3d396'
         'fe10d178aed2ec929661ac897bb6c495'
         '610d4c7fd6ad6e7fce0945e4fe8b24c2'
         'e64b18a2dae95bb3d1ecfdc9e7ac81bb'
         '1592bcc510edde6a467f53fed91b7e27'
         'c232dd2a89cff37c8147b42e4c903e94'
         'eec333985d476b6302b0b43c99d9b352'
         '7b6452aad3750edf4431a5013c75709a'
         'a4074dfbc4fbf2e931775cd15d22974e'
         '50feb899e6de4906b88bbedf4de7d96d'
         '6820abbc6744e6dd5f4119f781f682f0'
         'f89f1c0b0c1ff3f85c8844d99d16193e'
         '1e1c2e28fbdfe2b2dac8a95b94c8d7fd'
         'c36e5641794b9bec3d8b649aac4ea60c'
         '5fc6d475df2b1748c9ec29e21b7836d0'
         '964e6a1fce5610be774b3be6bf7bffb2'
         '767de01e1270cae63728b52536c2d2cb'
         '994282cef0d45a7bb87d595ee43eea7a'
         'af5317598c0ab8aa2c44ec4b046a5e32'
         '889dce5a41c9ac148f23cc7d0b96baad'
         'd7814b65df1215cbeb6d1ca07e4d188a'
         'c8948d8ca9b32d6e0eac6ffed278864d'
         'cde076608b957100d0bc71d4bc99378a'
         'b9e2355f8988c6e7e8ced1335921b8ce'
         '178e8330072c119fb759c3bf26af09b7'
         'b9629f80412f88c795e2543bcc3f06b4'
         '329aacfeaf7e00549f7834d529e26287'
         'a22406464d69bb0bacc0a99fefb363f4'
         '64c5ac758e9404e2b22a42dafcd56a32'
         '0e13aac2fa5865c42f3ff5a7628c47f5'
         'b274c93a146f3b6ab179b012826ef0ab'
         '5df1a9da12ae23997677e800ba617dd4'
         '0cf5e2d1d354e618bf6e2a391c38b546'
         'a5717b679f87dbffd8b41982b3f0cbc1'
         '27dac24f3d1bc78d7f51da4aa588c5bf'
         'e1cbe3b1cde2e474ab6033427b3e9d27'
         'c20510d188332727c39315bd2e7f5caf'
         '6f2c8db32230bb389529daa4bdff518b'
         '7b5d614a8dc7f76bdee5e25af7097a95'
         '6df8046ffefc337ffc1a2a70f98686a3'
         'd60395993903f645f3c73b1a2bcad461'
         'ca594f16b10efdd834849f45b19d69f2'
         '555b0c73bc0f8dac9ba86adbb89336f8'
         'bb6ee2866d93cc1027c118c711af1b4e'
         '40c28e0af7347098292fa2c16a24ac96'
         'fde030b417a37392d55219f81b9d3ad2'
         'fef7aa5874ed89c641116226f9e9f4e0'
         'a5ae8d520a0601cdb802c9077bc34d89'
         '998360fd60df99cd883770389f7ee7e4'
         '5050387dc942c0a63ce4e5e3c006c525'
         '2893bc996decbe6c23e8d93fb51fe117'
         '3faff3a3a856f97fcfc6cc023ecdd4f0'
         '79e32659d1c55131dde54b74ffadb0de'
         '1cce7e9195549ebc68c74f7cda20078a'
         'fa92181f04aec6942765dc52151a9f50'
         '27e99fd787b93d7bfe7f4da703dcaf44'
         '7e01689f06b569f6010c58ede4460272'
         '1cf4dee75bdf4f9d1a088bddb24c6400'
         '6a2f47327b8fab3dd423a7f4e40091b2'
         'df200acd187e5103f358426a7df74a71'
         'c2cca10ecebc31ea1c6d5b8121494a3b'
         '8b5073a9291e8bece5edf1ea874bb074'
         'd7b2f54b5b19afeb167af40719200377'
         '9066d33ed1426cb46fb53c32852fb06a'
         'e3020a3ef43a066e2b2d0eabfe07da59'
         '92b5eae53b3e633487a4861c2fc374c4'
         'ff69933c88d2b67a457389816f532397'
         '6c697ee1ac47b9718f5c84f959856c89'
         '5a484c6aeb5447fd2103b7aff15017e1'
         'ab1a6e633dbc212c444cfca4610522d3'
         '6fd70dc44290126cadcf5270259bcea9'
         '864fd1b1ac9b8d387fe1a40dc4fcd994'
         '651a121b0a0b02920a0c813c9967128a'
         '009964753a39c986d0ce1d780b7735b4'
         '963a8aac2dfee6ac7d1cc61abbbb2f41'
         '920d1d2ae9367c1d16cf282ffd758f2b'
         '624b14522c5f5e420f2c82a8d1061cb1'
         'b7c80d3fe9f56340d7ab47ca532d7fe1'
         '8053e0ac754ddfdeaa43a965dcede12b'
         '6cb75d959d76b2a5545a34d6f123b488'
         '7f3ac12d1a5eb93e07fa5a8e77706c79'
         '3fe404479f707a01c49064445f4151f1'
         'b15793e8cbac0556f2b6e7043692fea8'
         'e4e6e6cb8db8287b97c8223730ee100c'
         '3c6d0dc773a39ff415cd0cf09273a297'
         'ef94b9325339ede69014aa48be01db55'
         'b77c02a922adef91bf10eb5d634e28f1'
         '4782a4372859887e4cfda946a7ea43df'
         '7d22800d52753fc91b80638357f0ed44'
         '800ce9bb09631e6b30d94ad265c6eb37'
         'a0e2178956f885fca169742b165a5e52'
         'a0d9a284cb3d3eca8917b2eef1548c7d'
         '743f170d738ade6135b71c8e2ce32ed0'
         '8d429546994c4b09e2756d42d1c26555'
         '9267f731928ee874be66d671d0f91605'
         'f2704443f62c098b88b517f206f859cf'
         'ebe1b4db671c934377af0ba802932a4c'
         '0d4f22eec1e87067c5605119cadc23e2'
         '5262fd568734d44b9954c334deda20bd'
         'a7d252211b3557f26aec78f39808b427'
         '86c3fa89c0d4ad3a8af346e91be2b06b'
         '87cf7d0f69e210980b79c45eb46f22b8'
         'cd479188419d845058d5ed115551f78e'
         'ac4c26223aa7fda2c9fb0f17cabe6de8'
         '3f433ddeb7e84ac1ef90fb7d91f589c6'
         'b0efcb8ede3228b25f73a8a145730e68'
         '8b8723a9f1f1e6e55785c8e0de463396'
         'c725655d19433ddb64bd90ac192f603c'
         'b08e37ae16b068326d2a45d658f37790'
         '0e8ce1661ec21d12ecbbc7f758d9b616'
         '82954599eeb0b23d566aeace8d4e61dc'
         '8ced6dc74450338c24ee14bf1f282613'
         'a0e5aa426cea929db7ce3e10b134515b'
         'c9eb37beac89531753185b9424f05b00'
         '056515f78c3e4ed375b55cf1fec1ee17'
         '31c44f449a0457da7991d4809567fb95'
         '040c0c55ae2e3c774fd9dda5a390d506'
         '44971a6dda300da4229da1743ad83116'
         '2dfa71fde27091bd54d51579ca99e167'
         '20c62dbef191d74ebf5ac220a9f8a644'
         '95855ddd7b51e21b018f26f22dbe1f61'
         '4acd5f58148ae5a632303a880de332ca'
         '2900f894e520a21b75f2724feef0b327'
         '7eaedc7dfe3279e2f7911e51967177f9'
         '39042ace9ae62e3f8cf2c3e6f54209b6')
