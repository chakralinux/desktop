#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.3.6.1
pkgver=5.3.6
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('f2f9bed54b9d3be1c1218511c914ee8c'
         '7a791192344c1bd89201fb153b3fd9b7'
         '9add768df835c97d62162a7b324f2dc8'
         '6120e8b734aac477a2d4ed98941c5310'
         'e426ddcc8d6582e4cf50e614e8845382'
         '50b831b201cef10e547c1570d758b44d'
         'e579a814948b91d328d66efb791b2fc8'
         '8b6723e791061903fbecfd83dcf56e83'
         '7cfda9bdf379289b3f7db86965b090ca'
         '0fbc61a2a918ef3233b4cc14e30c66f7'
         '85a26a205baa9439c275821becf11451'
         '3088c8713173b3b0bd2b29e1bb4b389a'
         'b2b93098818260628807358d4114dfd2'
         'bf56f60d98aa4c74ec73c25dabc6eb81'
         '58d288510762f55d81fec7b579920410'
         'bee32c2d26885bee83105bb4b6088795'
         'be7052c4c20510a259946955208ad31d'
         '62493d22f3500efe7bce79fe567687b7'
         'fe3692df6c5c540ced878be8d9dc919e'
         '5c3709994df1ff838eb29d1c3470c703'
         '117f18ac7d87df90ab43977b46032b96'
         'ba0bef0689886e1e3f2c545eccd33fa7'
         '18a50e1baeba1822e298f0ee8e9cdab9'
         '6b0ea1082887fd6c335bf23e97d2590f'
         '7c69869dfbb89eab67158260a2091cab'
         'd7de9cc44b782e8136553e24545f6644'
         '065e6556ed20fbe3d5615aee975a6bae'
         '3017571a6667635fd88837cd14f3d6bd'
         '0269727f8c4cd9fbd61b3063edf96dc2'
         'c2a3782af8b1da3a059130d22ff8c79e'
         'b237cf96fe6e9d78c06df358205b3c4b'
         '9f5c729baad230bb7dd2f1d86820c119'
         'd1a25f192375f05bd0b4f4998e036341'
         '2988075036e7930f50e0c71844484158'
         '847f9b29edf2ba60c8f13e3fae6811f9'
         'b60d7dab778db6a0538224ce208ed03f'
         'df371bbaef8b42921bd5e2183163a71b'
         'c22287c4acf9de2a70a520db6cfec7a6'
         '15a00e41ffebc08a97d38092037c7e8e'
         '36662ea925dc9ef1416abf8f3665200f'
         'e9bf0f2584b168ab9e1ccd007ec13804'
         '25f35e7e3fcc2ae24356461fd4f2eb2d'
         'f035c3b77f437c9ebdf00920fff29d01'
         'cf75b87f75435a8e0d25f9fa95100a7b'
         '9a5a789e8d676116a566100caf591d8b'
         'd3e9a8333efeb3eebbbb9c88c46bc042'
         'aa66868892488e002bd6c727b5a1047e'
         'c7f5d19c4d5d50f96ae25a0315372e30'
         'e1f2fd36f9ffd871714131cb43e1456f'
         'd7d69ac75daf1e282d671452b51e3b0e'
         'ba6eb1544c1db0313491ed97e1db907c'
         '7d2a8f281c998eb83da207dcc9b24113'
         '4b162f8d0c67be36ca2e8c2ee34db85a'
         '2fe017d9713fc0be8f4b252b6bc27649'
         'd61cb590e1bc089b44d752136af6520a'
         '4f9c5e339799981a2a9028ef873ddb4a'
         'a7f8cd380b42dcc86f25662b737a976d'
         '7b68ff6bdf1c71fecbdbf6babe5489f5'
         '21c5b74333fac7ba199ebcf37a9cd53e'
         '22305afd2f1279676551bbe7f1e64a37'
         '281b7af396170fbb0197568dfd54e9e6'
         'd23c23936121fa1fb6c5abca8a8e5557'
         '81150be73a80366bba58e1da451a1e01'
         'c0f89185553080f562cd9fbc7a610632'
         '8d1e1523ff05958274e4692ae54d0a50'
         '7ce1308447d2f93d65ca741d31f26f0f'
         '6aa7e03c4d0cae7c1223388311a87b65'
         '7c532184161373db61b213eec1432a7c'
         '78c1306e7eb4a1c5e3b71591ab2f5f1a'
         '1c09d983cd1193044490d95b72c0e3ad'
         'a4bde91b7ff486518e7ef9530b524605'
         '0f9a2e55c48af8170d0bd6d8b87a0115'
         '7322baafcd0d9d75a4ef9bb5a89db9fb'
         '492528f29e0e9de57bddc3516c417437'
         'f9d7389691b2cab3c27b70746fccf717'
         '6e30f653b2fc7e847c3e7d8736d1fae5'
         '3677f9d9baf2e16a3e08356518a8c038'
         '25b1c3d9f93b7bbe286ee919a8af2446'
         'eccd5439a73ddf9abbac32864f766fbd'
         '69a2739f3a91129c69bc4c101521bf92'
         'd36cfe70b7a3c0d65f18b2bf600f3177'
         '5bf061fc924bf17630acc1de514250d7'
         '01ad643081e26ce116ab133edabfd185'
         '60ee2c4c97e7712f95e575ad352fac6e'
         '8d4a3254767ff2271491f54828e6e730'
         '9287272fac3f2fb2964d203e50dbbfbb'
         '64a75873768879eef749bac48ed58a7b'
         'd55374f36f9a07044dfe52774e333409'
         'a7bbac62cb5b6ce56700657a2091b3e2'
         '6b5e02abc242640052029ffd729d624a'
         '2486bbe192b1db3642936fa346d8c28c'
         '33efe201c42681bc5f2e07ede4c945a7'
         '1d6b344734aab38eb12d50ae2d763082'
         'a5cdc146c983a57be3f4dba283be3b5c'
         'b346faa9a0f71372af936cddb3eae994'
         '96d04a74c084332892c48b2a70930579'
         'cb7989689b5aa37b577997ce7cb62540'
         'be65a7ab18aaf1b0332e14a1105dcf09'
         '0b011a1b008de81ca3854ff8f9eb63ad'
         'cc56f9e899f858f0503bd470bedc7686'
         'a220ad2a1bee988e0fb7babb19d58655'
         '4d020d6a3f2679738047523473cbd400'
         'd9d7cae2391b20113b0be54e47d3041f'
         'bd88d75a1302f17ec414ec3afe2f0ae7'
         'db45f3b621320575bdcbe145d1d2c370'
         '6cc419d25a178708646014d73a713b00'
         'f07da9a9eff805b064403f571b4135dd'
         '911db5e31aa99814777a9e16f1cb3456'
         'e50af496f919e46e9e8b2a6d095a685e'
         'b16f6d78cc97a07029b649d8a0fcf020'
         '2cc96a943df796ae71bbf1842c77fdc1'
         'aa141fb816a39de2c41a24b8549d84d6'
         '36ec718889c7d7507879f9ba6a496f2f'
         '52135017160a6d66ccaa3dbcc5818bed'
         '9f3446281de3d63fe273d7dcfa9ea80e'
         '511163b27ad87ad04235152f6939be86'
         'e300cc2f250064c0fc3d7d911a2cad23'
         '9f4d2e85c731f236b54838931adf7040'
         '4a4f1bb3d705f4f9884f69ae3de60a5a'
         'a3396993bc11cafda387afcbba23041d'
         'cdd084e4c559122c27ffd9fa364c39ae'
         '27bff3def759dcaa160ca0a7e486ca99'
         '7d105d4571715284e5506b78b27d7c02'
         'b78e6cd6276596f9dcb3aa841aa19ce4'
         'ce326208d3dee6f540cba3a2bf23eea3'
         'c9e27e94e193b899dd0e1569a3bd30be'
         'ab0088e9066f7648613bb27f692bda7a'
         'f13f1dc7efe4d5695fae7f1ab30628c4'
         'bedb0de3f81e5a4e732caeac918c963c'
         '2aca9ef4ce8b975b7e54ae9dc308fce1'
         '1e9af1f21287128cb5449cc7dc8e7f76'
         '1f00eee658c8ec711206de43939fcae7'
         '7bf53db2c7a254da70877d49de093472'
         '01787deb9ff44912f1ff00d47dc00788'
         '466d00b794bdec6cf31cd7292cb2645c'
         '4ef48330c1c7e1d6315c4a88622197d6'
         'fe87c5bfaf965a6675b75a41dce52d16'
         'aeb8cc27f8fab30d40c5043eb4108bcd'
         '0d7ab25dc9a403111dac7bf1ec02bacc'
         'b3b224da530775b37517abd68c47b608'
         '8c090637719d6dd7ab91dd99fd07168d'
         'd027c2bed054945d99fa9383feafdc2b'
         'dc1536673d4108baf2a7ad97f87d57b0'
         '259e6ead17d5e2f1b757c95eca4ee365'
         '57098f9eae86c88ac3e3d1ff087dc514'
         'ad62254f2b2c2416541047329ca53ed9'
         '005f6d50f7392dcfbf15932623be8c79'
         '6a304ff5b0ab51e17ce7bec7d23e6b5f'
         '7eed7919ca020810f8a49514d2907dc7'
         '0f7c1f26f581987e7f9bb0fd70283e8b'
         'e0274ef1216ccc65086503fee7e88377'
         'c8f41e264df384825077f646a3ed6d3c'
         '3b25f24c65794114e967b8791c408622'
         '68d685669ffc18fa15ed98240f065f92'
         '187dde131028707557fdcac4153f4714'
         '5ffcdf7ce345cc91d2d646110dcad883'
         '78b8a14c0fa9a1c569b61150afe18bb4'
         '588610bfd158940656098feafea5d68f'
         'c22d38e316047aa05a1101303bd1eb34'
         'cce1595851456665e37dc5616e1c3546'
         '67f36d82d222f848196f7cbd6e05eab4'
         '8588aba22b29ebce1b262b32dcc772bc'
         'ae45dc8aadd5cf80ab88efcaf6af41d1'
         '9bf7c79f709eb50386e7473cf896440e'
         '62fae0257e733d10152464e7270f4c2d'
         '6974dfda3fe5a5a57c4bfafd835169c5'
         'f8570bdb774832044518386a2363329c'
         'c31845b71b1dbe88ccad97a220fd18cf'
         '520d4ee77f0a5f190efb252c87e470aa'
         '618fd441f5be897e0767d452f6bfaae5'
         '7f7cb5ee28f0fa9f727649caed713dd0'
         '7ee929fa9a19a19c4cdd7631d7625fb3'
         'e904d11d1bbbbe32fb1844d51f45f942')
