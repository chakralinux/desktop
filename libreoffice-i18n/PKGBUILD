#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.2.5.1
pkgver=5.2.5
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('5ccbefd6f18f5e098d3d91e4eaf5e468'
         '0fbc5e66c9f15ebd89fc586d56640101'
         'a9274fc80768e39e0a3c7e6a13dfd67f'
         'b962153912a6b1e4798685febc2d967f'
         'f9a65953ccfa5d053d52e9573c716365'
         'dcb1416eef075c5c230493416dc9af04'
         '7d020a3e0aa06ca7a15a78a3569d2465'
         '60290dd0f6aef7cdcd62df0d6a240e97'
         '77af18d0e3337f393c521706ebe1d5da'
         'a2332bf66f5ddd01a6201ae7acfb8802'
         '6f693d472af48a436e6252a0209b5ddc'
         '6dfefad36cd31638e3292dea10663de2'
         'c47c0e4eb45ffcc645a3bd9415b76b0f'
         '46cdf8991dd7b6f46795c120a52629a1'
         'e4800f28035211706729a477eebda303'
         'd8f972c3c9cc80ef31f24875b978b253'
         '2a10f30b00064b3deb5095844d73651f'
         'd0fcb1a3d4203bb282b512557ac3bd5a'
         '9ee6ee5277be0b3671d487d508d40646'
         '9d6134c702e1a0dd7955ff128dfd3977'
         '44cc0496f4d351c2084ba451f86eded7'
         '2cabbc9edaf0cf6c51684df2b93d00c2'
         '364f26b659f1065aa129da7021ba8a13'
         '924a3b93e3d81b018fb1631bc2b1b279'
         '8b4286287df5a97f09836fa36f06e815'
         '2cd49790348664000bc4bb88e2bb2013'
         'e32cfdb586b48aadc99804718dd584d8'
         'd01e66dc645f1c66014a14067125d90a'
         'ce97f3917a0a2e5507f2499b93b7deae'
         '1a3e2a03ceb4f22a761895aa1c96976f'
         'b5937b79ba69943942454f0857a6d36b'
         'db6e9498bc715cd6e49d3a6cbea48253'
         '268bf83bf2c64d3cdedf34b362e4aea9'
         '8b669ce660489c826b8b73ca858d0f34'
         '5c27b41098d10fd315678e2e5f9aa565'
         '05bd1a6d72572536cd368de6929cc461'
         'bf4db945c50ee02e98bb2e16ddd80611'
         '03cc232d8f0f8e4d36afa44b47bd585a'
         'c4179cd93b1b645e489d21f76827f6e0'
         '390123eb46495eab2a13dbb418b85d32'
         '283618bed738fe2b148f81507fc36a4f'
         '9be847f20f541d8c77bc1b202a1de9a9'
         '4af19e28f1eed62c1958e4d81fe1ba6a'
         'c407a778d006eb5c8eaeb755b24f823d'
         '4a86eea50a088618a4449c102d290b94'
         'c2126cff6a95eb93d794032dceef0061'
         'bfd15a07e72609eb32a81b0b82093d93'
         'edc7cb4c9227770576c36106dd5bf735'
         'cb3379123a87e630d53853ef48f9fe0e'
         '13811172cfbcb0988e76eadc48a2e9ee'
         '215eb364ff895c4773b1ba0144cb2cd2'
         '6830b5461b781ca3c4862e5b5175e9aa'
         '4f1afd91e76d5c6ad22909970f1c34ee'
         '95a2bdf1b0a69f5f96f6bf1406c9d80b'
         'c6bf8f0035dd078f206fd8d784063daa'
         '87a433261f54838c957ce7cda74a3313'
         '989eb740fe4ceff6d707624ce74c4af1'
         'd7a0d0f1f36d71249cc3c9939d443874'
         '581fd4dcf4d404455162e87222a0d4c1'
         '5ced18cc72576614b545ca4f3672bc65'
         '35903f60eeb1cd264dfda93e6d4656ef'
         '137b2f478794de52d6f2a2e612f017f8'
         'ec62e960611d864e625595929e6f092b'
         '3d41f4375406f6f20cdbc5a5230eccb7'
         '1af67ccfd98ffe87a4c3f083a6935d23'
         'a5c8f31c49a83c9686b626e892bfc317'
         'e04d8a7497706ad82855543d6916dafd'
         'cd1a47f3df29d3c873361641b7ac8afb'
         '9ec35742f7a160cb53a1e1e2107adf5a'
         '15d13fe12318d1f97f7f75581fbe2a57'
         'cb9a3621b7d52d36902abf6f687082a4'
         '98a5091cf6feaa87792a074efb5c0e54'
         '9844c647919ff1e7773b3f10d0a8d9c1'
         'de6ebddf6d9ca53baab8e31471f3dced'
         '69770ddf41cd7468a6c8b9c469d90178'
         '613f709ac4dba2175c2fa25711a8f307'
         'a0ba87e77dc6c6b3f85ecc5b281be820'
         '0a3753790a479ed7942825d61195d66a'
         '6e351fa454f205a0b9abc9fcef3154d7'
         '4d1d315b7b84fd32584166dc65c7b19b'
         '98ff996e1b15c944da5b736e161dac32'
         '6f785d0c9d22758f8a1b53136c22c40c'
         '9c263da2a8ead0092e398b1891ac89ff'
         '37ca1315ba7fbdb7a2905af35ba72089'
         '52d3057b9a163e1b398f6c5d758836c8'
         '57ea2c634a61b25479ffc84b02ff822b'
         'bca92beb19a252f31f3893404f74e1cc'
         '6fb687fb8be38c34e0c796d0464a2665'
         '38a64af0fedb8ceb52daef18fe59c718'
         '14dc7c8c5cd18bd77ffae6f19733d11b'
         '4df51bc736a77b6258aa7e2c679cb159'
         'd972d55cb6557636775f6d978aeb68a5'
         '37997dfb91ea5b5dad5a0fdb0547e548'
         'f98fbd460ec6d32545bb0ff449c59b23'
         'e2d4942f94462959359087060239991b'
         '3da2120a353ecac118a37f91ecb0ca70'
         '01917b718257b51ee3b9fd3c9db5d607'
         'cfc45490adfa2f82f1d40e0691d102da'
         '24937b8c34cadcd049285aa9cc07c46d'
         '6ffd8c5a92b1ec5214b04a62d3e02e10'
         '867d701564e43cbc2fcd1043b9bc7b04'
         'e4c1a009f9d02d5e203618ef5b98f1c1'
         'cb6ee02da724a5cc6df0ebeb09b42aff'
         '0b112c6d040e8cca05881c03aa9583a0'
         '3196dfaad57a131c31026b411ab38e4c'
         'a46a3ba5a511cdb08549b6c7d3e50365'
         'd78bc960754ea1c99524c26203da7814'
         '912a2cbf543ecfd9bb309f4bda180886'
         'aabb00fec5cea51c1166331908abec9d'
         'ae540de9c17b201fc4239cf3590925dd'
         '2a500d7a9cf9334b151966a51a53c8ff'
         '83d995b4371dab46de748d5c798689ba'
         'b24ea7a25d8baf3b45ea65580fab2d5a'
         '0867e4c90dbfb9f032f37ae3a785077a'
         'a580d4da698ee47ce52e1e122ee8ae56'
         'fa9fe70cf825a8cf361c794c6cf768bd'
         'a242e6169a982eaa82ff76ed50cb2eb0'
         '11832f43c41694d874e463a08d260753'
         'cfd7e1e4e10dcd944ead6427ee3de06d'
         'ccf89fcbad8d763df0af7c6cb02626d7'
         'f7d8a578fbad48480c15fa5db0c86659'
         '59afda92c14e8cef3b7267156b1ad1cb'
         '74f88edd08ca4e822f61d9b3eb7fe5b0'
         '7441ced0fbdf1863491659c8ddb01849'
         '745eb5a2b615dca8674f3d9d4eae98f9'
         'f279746ee4dc6f50c2ca7d869da8d812'
         'da34903f5a86564809ed89775f895be3'
         '2b993e8a421bd379c98c3d8a396cca1a'
         '99ae72eecb8081a2a42790bcee95f269'
         '2f643410949ee91687480cfb952208df'
         'c05b9b800f85278996378921e50bd442'
         '6bc148acdf1aa4f98b07bb2cfe46ea11'
         '919a263a8e19a06d08102b7119759f7b'
         'acf7e12c1692d115f086c129837ef441'
         '86ab292de65e52c2ffe9d1cbbf777993'
         '52e18c8a2256eda95d36c8da5fc5b705'
         '27970689574e437bbe34f40e2a5a5c47'
         'cf28ff468288ffd44a799654774c4b8f'
         '5a5afa1f30a4846c8c64e67447474f40'
         '583a7cd9ab2f76ddf6ade4f2294794ce'
         'a7070d5b409af3ef593930daee6c9dc6'
         'f3879efac7c15fab279551574fbac870'
         '0286b90e8e8a9fbe0d1fd4ca2c84948e'
         '52aa150fd717c63e45a1aa9942b38837'
         'b945c1e0178c8cbba5871376df0bd06b'
         'f62475e5430a19ea463fdab7da04264f'
         'db305e335dd9cb6440284c2b646d3403'
         '7f6470ae4c6dc7007e8ffb43cf28af52'
         '9acb87d3a66f6b08fa21c8570cb19c0c'
         '05dbbb63270cd6a716d26d7d50617f47'
         '34f8e9458fe009dd1b5c7c6d9e8e79f2'
         '95ec6922ac2f8fab08d5895dfaf62fb1'
         '068742187a6fcb1b10559ea0b46a7a30'
         '083965502ea9513ebe9c270c4660ecca'
         '5f6a83402040ed4835845cf7457962bd'
         'd48688e98a3d43be0b7ce59c2b552eab'
         '6c1921055c03e5262f2c319ae9919f93'
         'c7220873a64eeadb60c08ed10a0652cc'
         'cf1eb1598f124c701b4769df85075148'
         '8362a3c7ad78389295568382f50e1ab0'
         'd657c845b296e0899856aec6cfd739a8'
         '3a046726bf2211a04152a51f2b3f2f62'
         '29aa3d749bf6494e9f6c7ee7c821271c'
         'b97044ed50da9b7ada1e92a04d5d5703'
         '950012f4d9f136b1066ab282424e097f'
         '6737a930a0ebb569d59da78b6b00866a'
         '681b66c4f23298b4bdda8f4f87eaf67e'
         '0fe03caed2f65e88c3e9477ff0dbd4cb'
         '7db9e72a8b90c24bd022f66c4c11e012'
         'bf5dc95bfe24ce50a3e30a90b80660fd'
         '5818cced147be79bd95f16aa0df639c2'
         '2269db8cbacdd2df474b1ef9f529193c'
         'b844b00dc2f8299f2b3f2b4c7dbb8603')
