#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.2.3.3
pkgver=5.2.3
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('c29fb684a67814ffe9ac368e07ffbde1'
         'e72fa89cf035fb0909871b1204593410'
         'd68fe5daf4d774f3076c796aab0252c7'
         '1ec5ddc086a6b0a41b29cd6170dcc321'
         '0b06024ffa6eaa2695a615d82a23605b'
         'd49ebcd6540f2ed58d56d51ece55d25d'
         'a3b103e38d0e5986938690b54e16c5f8'
         'c3cf36f283650638f483feb04b4c7018'
         'ea957906c0ebe1514cd9a29ebc3c0850'
         '18b99fc777dfe6fb5d9d24702b6edb68'
         '2c52384e4e050247e3b2e5f9f488037e'
         '70e7b684cd95ebec3dd4b03c5b850875'
         '515fb062e6dcc29e689231c44939f26d'
         '8ad93532cdfba67b73daa87b4b410947'
         'f833a7302f734fcd733a7ac0a8f0c2ae'
         '290e0ce64613c4fa54950f1f46887639'
         '456c4323c8b77446a0d3cf922347caa0'
         '25eef33fb307fdcff9f85b8d9230ddc4'
         '54221b4dbbb66e0c9478dca23e55d9c0'
         '7101ba82f219b885bcb8c1c81b3976f6'
         'e532029f1bef1a651881c4d0e2e780b7'
         'ef871ce8be15021f1cc65defafb028cf'
         '25ad9835488154d49a795abe76d4c0af'
         '146e2469a79498b99e508519a50b59b1'
         '55c4df1fca8b362617ac434cde6b2ceb'
         '387a649edf7de1aaa081d41c1ed75c76'
         'f5518107fb97fbd8b9ffb029d1597874'
         'b60a29e2015c05a62aa53088939c07cd'
         '1891970c983acaa9863d37563076fa83'
         'b61457921491b8aea8bd19484cf86c67'
         'b999e58eb9365e57b3e3e0cffba5fdd3'
         'f7e61a3274ed23d85fe8fc91abce056e'
         '669a536a40570fad08941f07d6b98d55'
         'a3f42c602983531f0c9be4eb60c5d202'
         '87b15ea67758a98dbb5af7cc8f605d9f'
         'bd2426bb28469331cf92b867517b43aa'
         'de112e026b7df7471d7e063766ab485f'
         'ee61c3fb0b1e3343c6ceac917d340dd9'
         'a9956a3eae7c9457ca541d83dfbba68b'
         '7f44cb1ca1bc8dd602bdacd582ce89f0'
         '4350b63454f8f587303ce9a79d28429a'
         'dee241d6976db56bf248978bda5c6d49'
         'b4096f483a4c2363d09d979fdcadf982'
         'fb5dee9b708cb604aab7fc9c8cad632d'
         'd34189f43da22577473c5791c9b93348'
         '0717022b5c0f9fc3174964894071b36b'
         'cdad3946d8cee47a9daca4467ec993a0'
         '9acd07fb35fe70ca0daa9b9f3098365c'
         '51b13780ed745a7432ac907163410f3e'
         'b6bee7c20bf4294557051aea4313ce4d'
         'f663f4f8228b6c3ae7d2c11978db2536'
         'e3330ebcf579936c810bd0b84bf5d008'
         '4530b54e04ac1143acf796712ca256ee'
         'd0bf76385f86632096ba30b59ba0092b'
         '805a0651ed07b4c689f51b6ce0b9467a'
         '8bcb2f3379e76ee45a659f43c145c2a6'
         '2365948134d68b52a8bc90a24438daed'
         '809a8d70ed1c1adb073da11441747f94'
         'c411c10d7ceb374876863d426288fe7d'
         '0b47eb15ca22cb8d707d5f2de59f387d'
         '85d7db4b115bf88083c94b1ec590c91c'
         '3dc54610e15b24e7358e2d79f823a39d'
         'a621c13264252d9ac5dbeb9e0189875f'
         'd9169495d3184d3b6ec085e88dc427c7'
         '3930a5cbed2e2ba9473fdf7a00c4563c'
         'a15631fd9cb69e8185cefdb494082776'
         'b4e8c29703603c7a438e138241577346'
         '6815bd98b4c50890b49b8fa6863a3871'
         '760ad9c33680b9cd3c4473026d0cc422'
         '78d903809523f668953ee3ad0544f309'
         '61c8cc23f1036fde4c516be0b452b8a9'
         '82445500d0c9e32bcaaa944c6619ab33'
         '9b4bf85b3034677c7811e4075ef2e828'
         'b393fca832947884296bdcfe8703bc14'
         'c8ddf41af4f3106d198c35be356ce994'
         'f244610ec77d81ae50dee81155c8b130'
         'a04383668b2de8ca29db4e4c1025a751'
         'f95bceeed9ac9d3c00af6c996369df85'
         'dda242761c25295c46fed8357520e31e'
         '92a8f226a2ddd293d5b1b62e524096f2'
         '24484179984f4ec55743e4f2872e3bba'
         '11e7238a5258e3b27d653f6f793c0fed'
         '05cf61fb8ce903f8b3fbacd8c165dd27'
         'b00a7dadca68a8197d91181f6e090629'
         'c5883ab852bdefa9280ba4a49708d584'
         'f17d7cd2f73d7e93156bf52d50386782'
         '568cc8095c881e55c93b6e1bd49178e0'
         '1cf65b95e0c95b148442f354fb670a45'
         'e07c5f30d3bef901a4008d4abcb12d17'
         '532a3e6e25158331beb8a7e51785d6bc'
         'caf41f6266c6c92ee38d75249dfc5f9a'
         'b4be595a39016f6906252533d4aea367'
         '84566d5baffee330c0f071a3f24e509f'
         '0082ec270c9e6ea6aeffc4f8798b466d'
         'e63d4d6450cd204dc49658febfd07720'
         'fa242f2bf0f45339e936c8aea7fedcb1'
         '5a013522f1d590b98a3a3515acb73385'
         '46ee3f884ec9341d99b1dfbc5b9dc4c4'
         '10209cc0e08a9d8aa0ae4ab26ed6e799'
         '72bd662516fbd63f6ffacbd29e1fe366'
         'aaee3127c48dfb7114c1461bd4c98011'
         '0b2ce09106efc786648410499fc11495'
         '8f77fe608bd8775a84778843a1879970'
         '5a6c5acaa1b3cd98e83bbdbcffeeb965'
         'f3c1a7f44f9dea31e5c00c17c99a9f9a'
         '0e269ae745b79222ed97c465e0af4ad6'
         '885b9cf0263b38132460c27535d069c3'
         'deaa4260befa05d206f0a0ed506357e2'
         'a567f5fdad7c87e823ec82a34713256d'
         'a5446d5fc2db573d24364ab76a603477'
         '47aa0b2d68fda5ef5d4e2b18ee76f577'
         '230b75a56c4469c17de5797f5593a234'
         'a264a96f56e1353906557bfccadef063'
         'defd92d8bb4fcaebba4d4d8884de5934'
         '375e651eef1b6845ed82c0ce32d51eb7'
         '2f671f7f5b3a1aa28f305e918061c941'
         '35737b03704363ccf0edaa06059cb351'
         'fd2bab152f9b7d9f8a251769ce54885b'
         '1dfe31fd5ddf3eb941481699326fc718'
         'be2bfde3f5a2a477b2540c6bd0797e78'
         '3a64639c6b7260444a1777c96d49a9d8'
         '46847163a2cf12de8892a1437e7ef22c'
         '81b35bd93812d27561792d061f28e24d'
         '9b25ed2858c3a7c6e553b314638f1656'
         '7f00a61db5bf979c38e7cc44f2b7d075'
         '438664da29a0bf2a9584a0ee42cd53b6'
         'eec91f8e7d626abff1061667f71ee23d'
         'd6874a739aa4100a8d6d561f11a05934'
         '310ce55e2896f5d658a2e34bcfd15ffd'
         '0d0c36fdb4acdbc6a1c3e9853f19bbd3'
         '7bcb676eb6d9ce5674fb44460ae54360'
         '969534159e2d18926af54040b7f142b0'
         '4e5b47c4be48292eaf65c7f671995e84'
         'dd0e278d98d0441c8222c84276040cb1'
         '0fbb2934e145d5484d65faf87af53e06'
         '90f132332e48cc37539cd06779e4b52b'
         'd91daee5a798ae387735b3de7053b88f'
         '10eea9f27df5da839bea921b3c24d059'
         '9513fbb850fcbe3b98ecf6723f38d161'
         '2c45fa2c2d3ea1b541e11d98bde94b6e'
         '16dbf63e1da46ba454c20904d72e2fa4'
         '8af936e129cd454bbce8c84d2dddfea2'
         '3ce3d21aaa172f5a89fd111a0a72fcd1'
         'db29935beac6bd1a8b935acf0b4f54e8'
         '497a460dc28330bdc6fa0fed60a9bb7c'
         '87f031b89ee50a1154099159b281a221'
         'f732ae7e68977742086141f46d6e5697'
         'fb43ddab97bb16f0c630efc3c56cfc59'
         '668929fbd3111875071db3ed51734fa3'
         '3bf1f9072bff7213b31f74d756d504a9'
         '2450c6091bc9c1c6466e10d4a3a9b108'
         '6e142e7e4ad87783d7970a73da9d1a48'
         'f0b87891b2127343d13c4bed85b4114f'
         '658f9a272ede5d21c2345efcfcd33717'
         '18623db3b6022ea11ad0d8a1c0bd60a0'
         '947dcba01d5fe74b5711fee09df21474'
         '1cb40da5255421e1f1e6568530271a19'
         'bec8c19a865b9c34c57810152694e7bf'
         '61725f5c452de216d6c208c94ab14049'
         '13a3a0aa9ae6f0b1d2550513a319f40c'
         '99c26b5ca3673aeee5203199d5ae8b9c'
         '0cfa570f27907bbe1ec5ccf2a32079f7'
         '8b18a7633717339323ebb69af5f7dc57'
         '1fc40ce952575530ea6baec5bd7a1095'
         '98ac9f362f19aa2eeb862a824cbdcf83'
         '83cab2107511a37626c1871c629b3d59'
         '38bd8ff6f18e44779643338e72b2ca8d'
         'f2a81c3475f2a772083dac55e3dbc2f3'
         '87c382bf497c50cf5a79d949f0d142de'
         '709dc774facabf2934e1ac8e723a6641'
         'b7a5d07ed424f1b4778d1fe4175b72e5'
         '09ec785bd0384ef941eb5570748f9e69'
         'de98a3404c1fb65813e3a3f9f0d454d7')
