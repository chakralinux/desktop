#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.4.5.1
pkgver=5.4.5
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('49f3ba39129cd62221f417843736c2ad'
         '69d61f45f1e7ab8a7a747ba8f0ab3a4d'
         'bb8e4cf0f10571add342084ebc2a63f0'
         'f07e71582c4327086e60f42b0b3bc520'
         '7a92b0818fb76d9522507ba8b22e5d6a'
         'f62625b63a750fd8feab46b9db879771'
         'f80400d90b469445cd3cc44f4aa79c5e'
         'fc76b510e19c224b125e64cfadbfd844'
         '925dd6b5333b4ee0fe8cb977015e09eb'
         '11f146ab5505ff5573c653cea1f51338'
         '808a85012fc1e23522e7b40ef085d6eb'
         '3a21fc0e45f9eb7242ce19b4967c3ccf'
         '0c256627c9cd166e0574b8d1c2654c90'
         'd24c1fae4a33d02d55f59ee5c37f6ed7'
         '328d7978f814ecfef1f49acf9ec879e6'
         'db7dba389399da27464e6bd08cb4eed7'
         '3939e6788ae09bab0748cde0f5cc80a5'
         '78659b56b9e7969035874b744d6303ca'
         'f6eaafcea0b4868494e000ba266c1eff'
         '77bbefca4203ff48642e458708065edf'
         'c6d6af1a7a3c9b9eeafa80b6909ca531'
         '7ea5de13b97124c49803d402e5c83b2b'
         'b972fdc085b6fb7bff8c76afab8f0bfc'
         '451630b3148d109487181df0977cd869'
         '097bf47c59a2c90860a9c0fc484ee25b'
         'b96bcee0d60cb7e73b19295f97be20a7'
         'ab32f34dff8ff8aaa13186a064a3721d'
         'c1273358f4e8206f1b4f9927b270fdff'
         'bbdabc64a9eb581ea6e9af77ad5facb8'
         '3fa3b8c15aba4c595fab336bc96e7520'
         'e495ee7c7a0628eb54a9922aa5e918e1'
         '01cbf8314c39cb65b44e5b1816bd5330'
         '8ddbe23ae4c8bf6295952021e8047c17'
         'a759cffb7675f2a71c36a22196a41c7e'
         '93a1ae431efa76e1e896571a8e359f23'
         '867b153ff1187cff04a4f6edf151a1a9'
         'beb8cb35de9c685737b03a8e3f2f082c'
         '45bdb74acfca9807a094222e7be61cd9'
         'a48132dacc75ff763c385c8266597815'
         'c8f5fca6579ee2ca9df54467575adbb4'
         '6f05c526a6df62552a4f4e24151a48c9'
         'ba901246d6e89abf4dd3da10682ab398'
         'f0402d092877c0fb9f8e68a979463259'
         '5238e24a3a4d83b7fff2b3818727de46'
         '660323828ed072a435bc3cc5a8337b77'
         '20cd8bda31dead670a9d5d837dee751e'
         '863dfc8ae50172adae218788c4076e24'
         'b1051e00eaa1b0257ce58fe546e4a034'
         '1cbe6d23339f77f6a982d398fe803428'
         '1dcb3619b144612e4eb44490c8904412'
         '781cd2861f4bbb3da12db033e60f46e1'
         'e4c2816ff5248f403130d0fa5bb05a60'
         'ec3add4d2724afee78cd05b5c29de0dd'
         '6d102756601287511da4665e9382d4bf'
         'bb6cf31b1783965d5714831eb175fb50'
         '4ff7836f0170df2fa23181c8f727c0a3'
         '38e48932303064d421178238007fba75'
         'a40b1cb9cfbc5572c9608336376e31ac'
         'cfa9f63ca0e8e05aca7add79f2030604'
         'd2f15c86d369ef5024a89ebb737df603'
         'd3be08806d790640e51877a781142a83'
         '6f5e426f6e49caf69d1ab741dcffc102'
         'a8d9946d77f29d9903d52f234043eabd'
         '58d1be0d10802ce97392c5ae5b5c18ad'
         'f29612d4ec77bc59009b6026f16bd439'
         '68b16259bab0605effa5399c9f4414b2'
         '4828e8c016ad046bc104d7f9ffb2e496'
         '6a79b30e8c462ba4b6727d7facf177c2'
         'c82efa249149c4c73266c3c4d7fd5355'
         'dedd7c8858a9b419096fd31aa0349a8b'
         'cc2348640a8ed6fc0148830b134cc270'
         'feb847fb95764848d4ad2fe0e876af18'
         '2892a66a22e24a36e1a88122f8be3a55'
         'fa5142788af9e1f5bc8e0c859fd040b7'
         'b298b7663aa374f2ea2c31c9c526dbd3'
         '6af3fccdf4a51f2dd435b87e7f7b4373'
         '3b6af9e2fbc50e38b5f1cab91cb79931'
         'd44a088ff860ca4e0c9d21c1e59e5aa4'
         '07c9f77f11a4a09cfbb48916353eeff8'
         'dfc9d935e104cdd787f96523005e92fd'
         'bdceca508f3aaeb08ca84c75daa06dee'
         '5502cdd1e531afe7c8e8bc47c761685c'
         '0222e6891fec4baa4f2faa09a9cb320f'
         'b5eb0c41870f3e0ebc9ca15bf01368ec'
         'db1919da6014efdb272b429861851c65'
         '9d309a6d470c1b237f52e81186057596'
         'c4f73326c8947519db970bb6219f072f'
         '2f3627a2b6eae1bdfc9df3252942a152'
         '9da763b20216ad5c7fd672c8dde059ad'
         '1fd8f2c51abc2cfc0574966d293655f2'
         'f4821d5c418a710e201ff8ce504e076f'
         'df61e6eed3bdc82167edae1ea54fcf86'
         '41ecb28796c348ce629ac0218e162405'
         '00263b28194b6bf24dccb02ff9ed0652'
         'f9fbd269e93baa5f9f253fdad3235367'
         '05950ba4a0c78f250e2c50e74d41b530'
         'af18f688fd69f3cccee9a855f2271fec'
         '57b8d92b4f452e12455fe2b3a020f50e'
         'fd73ac9ec6606230b570485db254ad25'
         'b3f557c59fd63ab25d58b4778035bef1'
         '71cd7203414b1a511a17b6bcee269293'
         '7e892f808d675aac1e5911cab2361a07'
         '167ae4dfd9e04a0fbbda181eb4841a5b'
         'aed082d8199958ee9bb12899c93d9581'
         'cbd041a38410b39155b79c3453698442'
         '5e298e3db4276d42d9019b7c50d2eb36'
         '10b71bf056af07d6e6a210f37fcd7b29'
         '05ef50a2b2f06354642bfb1a1dd98d93'
         '36aef4cba1700547a3ab030d2789fdb3'
         'b373aa61007f654915e3cfd5bdf77a52'
         '02dbe4b45287f9d78032602824458c11'
         '48cacbf7b13429a54923ed02a20da495'
         '6cc0a7d5e3494f64dfdf105f35ae2a14'
         '022cd0f8c1dc2a69678b41b02bc5a802'
         '7c85baebe6919b00ec02ae9970369c9d'
         '36c07655501f08a4481b7265f3bc404f'
         'a47ec90f4451b016aa4096da08ede9d9'
         '6ec1ef8f9f75bbfcb8c8a28f7248ad47'
         '1e29c5dd73a93f7081c693c96264e2d0'
         'ee03c097fd705971efa5cda545d25c5f'
         '6dcfbd2e5124f17fb3e0e804b49e6b1e'
         '5e7c0da29e5b9eff037e2563f0db37ab'
         '2704d7137d3b615ef2d9ded4d4fb645b'
         'a3aa4dc6d61447eaca6c899895bacd8c'
         '71dfa301845569708b9f254f2887c4c4'
         '6e0212c630690fde346c3c6e5dcdf33a'
         '91aac8c30695130a3e855d2f6aa9d6d4'
         '370d6ad3644c928cf9f1b469cbc8a9f6'
         'e29ef20c702903bc8414b987ee003a40'
         '051aa19b0e7d55c36715e6fd33115889'
         'a4304706f12ad43e9343f26fb4377bb3'
         'debefa20b21c0012f3bfffe672191f57'
         '588039109480fb618b03cc2d8636ab6b'
         '13fb494901c8f91278013f175454f47b'
         '4e6af576d81b04e3af49afcb04207b86'
         '6c0a865c07f86f81ecd383d2ee93e39c'
         'e0209cbf60a91ea03b2f6e0ac788d329'
         '5c2d5213ec8c050fc3d7b73bd55448de'
         '2096978ec2ab2fe5cb14c588726496ad'
         '146eebb4a379808104451a059eb5be5c'
         '0acd8c5809a85ce2c4c630598d3aeee6'
         'a5ee0b2b8419ea83363729979af3be29'
         '14742723275b6c3580dac28b94c252ec'
         'ef6a51a5dd1f8b204c1c2472504cb8d4'
         'c505df62629f8127d1f9f112d25f4d90'
         'da4ce3ef72a8c0ee7bf1af2d3091b4a6'
         '959e01e61676dc989c079f3b8e97cd25'
         '8c258186bd2976d88251a4c00ed485c0'
         'd32bfc6c9de6f20bffc49700224fac61'
         '2597d2dcdea9a199f3e8f1947bf046f2'
         '08e46b5a9836a9c0938914b09b3d390a'
         '796ab7ad6dcb2ea4bd9d961972ee4193'
         '21c5cbc19b55ab4ee49c0f0339941b57'
         '9600856f417f0a858cc2057a181f1cd7'
         '0bab0088ecad36fe0d5175afa496c2f2'
         'a29fb145c8392e2ff24508ea374bcd8d'
         '8c95c06b2df09273da92cd178808de8a'
         'cfc97e864befb7be98aee7b1e895282e'
         'f773034453e35e4edafd21ff60928fb3'
         '273b45d011df232d1d4ef4f24a35c4ba'
         'b682f27d8356d2f4a7f6bd8204201779'
         '1a793b31ea1d41f2cc3f4643a317087d'
         'cc00f88b1a5a940cfaeaf9705e899bb0'
         'e34a4cf4027e657fe63b1447eb81259b'
         'a5a4655c7073d048c2675fb349da25e1'
         '477f5e55caeecd89781769dc93fcedb5'
         'db22f16c1cabc19f7e533a5a8735ce24'
         '4c49f6a2ce51ed54c3404c40b26bf7b8'
         'c1bc2cb52b61f390ece4670ce1495f6d'
         '4a1531252ba30199f33ebab60d100bb8'
         '37253fd864a4296dcd77920a6b5a446f'
         'b090f3a09e16732434aa7bfdfb4ccdc0'
         'bce80180c274d685588eba9ebacf2a2d'
         '72bd490ae719b24d66ef2a00cc95b8a6'
         '7440b91a368dcaa0268248227e3fbac2'
         '84025c2722bfdfa91e7c2df24907b8e6')
