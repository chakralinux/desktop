#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.2.4.2
pkgver=5.2.4
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('f6a0b57392da1aa88b96fdf936ccb9e9'
         '21aba3b842d38b9cc3d81f4c98ca08c8'
         '92f468b816102b888a3f1708493ccb0f'
         '2646cc19e00021084ecbc3b8342e2471'
         '60a1063e47e5af1208ec256fa5615cd8'
         '42777973461ff3f2dc315308d28c7e0b'
         '6f7e25f2d5219993b55ee1a8fa7fbaeb'
         'ad38c2cceacfcde8af7566c6136067fc'
         'dec8f81df50e83ec0d644143bc7ecf8d'
         '14c5a812b332b3c828345af122250295'
         '2039dc9aed557223f4c64cd534f7f24a'
         'ce3e7ba77902faaaf5475f7d7c93432f'
         '98696eaba9bb0caeeaca071545a50af1'
         'd191378490b82353af49b958793eb313'
         'e96c95e68cce71da7a92d366a938a8b6'
         '286e721e1f3f43facadb44edba3a7e44'
         '275fbaa7b4df81670db66cc093491da3'
         '94ec50a9d3f4e9469c5c0388b2e656b5'
         'f9d4c250278c8740ebf62042b8c1651a'
         'a1e067c5489d54b4683fccf6c1a20b3c'
         'e815c4ede1db4c1b9f9221ef468e427a'
         '1535f6372b74479ee8c125254a3bfd6d'
         '94be17ed9da222460221f2637df3be6d'
         '3d0e127bdde1cbb886b61a77faf72f48'
         'ac3d5b0a0cc4d05f6b39973d5fe2ada0'
         '94f92e7a59dd2820bcf903acb0d622ab'
         'de5ff93dbde9e4e829e606fa7e280243'
         '024c24739538a34e47814db3ea6c6ed3'
         '505cbce2daad82fd4437483ad5ec15a6'
         '1962ee63c55b2e43b70a5544461bc838'
         '17f3256c16d1c28a12bd42ff020ab274'
         'b88a4c5e6d246e6aae73930b0c339477'
         '1d9e1d0ef68bf85fbc01bf080fe9e69a'
         '018207e555c98a047b4a8ffe24cc68c5'
         'a7da50ec20a2ffcd3ff7bcb07bcffe46'
         'daf9f57b75c92a0ff1d2537c21ee445b'
         'e6b46ecdaeeb6804cc4a62caedfe7542'
         'e951fa29719e203dc1d1fd81fd7e99f7'
         'e278aef99a2458c74b5769e75cd6fb0f'
         '6bb1ba5ae3401f47bea8e2f8ed1d36d2'
         'ea7af7800d5e57ad33e871d6eda1cadd'
         '24703002d063139a500cee387996f7af'
         '20eae9be4f3b6a70d6af17134f2a0760'
         'bc7d5ec4886a490a31539f8cd7bbf9c8'
         'af8e4d5a78fed7d1d633e53cf2bb2aa5'
         '88e3d6ae0a4ccbe55fa33395503a3e9d'
         'a20c4a487400d5c897e102fe471bb486'
         'c4640ffb263f07274139a1085d60d97a'
         'affcff4d4917a6edea236dd87e7dea4a'
         '8f113e680dca320faf54e012756b0455'
         '512ad04def5970229d95cac6639275f1'
         'ee43300bd736706a340c92839c25d754'
         'e4646ec23c7480bdffb5c4d284c8b34e'
         'd824fa9c9481df62824b1da2807d2714'
         '6128eaf30556c3de0561d4dde5a0005e'
         '5ccd9e465b3eb333c589debba7361bfa'
         '1f9df132e8136dfe531b499e9ce38d11'
         'fa59d6cda334e6bd6c347a6413458bd9'
         '6e444666f0bae02e0745dc026edde075'
         '101c285dabfc88fef840484c4a95db4c'
         'cf0f162cff1c923c5d9f883993ec96e8'
         '220f7d5c7aacd7f4a6dc650d050b0111'
         '0cfcda634bafac5a36c3310daa2346e2'
         'bb481e10145582b23bea558545c469df'
         'e3e2adf263c98047807dc1c45989069f'
         '3e892f4aef2ef6156529fb926c11196a'
         '2945368e222fb9c6e8c5c4b47a713a29'
         'e317ff11ab8d65f7ba7e3f57fd7ee7b4'
         '7c995b8658204898dac2d9770ea582ed'
         '5612b035d6d89a7b17a0a15cd9b767d0'
         'd6db5c85e520fdb45fa94376ebdd7aac'
         '43f8f6af91098f6785db3559b495b644'
         '02b399c4a1ac125c69e45ab9ad06aafa'
         'c0b601c7b6441610bc1cdd5451358201'
         '35aa8c4d4bf455c3b8f4e2ce9f5f3fd7'
         'cf57b15858856d2e2d34fe75a05d0a4d'
         '44a4c54d3412b9128beee24b12b8ebc4'
         'bac44326b8be3cece42bf6331a5acbf1'
         '8e59d3a22f0df0d5c44096d59476212f'
         'bcbe91f51c0d3cb7249084dbc88e80bf'
         '9fabab55911598e90beaa719e78c6bc2'
         '394928076b5f7b8dbbf9d4cc74e3622c'
         'e4da82c4abea3fb1ae8a4c094c8adf5d'
         '31b9680a8049cfc7b12d9631912de55d'
         '3f000adc477535b34b4a4c113036d325'
         'bdd791bbb8b59b79c6c80068289864ea'
         'fabf543bc07e729459fad95e5802df08'
         'b21f627d3a5ef790c4b4c1686fcbee84'
         '9838f63e099d894294b1916b5bbadf71'
         '7a1266b28923c225fa564413de83bba3'
         '94944cb9c50cc12ce606387285018af5'
         'ef4998dcb3727872e0ae848b812a98ef'
         'f8bf09a4f107e5a3175072c8c6aced65'
         'dd53459f1b8447d571aa423ec26c79d4'
         '9605bcde8fa308d63db8e670c095c4c1'
         'a9c65fd14aefcdff7e0a7ec0ced05d29'
         '0229d3289134db897af568da39739751'
         'eed965279d5c08c6a6f9d3c39ec507db'
         'b192dc0cba9d61813e8c9b6862013f15'
         '7ae3c0ee1f6916c01d3be348848a8495'
         '28f0dc37af2d8feeb4ae278586468408'
         '693dccf62dce4037e7b0d46589b3ae7f'
         'c7bed029fa834dabc31a1cdba7946ad7'
         'd8c2bb6db7e0f122e211779c0f4caa5c'
         '7c668a1b885c9e63c8fb2c73de22917d'
         '9fc3614861a23fd9c9c650c5ab16fd9f'
         '0e5073042b23e25c2e864121bf086074'
         '425c8d964630f2c4a58e3729840052b9'
         'be3453fdc0303d6148af656555b0708e'
         '9ec12c928b0b72bfe3a29db101d1b588'
         '5b8d4e998a98ead8ca2bfc9aaa9712a6'
         '85b47ad18ad4065ab08b54722a83eb3d'
         '5ca91e85266a7db11a71212cb70232bc'
         'a83b7e1cfa06a3a6ee137e83b562d4b2'
         '62a792e396b400d2b7c2066e97309155'
         'fd9b618bdf8d8bff58f53050da03c381'
         '37cb33cc2ac3371909ffe7e933b4a7ef'
         'a0cf5309b176cf14cb15df74ce33e53b'
         'e5cf3ce40b3f4321eb14a2c98350fd98'
         '0bb9051c772749370640a265444f5c75'
         '72302346936b9642faf3cce6d9bd6b8c'
         '165a4b24fca8ab1ce38183d5b6911b55'
         '56cd7523ffed923c62390870690c4095'
         'f91286fe55d54cefbc0918479ad543fe'
         'cfb9b82658520dc7026a028ecdef1667'
         'a933afd096995e8d94d3711cace206cc'
         '5a5db2e26ab2bae34aa27ac108403876'
         'f93cdb633ae04241ebe30ea6b5d71cf9'
         'bc4dac3154808b7db12f4d85034c209d'
         '70fe92739301755e16a833ff2117a3d1'
         'b2cd30e9e10a21954c3cf9e8a8a2940d'
         '8273f2dcdf205da23c32cd65a8b8c116'
         '838b4ed0a2d631696a6a110faebaa82a'
         '1270c80bd9b12d27170f479ba80496fa'
         '0c698c7cd84901a696b737151d4fc445'
         'ef0175cc0bbf9d989039b881eab94e21'
         '3a7c76d952b5e1e3c16ce0780c0c7eac'
         '305a31eb31a6e395f68bb4eb23807ee3'
         '9eed0f02ffed86d7d1251b4da58f1693'
         '3d007ed2ffc2a49d9096deb1da733939'
         '88544f22d04ef680e0f15981c0999322'
         'fbcf87347cb90fbf4ea4e562aa93b919'
         '9fb4de10760ad099a6a4147508f17357'
         '51c8dfc730cedab8f7acac2abf6b62de'
         '2247eb9be1a7b121040887d224d43d69'
         'b7d94012f148e3132356c09a9a268774'
         '6f4b4f648ab8ccfbd3721058a213229c'
         '1f54095b8fddcfcf101cebf234d5d906'
         'e92d608c6e8ab237899d6e0852cfc530'
         'ccfc81a8285c36c681993ac980ed79e3'
         '1aaf73020801a1d572c96b3c72c6a0c0'
         '1c2095882a1e851faaec784fdbe54754'
         'd34b3a57262f551f0545906a0161b59b'
         '9a42a15cc3430e306f656fc63c0410e5'
         '94349915087de6fbd5325c5f8ee46657'
         '5b551aa03f4b86d4a8034482ad138e40'
         '910553d8ef57c36b2068345603fe26f8'
         'fbcb85f4c7b0de1c7a7753e027ea0026'
         '5a847b6e87bc5af296b3aeee4db0e278'
         '6c915c1a421e917117f5262d02dc31a9'
         'e735cc09544ce28fb047d08ad69dfc6e'
         'cda720661f88d147257c5aa741535b54'
         'ba9c67ac3c1d41e972454e8ec0638667'
         '0e8557de2e45cb2b6f5dcc595a0ac33d'
         'f463ae1fb7de9680fa907cd772b07e53'
         '39dc11679df5119d66e3fb960bd4918d'
         'eac89f64acb220cb231da0c6151635aa'
         'b220a97bd58631e5e45ccc88a01b4a90'
         'b9384362d5ae4e7453617964d29f563f'
         'e13ce5d8111d173fbe5427b620629b25'
         '573ff2f8dd44f778740a2ab1a352ebe8'
         '375524264f7cd4309aeae1ee87d914bc'
         'e092428909ba2786d49f3697f59d5956')
