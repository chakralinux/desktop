pkgbase="libreoffice-i18n"

_rcver=6.1.0.3
pkgver=6.1.0
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('fe47588bb7eb3b77d8d54c8d98d5f09c'
         '254403b802dd63652d47421689d7f4de'
         'f0045587cbb266309da06a05a22aa4ff'
         'ebfc817e362b732c2153adfc6613101b'
         'f81c96fa021252ae3a20dd3da862a213'
         '1a6dc15bf8ed8ba9cc92c76e0a3ebd0d'
         '78bb8b3a515365fa02c4c1b9ba9792a9'
         '6a519a2788448bb2a95f358c1415bbdf'
         '9e08585ee7e4e06bc933ad47ab506b87'
         '42dc626eb86da7ab36179f09c8e11ec9'
         'b21e39a7e948377ac01bdb7adfe3ae6d'
         '21135b96010578962aa4b7113dad9320'
         '924c9db91f1a911281baa98f0bd8edfe'
         '528066b602edef75c484de7ccf26655a'
         '279439e0b47fbb00a23d453888dccf7b'
         'f1eb7ac7d97d8955d57031d994f20582'
         '5e5a5039cf14497f022cbac16a0c703a'
         'c4d62d0fe533e23d5ab21b6623a45088'
         '5e993b96d3c3b76b50cb0436b79a0ae0'
         '0edd3488fd9f011405f71102e34bd663'
         'beb2b694ec7a0474d2f6e37fee30a2ac'
         '79b3862d3212ea7dd0591d30aead9534'
         'dbebf4e160827476b2f36e3e618653b7'
         '13ef8f10308c04e5058f320258669972'
         '3c110388d124cf3cb9e0a0170224f58b'
         '76609726a83014cf33b176fe74cf6485'
         '2a3c872968c339dc86ba0d2432b6ebcd'
         'f2740b57ef4fbfb4d3fd334ad9a1aa62'
         'eabf1acc7da6c55ff24f9b8dfee8b273'
         '526f60226276c2913e577c58912c15ed'
         '5c4ff92a5a9e2dde6a53e604957f6bb7'
         '7a3a42867ec4df04a4f50b43e3243d17'
         'af85781a600d69bc91c47c4130e7ca48'
         'c383110dddce08d4f106fb543590f207'
         'b5319e8f18b951043061ed5b24c7b323'
         'cf519e2ad112e65d43955ed735a540eb'
         'f2d029918d94e81665cbdfa6b6eeca1b'
         '2c0919596ddefe336d299eb48d65303f'
         'e9a4bba4aa0dfe08d224ed628827fb75'
         '0091d981c4726c707a0a67f9cc5c2d54'
         '640647ed304ac97213287aec116f6e63'
         'e38f2c9a8f0bad59f688339ae08cc632'
         '44661b9cb17ec7c5b2591a31c955bb88'
         '453501bf263d2b51a5b4acf40eb8dd2c'
         'e6317c1603eb56d9f02f4a5c0ab48d4d'
         'd02cad2eaf3af3251079e4bbe3cbff53'
         '18c56ceef56996835df31e630d7f5f3b'
         'e7bc079b8d9992f89efe45e8da0a56ab'
         '925175e3c5576b0be78f107d75ed5f1c'
         '10d5fa3198159fe7594d56d779032c61'
         '34cd8c0432463430a2c578af800aa55e'
         '8e69ab263dec6567bb7ad2631bd49458'
         '447918c52d16f6dfdcef686a0d77910d'
         '426360b98c475e289e08e462416932b8'
         'b93bfac53191b9546bbdc154ab91d7ec'
         '494538cf9c3d86d755e259ff4ef3165c'
         '825d8b75f1bdc4ed3700981cbfd98171'
         '7d7a80ca6e9e141cbb4e1c8f1f684876'
         '8b06eb1c95f213a449e5ae679cd83027'
         '855c5cf30aa39fce705d9aafce8e951d'
         'e419b7da06269b990ed229427f6f26e9'
         'a81b33bee4296d764b59a4f7b55718d2'
         '67bc586a91f9a11650755b69157b963a'
         '7e49af3d20594a2077fce86b3aedb761'
         '8a97cdb87b7b388dd5def086286219f8'
         'ee5ef20382d6f558fb5094d683ae2941'
         '45c7754480e4ce9fc0310948f2a9f252'
         '035f8306a4631b6e70df0f38edc604b0'
         '9ad332f6928e339a8a0a3ebf42490705'
         'ec079e7005527432c46ce08f1180c3ac'
         'edce38d1e9d7cc32e86049f945d9809a'
         '4abd73901e46d9b9ef3450ff1f0e912c'
         'b2cd09452b9e24289bdbcefe0f718e18'
         '61e218fac4bd5c547a43b90a83c61d08'
         'e56d8b9d9642ec741f544e8f8c719edf'
         '33ff9f4b3f18f569dece5adbdd3a9989'
         'fab22ab4dc0eacf4f8bfcb89d8b37c8b'
         'ae0158745d70bfc474d92d997542b2d6'
         '38a26b13117817ffb95c3e31a0ab9187'
         '0ccc976aedc3a4295602b1d94c4e6f21'
         '15d084a1a960c42bb1f27dc2eb5987e9'
         '25b48b813cb766672a1bd0dd26166040'
         'ad4db223e173f69e6a1f9f12f4f90169'
         'e698dc5ca370c8bb0bc6984f47e16104'
         'fad80cf7bfa9992ec1cec8570c264b2a'
         'a802a0151d0f0965dd3cacaa6bd5801a'
         '3905547ea3532ba1057cf92b9dbc268c'
         '6f903f3861023c3dc93d4d2c3263dc76'
         '15965feed8a499af9132b334f7994e42'
         '5063057f4f149d90eeb9d4196d1b1d7a'
         'e0a62cace365f445458b0102f4952cfe'
         '49efaeb9d644eea9cbe99f376550421f'
         'f6af9563cd3697ab7e69e3be5e070bbd'
         '4251b076fc97ffe92c1427aa0f925d80'
         '42578b206b52bb89d827a116f1863871'
         '8e04a58826579c09a2bbd9ae42adbb72'
         '430eb9a9f605d63b3297b8b749885f44'
         '1cc64f768df76c5a64020edf475ac8da'
         '20cf568ae16b717e79996c756a2e161b'
         '8e67af9aca6a88e38848b5fc13a0cb59'
         '82fe50b441fcbc8b3d9dc4422cb3faf2'
         '7cd80475eb0ea5d4056ed086696ab014'
         '3d1110fc9bf1b0b79bd458600a7ba330'
         'c7583d3e4474795bc6a06d2492164daa'
         '8e1f1544f23c5656d474e7ab71e2ed32'
         '2ad51412d5bf709ff0703102b932a1ed'
         '2a1582a69e79cd77deaa3c4542fa1990'
         'a6efe8a13c4f16b5c773734328bddcfb'
         '01fc26a3615465d22d0b8812c6faa4a5'
         'e372cd346a0e5c67ec4b9f3e53237c53'
         '8557952fe956674461e289c817cc2026'
         '7b77774cf94374fdb836849b284a80c2'
         'c63d0fb51741c2c8bc857a75d66ea707'
         'd7c7eb6d936cac9e16b95fec645b8de1'
         '8cc8de5e10837e59d86d7c825a96c45c'
         'fcd0b7c4c274c204f416a1a0bac6fa5e'
         'bb2947fc7cf81bba987ec7ee4078a95b'
         '77f3a92d1e8aa65ccce12d9ff8e7e976'
         '720a10613bda6522852689c6131c8ebe'
         '0d5d635132463674d214c1399f764b94'
         '4c0d124c342044cbd93fb8d0994d5bf7'
         'fb88dc08fd4db9b87929d260176ae4d1'
         '79f78e2d6302c7cfc4a2fa9de4dc3bb1'
         '07db3eb3b3765949eee43514c266e7bd'
         '3662c4962d03b889432456fe5564916c'
         'eb7003fd2dd7bdafc9b906ca6ae1bb27'
         'c4760edf068e03b6e0699829d33ff725'
         '75aa716f54bfee8a6be788f876b0a7fc'
         'aa42ea4486ec8ec2e055a092e3e3b5eb'
         '1b5c22613d64c27268f8c8b825d84d06'
         '8a8cfeaf7fabeca5fb1f32bc6dc91df1'
         '83dc7962e287f6bacba76e7850422395'
         '36b73fd3d1c2404930303f879e786a1e'
         'b143fddedba43992ba05fe4350585f01'
         'd5fcda2b19f198841ee331ba376aba47'
         '753d7c4a6b7cb68eeff2a9401bf6b127'
         '6127043b3361158acca1776d237c5e24'
         'cea4f3d3d7d41d35aafd1130f33a0ece'
         '0761fa59bcfaf1ef3f6d782238e9c52f'
         'b1f7d229c3daa65c7cc2395bcdeb5bb2'
         '002495ca911df7efc9043175005fa65a'
         '1907bbfcfa06dabaab96d030160c0992'
         '00b8d07ae031ec54fb3bb11b64acd284'
         '5d25a74ae7976f1dc6556e7cd4dfa5bb'
         '78c5267ac0ea90a4426c303ff07663a5'
         'da3a7aa9bdd2673b7816844e1c0bd4cb'
         'abdecb1d09d6bf388b3e080ce780e742'
         'c54cc5e5acdf6acc17b8d3a4e53d3d5e'
         'f278f95b9c022fb6498844e1e3a27ac2'
         '99c2201eb19ce22d8bb42e3683d89fe9'
         '2550e5f539bbd7163caada0f587b1b3a'
         'cb63df68873bbdff3a69febc62588afe'
         '772c357fe8bb88aef479c5f70544d821'
         'f5487235b7a3b0b1992687b1398f2fd0'
         '6cdf10a48d4e5188b592bbf02c781a70'
         '728f1c48833e10eefe8f983f113cf6e8'
         '812f4716738bf1f5f43a473ccf2b263a'
         'cd4ad2dfa4fde9aae58898e44b4a923c'
         '94b41680f4887d1b446b52077e744505'
         'b38fd81bd1a3042813b692e202eab160'
         '5fabd3edf870bd1b0a04fe2ff48aef22'
         'e4ce6ba18c1d1e9554a609d4d556d49e'
         'af9aaf40b8e3467323803cfe85dd6870'
         '12d4155b95bd1944ee2ab2c475924750'
         'e7c1259357db46b0ed3ec2345a20edf0'
         '6a6c3149597baa6a99a6b8f43b79fc9c'
         '81eaa24231642818fba4249be48c5a74'
         '895a4bc28f39b83c8bd206b6b5c63873'
         '50eed5c91c2a5cf490b2ff0ca704fe56'
         'cb35406b67774a6cd183556ac0ca590f'
         '4bfaa5ba02833b63f0ddabbd53342412'
         '1009600badc7b4fb45148e278b33695e'
         'a00a6bbe55e7ccb5b6ae87d1dae78a13'
         '933add811935d33673a7ec671e8cc8ad'
         '6d11dd51e819e0eac3e70e8a0fc44da3'
         'fc05ca37903ea79214757db09934bbc3')
