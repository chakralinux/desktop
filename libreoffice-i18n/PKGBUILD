#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.4.2.2
pkgver=5.4.2
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('860bdf7fec2337bdb02bdd07219f4797'
         '27719eb60870c7527956a4d14115970b'
         '90d26c2c67a36bfae3114333f81e8457'
         '4022ffffa575696f5305f66d013847d6'
         '429879ec7fdc842aa602daa2a49b3225'
         'faf537db251a8ce13382a7ae3de23184'
         '57cbbd07bc57fb3715b934ef04b0cbfc'
         '6dd91a133c3e9ff11319cd952d2a49c8'
         '5ae55deea448a89f11ce1811351099ed'
         '5e897dfd407ea130b27948988c1b5743'
         'ed73fd68c98e4f27ff9b360839e86469'
         '1ea842ea4beed17dc0d05d65a515a3a0'
         '9acc2223793fb758971124e63426735f'
         'def9d8ea1e58121f778da54cb480c384'
         '26f765b145c84840eaa07eaf7f1d0431'
         'e399356ff932181bcc5de45073aa3ce0'
         '6f59203950ad9170c4f1345c3a77ef7a'
         'f5840dcaea27376481ced15833a31c70'
         'cc4a6f9ebdb1945e988b9e07618abe23'
         '90d9ab963234c704de18ca5c83401368'
         '7cf8c15965e753494c5865ce83ae015f'
         '33b4990742f4a4ede750f48471fad433'
         '528781cf5a426fbf4717f97490f1082c'
         '0ca19d5152c46dfb48762c4d72af5dfe'
         '491e6b8887dd2e5e862c1d0eadb1d86f'
         '3aa412edb54d619ec65d7362747c6c0e'
         '1b904a297fe2232a1ec67d5551f1fb7f'
         '0f432f3480b6919623619631ac24a6ed'
         'f686399ba59c8768da7924e76921ad92'
         'c97d56f0d69906141a0690fd70778821'
         '567633e12a832d40f82df9750bd4f38b'
         '032bbf17899d8824b4d301aada92b648'
         'd0d4b384c2289c1af96e64a9c0beecb6'
         '000cd0f737dda77e0e9133ff7847a8c7'
         '0c28511e1b2a4d84402d16cc00aa4086'
         '42aa6d8e4a3d37e3789a7ced580354c0'
         'c6488e27a5201213cba081e273678b61'
         '71c33e8ca9f3f0981f65dfec58bb705a'
         'd96cbf46abf0335d3fbd8e3eff8a05b4'
         'bb670ae2dba380dba686c1fd2fa35094'
         'e121b631c8a91a9cc5345a743d048298'
         'ce9e329b2d26d8f440a67bd8bce121e1'
         'c543df4e7a4d845e36d97cf912d23f88'
         '00c244e1b536a19d27feef2b5e949cac'
         '303dc95b4c079de57072a76d71cc0dae'
         '996825fc05b4ef33ffb707162bd42dd9'
         '2cb2e0ab0d3de1345e5086adb1d1a12a'
         'af3473ffa86070ca1b28428f8072a269'
         '4e9445f277f2b29d3dd53b7143ea7d8e'
         '43debfe194ae809b7656a68cf57a83a2'
         '66a5b6d9872b742b0b31a16fe3e0f3dd'
         '086247a493ad6c671bdcd224fe540786'
         'e3f52cc54e4faae41fc145eefa53f721'
         '5c2fa9640d8214a429285af585b05e68'
         'de54424ef1e1c1b2a64d6dd9bcea8cae'
         'af09f7673e1dfa1d5bc333a9f4f212ef'
         '3e8382a2f85ce509ce7c260ec5a66b9e'
         '618de6df246b7e89d95659635d96c0a7'
         'c24003b1e9eafe6fb784d5886a566a60'
         'e1471352ec68c2fcbd95dd06ededfc5e'
         'fe3a6f655e2f449006d3c591f0c5d253'
         'b8bfff6f74e1bab655b00d8fdc0831c0'
         '1cb1b594787c4ef86d63c7a0b430a7a2'
         'bd608a1569ea7048cd3654138a1ecd8c'
         '197ab5686a5e90454fd9ad60e54fa067'
         '2b60da875587dea8cbb49c0bd95de4c6'
         '0e64a2fc5a45a49fa8795e51ce98bf16'
         '520ba03c3daa1273a14aa4d2aecad531'
         '682436c78300e64a665d8670301c83f5'
         '70adc72024e6c0cb19dd83fbdcb68af0'
         '2c58a023e4163ec5ae41e450deaf4b67'
         'b70ac40454cab0872c9a64134b3b72bc'
         'bc96f5a38701da33549021cb1d596dbc'
         '6f6f2a1f885aedfcea40275ace6944be'
         'c62c42f1467560f499f9fdf607475331'
         '2fbdb05c35b3df1c495318f9403797f6'
         '98c9bc7c14bd026aafd89deda2d16853'
         'a428b4a351d6eaf1588708d344c1b976'
         'a124b3121f1a7aad2e975f7511f8ddf5'
         'a7595d9c8f6331521ba0ff532c96d3be'
         '3b2697e75b2e46be73d2ee3c6c94f14b'
         '27ce2f2a0fee3832843e79c7ae12bda9'
         '76fbec614f4157b3acb157e87f685e31'
         '651556181e5d9b4becf7de08305467ab'
         'f158d11ccbd7aa2eb7bad1423d13d12b'
         '0c01b89aa69ad7ae1529dbab9fb4a52d'
         '2473719260010b4ac6018cc8240be5a9'
         'bef4e22e660ff49e6d3478534c7f11c3'
         '12fc828bfa63297c3eac927329b33370'
         'a1c4c180aafc6df875df35c2c52a20b1'
         'b7a032854ca708328a77e4f1de16e34d'
         'd8a742f009ea2459b6cdc2e5df5a186d'
         'a876da167371ec8ac2d9664e69800751'
         '2a283bf2543172f829da731669736e7b'
         '81edee4f1bec343a119d1bc0092dae21'
         '2f5fdc682bc19b658162b54240d6744c'
         '6977483c44a18ad75af5213970b78c68'
         'fcef8c5d7e773134fa039d35d00981eb'
         '7bc74f8d35ff1821474f78d858d3ec96'
         'a144694bda5a1ee945cb935ace8d13da'
         '3a44a7519b2397e7a95fb23a82d966fd'
         '2604a9dd174fc6d9ebc9bff71f788665'
         'ee4b49176deb73aa7018a9900bf0a9fc'
         '0c13b8fc1170535b353502ce19efa1a4'
         '7c641d7a722905fafdd2f1f47726ad20'
         'dda93f3c7b4a8790d76a749b86aa2529'
         'be7110f4d7ea3a7bde6ca5f5c6a9f58e'
         'f3ccd570aabc1230c153341e4a18a8ef'
         'b48305474bebe15a1eb147b14689dcb2'
         '32e33c25aa722e1127fb3e8b79abaa50'
         '0837d6ee1d084a050cd18a6badcc3c9e'
         '2d0bb35544a13098b9b5a0f545ec9462'
         '6783fcc5e80c4eb2a3f8f5a30aa2880e'
         '4279c55da216b4fef81b8d2280fd7cf9'
         '1c14785271e7f20bdb5442737e99d41c'
         '17fa674debdfe8c0a5dbb03ed7fb5e1b'
         'cfe43fb2d9d171231f34ff8f7409c7a8'
         '24119fc9225540f3879411b0cdd72b63'
         'dd10b27d155903ea643c2b940d24c008'
         '58ddd6188deddb8c7c26b044e656b7ed'
         'baa21492b5340060e3053a1563c75794'
         'dab9a6a1186971604aa9ab79ceebcca9'
         '2e67ad193d521d056bfb28041c6ee621'
         'e72a4e7b3fcefbe298883020a2347879'
         '21ad8339df26e883d10c5128a2251851'
         '12d00cdc13318164d7d82e099d701406'
         'c31cb94ce2ae5c18beebd79c8d0c8700'
         '2f6233b32dae1db68ccc2ea484da449d'
         '23b3b40352bcbe671300c928bb35efcc'
         '71cd2a5e5936194c8db699cecd3d5d75'
         '932ea7a050228e88adf998e5e807da51'
         '89c1cfd5791d5cc434582f847f0782ab'
         'd3a608b152acd4c1dc6a6514f73b9415'
         '87f9525cef62c392378ee8205a0f91fe'
         '6ee304878778bba5fb364dff683d9a88'
         '130dd444dc54505516e3783cfbe69e4b'
         'efdd6251a5618f9e8dd5b7753ce4a1c9'
         'ab05b0b3acf496b06d0e07bde4dfd7a1'
         'e64c8056f91b63eeef94d3204b81e98e'
         'be150d8d93dd6e0b0c2bcf59ddb09249'
         '986a57300b4e3100777440c0f4fe3d7e'
         '9d49c2a9e8f535d20cfd135317be5db1'
         'e41abfc25e453ebb13feaab8b9c71cb0'
         'fc426a2befabec2161e8bad2a6ea353d'
         '730d723415b7400bccecbea4ad28fa6c'
         '797681d3085b43f157b1707d3debaa22'
         'd74bccf6bfda92751f6ad8e91baaa5dd'
         'f733f6474f86aa221a584a1b22550d0b'
         'a4fcc52e446adb4beb542e2ed3194588'
         '7708a589fc91d783ff45934046e64aa8'
         '1d4ac8fb819284d4a46627c5632a13a2'
         'fa0eb238a202eae0f6bd3994d8949ba8'
         '5a3ece9190810f4512c1946d151e3540'
         '25ef16da5a77e7f24241d10d89ce5078'
         '5b60bbae3a5b470747ad0d3d560faf55'
         'b21cfaf0c2f9bcbd9c2bcde9e037c2bd'
         'e64f153cc713e5325bd8f813b05ba0e0'
         'ba9bc59cb7c632e90e18d34f3603642f'
         '523c4c40bcc7c9a947145954d8f52cac'
         '2c87a07648c838ef2586b43cc3742be8'
         '20dadda8050012bef5463e9949b7d7c3'
         '793f2228fb4714c440d511da17c5e634'
         '67e86805bc97d031b065ee11fe1537be'
         '669f16d899d7a43eccef89cd93c7b033'
         'db62e5d222bb474160961bbad7561bf0'
         '963761e433fb658e84a39be4c10c2b27'
         'cc88ed38785f6a2896039936a7383d73'
         '617c6ef84e0cf1f9b8ddbfe02d265228'
         '6cb957145ca6e58be1657ba31c17dda5'
         '814019c187c43b957d0c5ad9bc8a14f9'
         '9973c2230d1cd3723b3688bf0976bb3f'
         '21c9d48674ffc240d8e8df8ebebd4f97'
         'abd48dee9389d9aeeb2e9f3103be6426'
         '7cb4b3490aab4a3d864eec804b8cb5c7'
         '1e7c99f6dc74756a7309e86f4be37a20'
         '9d515fb8ea9d2672523f4ffbe5497c3b')
