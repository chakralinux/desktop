pkgbase="libreoffice-i18n"

_rcver=6.0.4.2
pkgver=6.0.4
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('11b768edf8bfa5355af22a626fa7d015'
         'e31ca547589e1d943538672f694ce507'
         'f494bd22625d05f940a2d2864061c2a6'
         '7596097f3a9b0394e539a8566167c8c1'
         '33f5948480ddd7172bc9549b9f3a3ab1'
         'c08f99c80068fb979aaff8f93ae473da'
         'b56196906bef8c4b2ce0a5325f937450'
         'd7cbd853cf904a003a2a1b255606fcb5'
         '88455b5ba23dc7a8cc586a0a82bf44c1'
         '6276f9ed2a120b696f72f2d5a8d296ac'
         'c93874a34421120107c316449259fce4'
         'c1d07fabbb92ebb6180d9bc4b2be39e8'
         '27759499d7d28a2bd6dca0e698553d66'
         '3c9ab12f8480fccccc640087d9523b15'
         'e4fe20162b01a7112a8eab0ef66aeb33'
         'd007909d18b39e21149b849e5c9a6e39'
         'b1b3ec37c25e3e143af8f6dd8a0cd2db'
         '05fb7c0784dc3cd52a14b49fefd9a431'
         'e42b65de0d2ef50ca820ea56f2655377'
         '34fb9b495d672d3c49aea74e645c4088'
         'ef65e097215ef6446d6a17dc70c9fd99'
         '8d64c4e4c2b520cff1cf9f0e38a85850'
         '44caa4f4e7c250f661a1c086bbb69f7b'
         '4403b2abc354cb45e0842d29d4cd2bc3'
         'f71496348ffd107b18af552f42c3c651'
         '67f02fa89634b698316a4fae941501ed'
         '9796b7a8eb97548ab46966a5d094d031'
         '6b7a638ea40462e08199439d6e9f8627'
         '2f7a68d38f34857da8907c735b8df8df'
         '7b4497c86e5f4f802f79bccbe682a733'
         '80f58a1a41acda8817864e2b07848b9b'
         '3df9c9bbb487120589a8d89996c0ba8b'
         '3fc010d0e07b4d5ac029322b0cb45d8c'
         'd9b65db5771ec25666ff7145a31b1b4b'
         '480bf67d95321adf27100a1bf754da8c'
         '517ec9ab84ecd1585eca3f9200bc20dc'
         'f7969297e799a59733c3d8f5dc3c177e'
         '0b7172cbc92b2919fa9ec1be08ffdfae'
         'fa6850f0fa0c795157e35e783e665d20'
         '00059e6215573632e7e94ee9aee63f9e'
         'f5c84bf956345c239edf6d6a7a663211'
         '0642709de9fac3eebc5c886eca32cd38'
         '193b9aca8b20de232f03bac34d09e775'
         '4f9e6a3c326f47ffa5cba49afbbb4b2b'
         '3422c12d2283e178ac50384eae869e11'
         '75897ff6dddde248329729f23b071f8c'
         'a61e596bc911ce723993ce142a9ae836'
         '61c8f8a6816e790428be0b5a2b9d7420'
         'ffd08b708e8ddd3842e86763c5180d6e'
         '9092bd2ad525e53f5b4a100148d5f2e6'
         '719d8fbbc17052d6482cbc8a506bb946'
         '311a441606d27b05317cb0095d964037'
         '7246d3c923841d8a92370be43d63428e'
         '185accdb20a3076c3492f184e2d3383d'
         'd9ed138017c3fd237c69f90d9a47e5e7'
         '2e51c42e078c71c4b3e2b45680caa38f'
         '5cf125ab4b8d74b4a36bf035483371bb'
         '1575455b9b1af42fd7d4955273964cc9'
         '2eda0caa752287ee47212bb192b6771c'
         'ae82db15b83710b6e3f9e8e11af2e672'
         '2356736a7012af43c6493923c610544a'
         '7ce1c138e7f511a4eb33a1de360aaa3c'
         '9cfeb90e9b0bfab9141798ec5b2fbba3'
         '0535d7358fca7fdea6f50d7274c9260f'
         '8371691f0e4388d2462aaf3a811a6da3'
         '1e5ad2fbf7c940ed59d6f3148372c0a7'
         '920dffc6ed54d4c5a01fb1f84c5c6310'
         'f97bdcfb37b422601ae7f4a17be4665f'
         '4ac1f9a0d90a633f3c9560d2e395c6f5'
         'fe3210ecaf0d2b49574ac732ec93b72f'
         '71f1713c34a29381c1ebf564e38d360c'
         '2fe20b4a2abb74360a0f4a3736dda6f5'
         'bfcf0b8293c50710825c8d12e6338b40'
         '7917e5b97baf657f211479618e3466de'
         'e547a5e02482604a901cbab917194ec6'
         'ee4fb2d9930f9fcdb1fc156a967892b3'
         '70f5d018cac05254e7d8bafa02fc1280'
         'a57ff39a08de8acb7eefbb969a9b9046'
         'de4b1b18d2d807413748f3b4698abad5'
         'b5ad490e968fdd61945baded2df01409'
         '45590007a4d7ad24afbc1a1f9f18ccce'
         '5b9d3ee13d0049b69afa21e8df987410'
         '1356824113def9ceb2ccc8f48ca6d09f'
         '5be0ed6c844aca2752a0d6ed53b3cd76'
         '3519be506ef52f43679d5dbd378278ca'
         'f17b49da25606dc1279a2b5ecd139e94'
         '8686c37d7eca308ab08ea244b1321378'
         '73836cdd1d4f7ff7fc072dd1de5e0acc'
         'e06a35386772327703e8d1cf6fe7ddf2'
         'eaff6ff896aa9fb84c8bbd118fa723f6'
         '533a05dcab4d700b1f8fdaedbd7e0224'
         'bf40a66ea76960fb8c51d3aba0826fa9'
         '80b93ac2ce77e81eafe250e2ae1d174a'
         'f2d3e5f569ee613592a44bbf4bc107e3'
         '179b5210ef8c5e1e0e7f3e2d02f30e18'
         '434ffbfbb83706c3c2146857a1496f26'
         '5c49d26983e0e473a5d390b2e38cc7d6'
         '0ac43df38db469251d7b4051b13f0615'
         '6d165a7c75139d60e8c66f231ac47e46'
         '3f0b2d007c89ddccfecb87d0fae566ee'
         'ef09b353a33d6f868beedc4bb286d9c5'
         '5323c52583aefea6c76a4d7ba5a59bf8'
         'cefc73a32fdbcd2924d3241cbecd5796'
         '24a284498d2ebf990a1e063f7f07f84c'
         'b717413183b0750c27635544a165da67'
         'fadf76ef8b7b4113d6aa4f49a219b61e'
         'dc9b939843e8cec3cde3ae59782f3ec2'
         '10ca500ce21b0fd5364fc0ed2667ffcb'
         '11f7880e081a6013aedb6ebcf3a3db4f'
         '5ec6b7b35203cc660bcf02d29dcee738'
         'ed33c6df9c79d93af0f83cad6990d410'
         '92ef4fc4619504063072c6951a98c718'
         '5a06157840a73dbb918ce3483b52f1cf'
         '0fc42e401c9568dd84112d0d0102a193'
         'df048256e2482006fc8dce843be3c3e0'
         '635dce53e742940d6c1da427b5eb7333'
         '08eee179e25edfbc1b8ad26050bf9b24'
         '937b0acdb22ea0cd7925b09f97906573'
         'e6cdd60e02712dd989d9963518876382'
         'f8f046e28063596687ee17d4d7461793'
         '9034006d8433aa25273a50afcc2856aa'
         '902ebb3c9ec7d26d24124991eca77f2a'
         'a00a6a46f4aa655b8cc6fa7686ea0665'
         'ca046dbb7883f4791cfc23b720e71b20'
         '137a7ac97918953411ec9d63c3235a32'
         '127ba8dffc5d75dee067843a807a02c3'
         '92e88c872903e503831ca53d01d98e9e'
         '4580398212a7be0bedb28a896926371f'
         '42903d168e669f8cd66d234bd3135690'
         'cce945db7b99c9b67fcc9040a047e3d0'
         'f5f9e01d715a510ef7584262d6344e66'
         'eefbba679137d4d3416a1821e2621516'
         '748ab5080f7276b95dc83642bac629d0'
         'af55ca70c298daad3a7063bb40c092e1'
         '9fb8997b64e0850c1a3c22c391fddb98'
         'f0e648fd1c170181019fb8693610e79b'
         'f747d114f75f668ceaac33aeacb67c3a'
         'ef7b2823d1107df7a663e1bfa9c6a618'
         '9b35dd2302b2fb69cf94a05e6e7023d5'
         '921a5b63d619508d498ab97460f2eba9'
         '790fc44ed36d9c38e27088b8f87e1be5'
         '71b40f14191229018032ae4949794711'
         '4122cd747d16c7bd39081e4c78790eee'
         'ac8594d97d1c751796f89f070d819488'
         'c972a021aed54ddc53bc9898f96a35f5'
         'ae6c10490b71a71d1f6dc7452c8623bd'
         'a9f46fe2b0debbef21418745a953314b'
         '6418ebe08d105b18015fa4cea79c3b16'
         '6b5d835d5c49fc69c94b7017b1c84dbe'
         'fb9755ae286c548002e59899d217ffd6'
         'a6d960fc4dff98ce7e1d6786b2a0c431'
         'e8f9f3a1f270e418827e1ded23ad5733'
         'd4a287027681270ccbf7ceb37dda8357'
         'e68249d99d76835123446fbc777b9afb'
         '0a30faaa92e7f22e1a2161f812e502ce'
         '9d54587914d453adbdbe1a4cd665e47e'
         'e402cfc14b10f737a3316f28e59cc950'
         '81a03f05c35cd408d150f1f7810a178e'
         'a3303f9c3e994c10ec59deedf135ee13'
         '84dc20868c509c0c7dbd1ad26548dd38'
         '8829af24b5d0a1422387468dc97d16f8'
         'b8f791ce845eff3eb47bb907b9687a4b'
         '07b93275f0bdb58a36796d7fcfc4e3e7'
         'af2535fc2ae4b732f753a36ed1de19ae'
         'cd9cee08bb403d122ee3a65dbf9c2f84'
         'c48f100c7b9f07278cef9cda49507251'
         '10fc298f5d4b8bf3c208ee4f6e4cc29c'
         '4d3d5008f64b1e285652298bcb97ffc2'
         '9f647c0dbde0039eb7fdc6342dd22b2e'
         '5ca1d3643105e338413ea9585c675a73'
         '15bf04639c57fc56f71cd75984242f71'
         '6c175072bb128468da1af4434588f1ef'
         '9945412265108728266622ad28184497'
         'c01a7bb39a31907e18038c996e8cddad'
         'fcbaa3e44166b426b2a5e1df2957b1f0'
         '01d3d57d99315f02b096b58d7775b271')
