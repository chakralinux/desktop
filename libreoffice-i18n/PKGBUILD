#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.4.3.2
pkgver=5.4.3
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('3cbe861092c1ed9884d6c4702971c12c'
         '67d5e205d3526734dbde5332834ab3db'
         'c3fdc5eed8f33ee8b6433a17bdc80b8f'
         '57965206ee2e2648fa899ed042193ba9'
         '9be4fcbb77ec46a9f1ba7fae0d11c1e8'
         '4e4a7c878179201ca229bf0b9209c70c'
         '2b3a83546a4d9a3b0996e1ce5ec9c057'
         '5f3d8486f14d3361786b35e2b55d47fb'
         '5fc85e768188ad84550352c32072d407'
         '62daf3cda4117fbc499b3fa8f083f3fb'
         '2f20bcc9faf7bbaf0f659bedbb5fa8f8'
         '66351e16fc3707b39be20c1dc5d718e1'
         '778f9f6f3a2c342478701ffe9a1d10ce'
         '5200b7a0e26d71dc9dde85d4a1011e8e'
         '969d0fa356ffb01419edf831cd56d0f7'
         '8dbcc08732e6ee0dd98ab8c55a20ee40'
         'fd52abad32e1600803ad8da62c4f34e5'
         '7ed97169b1f0ddb3e473ef23458dd638'
         '3733d93dc7adfe9a2a1d6ecaafe32c58'
         'ea4143e3c6790671a70304cdc09d1683'
         '28fcc738deaa686145eca79f76d365e6'
         '093dad4900790c93b819f0c8cd593a5d'
         'add70eabb9fa16997bff4217525db851'
         '6e026478fb29505453d1eea69b2a8ba1'
         '1d6b033b9c9d100fd9b0beebaeafa8ba'
         'b5aad7e8024dbced0c532c000e301364'
         'bb9b9110b1629a6414e794b54eb5e8ae'
         '454041536c89bbcb3935ca8d41071252'
         '1e81df32edf0cec2913ebcba6bc216e1'
         '5049deb1aeeaafa21a46a6c0045e18ee'
         '0e8f598c2460592c274efbb0e5fde8d5'
         'f6840e8de8989d69fc7b6efe10bce2b6'
         '3ef7ae39bb9c8dbef381712c69ac8f41'
         '7e437914b402c0bddee8a9e2a3bdae14'
         '66395eb82dbb382dd317ed7664840478'
         '4b835632158586a43423a8252a343826'
         '58a092050766212ba60e353a2af2cb64'
         'af66c49bb8865b00b0fc316b4f3d3f38'
         'cb32d28459ebfec26450daa1a6f013a1'
         '428210850985dc19142426eb0cd9a036'
         'ce1d3036589e57b8ff654a8fa0d23cfc'
         'd4ef71e3c5783426dafe206b07bc54be'
         '09335d31dd7f6583f7b071d5d66b82e4'
         'cad6a13a9e5b528d0fbbbac57f059e36'
         '00cdc54cab27a1902e080299bba9c2bd'
         '48b17ac66f0336931974050b9396bb37'
         '11d7057a0782167d1e74f5759b8034b4'
         '5828a703f77f0d9b4e8d027c6a5549b1'
         'c6346bbaaaaaae7564c9baef14e1949b'
         '16d91ec60203d3441082899d9d5d73a5'
         '4a3913325d8a74fea99c87ebd7da6e06'
         'c625cc33dfa6419545207e98e3949f6b'
         'bce86b56a24ea3d86ad114bf30369ac3'
         'a5966d71289db7dec4dceb2ddca9f307'
         'bd5e8ab0f802c7a6d891c38be2c2bc4b'
         '7146e637e99eb2515aa53eec8ac1e709'
         '72f7b1f46171c416e3e2a49a6e099606'
         '7a223ac7f6e1e63e9121a08a323f78c1'
         '6864994b5e2a7525a26a2ab2e0954bb6'
         '62117c6ac5a4fcbdc2cfe4cff2f8bff4'
         '03d30081ded5376735586be0ce446141'
         '2e399f38d046f355087c671a3aec16a9'
         'fcd2ae4fa6de8684d100e00529358fa1'
         '9481356427b8d51196ce31472a1c8a8e'
         '4814685e9e9f2c00f09f6f503152ec3b'
         '6275a3899272c35d084932c528ae60af'
         '4a3507d3d695bd4c629513a6276585f0'
         '5313f0de33ebcfb38e054897342ae6de'
         '37c221febeca9d502375dd60fdd2dc9f'
         '6f7561e4e6b7aa6301a038681f49c985'
         'fc96462caabe5a455fb39f5a829f60a7'
         '7fae026edf767fd1ea42aeb097f2641c'
         'ab42f2af4d912959f006d38b9840cc41'
         '72f4672a4f14ac0cb7a6d659f2e8546a'
         'f5022f6d8f18b5971734b48f25ba1c5a'
         '60cb235022ebce11280d57b9ddb349e3'
         '9c2c449c48df5d80d055f46909dbcbb0'
         '08e777544cc6ac6806401143017e383d'
         'baeb1af4dceae4e6454a515b2b9e1948'
         'a3f7c36ae25b3fb14616b37e45faefdc'
         'fd95035fbe8208e1ecb1de1a470bdaf6'
         'f97a5fc410b90495b7442e7138e65cec'
         '26d5e5f7d5f0ae6ba54083a77e29231a'
         '7c9e819913a1172d69bc6b9712155f17'
         'edfecb0206bc8bac578b24603055a0c6'
         '449597149b528f376ed68e87e4c7c909'
         'fc4169e0fc13bc84f523c83eacc7129b'
         '2833ea6031fad1532b1777c59c642b09'
         '246b0d67d2e773fa5f99c0668fbb04c3'
         'f806680673d8a63c2ac163dee894f6b5'
         '0a96b9249b65bcc37a1392aae90adfe2'
         'be438f743dade81bafc80a678c8c7bab'
         '272146847920ad47bc131b114fff64eb'
         'a95e3e16dcac3b12eab7c10908f79f75'
         '93b11d5b6bd7704ad826209509a0a242'
         '52cdd2b2cc6905c9847f9dfad927210f'
         'b0455c9e1f2a3e4bba28453e8c5290e9'
         '9e8fd4aa34f7e4b398d8175831f7e332'
         '30fd036f9aec774a9e759351b81cde84'
         'a69c76db7cd02b22170a97bba2ca7414'
         '7827070191b4c2d7d5d3dc901f393e4b'
         'ee9bb0236dc8b4f480c8444144a90742'
         'cd2b48d3b17586977c7bf6cde48551d7'
         'e875bc72a1868d568c93da2549f57300'
         '090cd39fb7e27ad49328a91a70709649'
         '9e332dcce6b04b1a7a37be564ea7f77f'
         '70dfb342a469478367f89c1147302ca7'
         'd486421db22afe58fd64a1845664d928'
         '6fba1caf3cc3056f2e680dc52a1732da'
         'af40c57b2fd42da62c40d618c2814d9c'
         '8e59c6a799e43ee48e839e842e28e486'
         'c7b039a9c92bf83cd6b14f3f2411053e'
         '72ad8d2d6c6514dae4c2da830a9c4ed1'
         '2beef6026ea07c5ce42a6861586e02a6'
         'd267ab230de5cb256595fe59596fb536'
         '1614779fc347fb2b0124b7c05fe07057'
         '6f6b1f6414f85bf95bcc6a5a5c8ef743'
         '3ab70683c57227cb3ce42c0df9d9a656'
         'b9454ff27131c6a88a0b43c313b46b8d'
         '402eba233ddb1c8b40b875584daadca6'
         '898aed1d03b0095a8583a8c2bede61bf'
         'd2597c97815c10702cb4193d8f6ae166'
         '8236b940c05f2579d08715624728f34c'
         '460ccb1c271979d94c7fdfcfde17b44d'
         '14faf309870683f77a6df064fe1b226d'
         'd9120285050989c3046e54969846dbee'
         '8ca53633dabb9aea30d34ac2d9a3aa7f'
         '4d6626ef92bcf8c605f30866e40f6329'
         '5b3b209a73578c52fc7f855ca408e36d'
         '9ddd85cfa1e2e80900bfa91c967321ca'
         '5a853b8f4747a9d78b5f4f4d73582690'
         '220065303eeb9b4c7849d07dda7c2263'
         'eb9d71a0d3ffd2b84eff7b2ad067dfb7'
         'a41f0735d15bb5ddbbe9002744d9cca8'
         'eec1efd32af80be7faebf331bb2a8f36'
         '4d6ee2c6cbb7e99877fec659d865f13d'
         'afa007476d13de3a0eb4817f1aefe48e'
         'f41ce11692e562bb0662056941e51608'
         '902d2bfd540f03f495d86bde566a4cae'
         '218452e3e22fee954672fb05f7900ba3'
         '2ed5f67a67084e1fd7feb50e3f77b09a'
         'b1fe59e85162ddd23799fece5851f638'
         '872d6a6ab113a71ef44b0c94f0533348'
         '5806b022d1450b73ab331968194f1a55'
         '8272255ff8a9546c6106206e74863a43'
         '82fb094aea8f302487229f3e79cffa3e'
         '105b8c13c9562ffeed3d143a918a6495'
         '5bce789e3e85c4e0e98abbc76e63be12'
         '2f4dc4e955f1bcd19ef5bb87873167b6'
         '3be2371ee8c5f064cc812346baa389ad'
         'd908cc98857211ae5eb2dad90b9e5f1b'
         'f4529653488b61a8444c6a5f07945dae'
         'dd59d47248b9eb24f7db477dda7eac91'
         'b18adb644f86bd46170b2adc99603dca'
         '5463dff4bd2fc7647c96c9940dd8ba0d'
         'ea0604a7f2c205fb2c339bca90eca11a'
         '2692896a25674fd6622aab9dc5dbb4db'
         'f27135f204da62322ebf18bfb1a2a0c8'
         'fd84ae8d63c1ff5c2b51f3a01839cebc'
         'ceb6c71dcfa7d39dd98c2ff2a27d6dd4'
         'be92059dd1b88f267cf6e6b4bc96913b'
         '9d60c154a9a240cf9dfa0b55d2ed3c9b'
         '0f780cbd3ba9f6e38c8641b22f469b37'
         '31052ab3a23827a156226b9b317b7ade'
         'b59cc9576e8d6d2d89b6789452a2bc1c'
         '81bbb5c241cec58e8cb9dc2e971ce26d'
         'b5f8cae3b117fc5dc76f2237e1414df0'
         'a8ffe4c5b7b39274dd58622fcb21d1a6'
         'f6fdcbeb2fc6504448614f66792fc59d'
         'd9a06b58e3e9153e04f32c383290a4a4'
         '940201d75ecb9a09d4c34bb70ea47ea4'
         'bded50e9c06543320ef6ed1c90e72e5a'
         'f18c9663986ae7dff05ffeb2e5a673a1'
         '45e59410fafe89a79342039abbf447d5'
         'd2fd97a37dd266b49bb482cb1a878521'
         '0f9442d1dc75402aab3d06470c162fb6')
