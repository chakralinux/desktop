pkgbase="libreoffice-i18n"

_rcver=6.1.1.2
pkgver=6.1.1
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('6fc922846c5896d182f5d157737c14da'
         '6e1789f96419fd2664f427bda449c5de'
         '228285248155567b4e71256715758e32'
         '25c7743e4da914861b5353ded7bc7a57'
         '1d34651332ca4c45636daeded758b86f'
         '4b2b49caf8e8a154ff27e9249f7101b7'
         'ad8d396cafc2722cdb542562157f3dd1'
         '9c8883fa683b2de45c13282d4b2fc5ed'
         '250910c640bf6641ae68c8d4cd5372ed'
         'd6c0bbf0454559897a7c720f22a52020'
         '653c6e914aef7f152992a430e9c1b3ec'
         'ae56b419ad4efdcc14bc28300ae2fb6c'
         '3721f0baceead0a559f1506ca008b31a'
         '5a952b521dc78fd23ea30e01d6e14100'
         'af1ae426fdacae2c00d8ae7e81b7a96f'
         '11cc746ab0f3faa3cf1e1978990e7f10'
         'd19d0ecaa865043637e9faa45d424e17'
         'a89f9f529cfdc6861cc7d7c211e45f3e'
         '3dd9d97206b0480cd40a76dd0a6d91c7'
         '825e72d8beb07bd62be6aefe315a83dd'
         'f5dad01474394d327fe0f82ac3d79f7a'
         'c17ab79f0609baae4f9f0d680452ea48'
         '3b57722cdb43e6d08dddc9979c042346'
         '5ea0903c76af2331ec6f14f2a46adb52'
         'fd297d83b5cc6df08863ac1288443523'
         'd4bf7db7d85c6a98c3545eba39925215'
         '45ec7bb71a73c8d9e8b3618fae5d136a'
         '221a44ee3819ee7729590268c14449f8'
         'ca4a7d4c1fc1757190996ef9bf21b2c9'
         '42721aad2639658edb62581ac36f7a60'
         '6d8fa25f65292bdedb0c75169f5c1928'
         '1d9863175d464c5e0536056e06c673bc'
         '7c2b97cddbd96685e33afbdaee3182eb'
         'bf0a3a7d337d6ead16cd7a92e3452f89'
         '856c264c207a2be3fa9d8a08451c26d4'
         'b65ae6b94f7f6e52829c9ea0d48e7b54'
         '92ee6bae4ff99c61b5798a12c10a8753'
         '1c9ff4003652fae78261add87e0daa9c'
         '34e227cbb96fae712577cf5d996f1794'
         'b7e5bec3c6c02ff3d979362056328230'
         '9a280f03fe5c91d9671702bc73e8cc07'
         '31f4561930ca37cd27f25e579a5f836c'
         '4b725579c85ec5ed6bd65e9650e7d9ed'
         'e9ec9c54d03f3dfd97b229b17c7b35a0'
         'deca7b508162cd5cd9e3bde4e74dda23'
         '4c645062115d333c24ee0cbfefddfd8b'
         'a0daad4ca415b47143ba55575c3052ff'
         '4ee1dbe0f9f661f3d854fdcffed12590'
         '9c99e93a5c142c2db598d01a1aa2801e'
         '1707b2d43552f3ff472fcb2ee5b2e23b'
         'cd43fde7fb3fbdff217d605b432eb2ed'
         'dd8a08de845aa44b746d3f7870513648'
         'b375d6cd2d33af33477d7e9d6557669b'
         '8dec53f80c338cc331e9cf988c58f186'
         '1e52747e4004b517171946dc6be2f6c6'
         'd7a4bba5ebee4daf566ca671e9b56b0e'
         '902c2b98304479e39ec2f9ba5600b95a'
         '717e44d3d982c48f6611efc3071f52cc'
         '10c2a1e8af206f0fcad868e5a4903dc5'
         'fd07abbaf1ed955f8be28b4741ec2ae4'
         '8e15bb5c74f3d1e9348d22fe3a4a7924'
         '3c49ea1343c69adbd62531c0b7c386fd'
         '563adbd83ca8da0169bb8a3474c5cf74'
         'f02cddaee65c547655891ab77d39dc12'
         '149e6c5afa285b123ad650093fda35bf'
         'c791372ffef1a32ea2e35ac217a3af2b'
         '9f7af0dc48e1c1282e92db0d25bdcb11'
         '237be00fa855d87b499a9ada03878303'
         '2892e3e755d26ceae33176fb139a2e5e'
         '7cd3075c441881169e92c6bd8dcbfb80'
         'f6edb8915ab2caba5d269e95c10156f9'
         '9dc43801d64eb41961c480ad17f53120'
         '96e59a3f41c192de038780b3988f7493'
         '0311e5338658278d625593f6546ac353'
         'aec007b2ace33b7f38b8901af80286d6'
         '00bb986b91117250ee4e9161b0e77636'
         'deeac7b3369bf5189e3bdcaa676a2643'
         '36562b4a2ddf66fc5d2a4dd4b063ec9b'
         '1e03becc895dbea0e175585a79facb2d'
         '27507c8782c1bde478f5e581ecc416a7'
         'f5fc53196fa7449564bdbaacf0e61b5e'
         '2284e896b162673c443118dcb8e1ba85'
         '376fdf669c5c3620ba4072ef00fd71b6'
         '173df57a098b629117cffce7aebb7ea4'
         'b804a0dfe7ebdebf032a6eefce2c8933'
         '92dcccb5c64e9972a13c14f14f783de7'
         '4e2b69f942b166349e34c8c07459c181'
         '2123d14bbc0dc1f7c881d8b4d4bb972f'
         'f5abfe8b39e237c61ceb361cf802462e'
         'f8422e47906409a482514a1e5258ad60'
         'ca0f6d5d426a0cedd51aa92ec23c140f'
         '3bd2210e5b205a9bc492220f6ad3d8e7'
         '17db301e07c5bdc9403979bd303645c4'
         '9e0d18ec7373409bddf77f505c23e16c'
         'fd0634f75085b20489ccb7c1e4dc4a6c'
         '1a01eccae03d144d2a42d60a0063c96b'
         'a05b43ca74e671219b6dbf5b68a1012b'
         'e3b8caa029f31366544e270f06ed9642'
         '907f226eb0f66b2cc435c968d0a69511'
         'b2b68d90608c94a696987846766f934c'
         '8c951d5acfad6846b2eacee3ea604672'
         '46a75a3c92a2385da0cd7b05fcfd17b7'
         '940f7b679921c806311cdcc2b81e81c3'
         '6ad95e38442ad1dc2f1ad269075f8627'
         'aca4512815c7d1057d9b69c06e7ce8e6'
         '1781ba9d69a54fba3b0d0d61fb2f29a3'
         '583b55a523c9a746c466fa4769810e19'
         '9401bff9cbad3e61b0966fdc0d8f602a'
         'c5ebf50e072d9dfcb9b70f6dee1dced4'
         'd0c08221e43053ac0be8b382919e5e7a'
         'cf8f5e2aef821d4c66fdaeba8175d785'
         '657424869316bbda7a86823ca514e635'
         '203d0592a7c47fdce4ac44490087dea0'
         '7a16369b7b4d5a7ed3c80562cc3b4158'
         '2c339c1be753cda01032f88feb898860'
         'd6e3c81b5f8adeaad970e327edb3b752'
         '3fd5b7244ac2cb9c3602334e8b6f74a6'
         'f1929d5bebaa929979ebcfe7c397bd9b'
         '9a77f2f727897b5b84b11ae6cb5ccd13'
         'f98f1d2992142fecc3faa37e74e2ff43'
         '3ad5a2291facea96ab66e7fe3e634d2d'
         'cde0edd0f4b729fc081ced3afd98e4c6'
         '4c9d237a8e8147c786ef17dc1c9cc36a'
         'a46521b90a8bfc0fe0dc69801de1131e'
         '6295bbfbf8f63c6b315338f2d05a548f'
         '306d9daf9daa0839d70d3b40d603cdd7'
         '2ba7264808554005eef07bf7e297f7b8'
         '067d754469725abbe9b2de9c060813dd'
         'ec2048663f3501e91b40bfd2a9d3dc47'
         '028f5a20bb393dc5fc82c322ded0cff7'
         '0d45541302a57b6637cc9a5471f5e144'
         'b6b433dae896d9d4afb621d14186d8c5'
         '80cc02434a53d55c91761a79b6be0ca5'
         '7e41f9bd842eb6cc9dfbb21ee93fa59c'
         '6364edb2de7052c5054bd88c1b96adef'
         'b7824d79d3a1b1aa24dc6359ed7332b3'
         'fcc260ed2e65fc0808bf357b9b1d9d17'
         '02492e9409c604c65a3f42528ea946fc'
         'c8576411ca199945dd4ce47b47ac4f2a'
         'd551ce104d4c266798d0c8644969aea4'
         '0bb0f47149a6b1a9634a5518c85958b7'
         '0fb0d6cd4abf2579b3a4e2d21aea5649'
         'a68fd992a53ad9ac8d031d31d4b1b04f'
         'f34dbcccedc1c13cfbbe15a089945af9'
         'b245ebbc44b58f4349673b7b0636264d'
         '361aa6e7fba7aebeb0bb62ecf45904a0'
         '9661eda36f82d0377cf169116fb4ac12'
         'c9c460f3a068db0343d7846740c9fd07'
         'f48b216fb0c165b817c8b3cb60af5317'
         'ab94eb4b15b6f51397f95508d6c6bd0a'
         '2dc3f3a31428ce1bf112282d8f293df9'
         'ccb386ef44a9a5d1a574da23783e5183'
         '73ed5be147aebe957a65925c44bdbbb5'
         'cd5ebcb6eb1ff0ce53d23008fbf10ae1'
         '63e2ab22ed1f26e5c52922cc9a320c27'
         '8229ef36d41e60a5649614e952586676'
         'a86c42782f23ff54fb16e9ae32880066'
         '03dff43d77fd309e45265a9409547fc0'
         'd237dfff64385eca65352ff1ee7bcbdf'
         '31ba60bd25313c7c173c3c71fa05d14b'
         '5f7bb44713e162fa1b8d880c9da22192'
         '057ac211e06417dcec9aa6171e9b5e5e'
         'fd5eab96bf5a0912fbfef13cf02a4912'
         'fa4e6424b1af812f21a29ab20556b30b'
         '4ef57454830c4b16b98ff751e3ffcd5e'
         '27a6bf0b4e4dbcd2a1f36fad5465fdcc'
         'c1b8b06be5562e7f38535932f14fcad0'
         '5fb3faddfaa737b33c1c26915c9116e4'
         '0c36e09c986160d49c8591b461fc14f0'
         'e3cccf8cfd38c18d1a9939bac3257c0c'
         '7f494f0688a1da14a15b97d8f69143a3'
         'd9c110ddd245d270c19e5ba03e732d3e'
         '8a67610e2c584aa1c04de514ce1098a6'
         '5714105a17f08ae93b0e8ce554442686'
         'cd561943f6e1b21a15b64e3df8f4960e'
         'e12974ff5dabbe0c9c4c726f17181f7d')
