#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.4.1.2
pkgver=5.4.1
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'gug           "Guarani"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hsb           "Sorbian (Upper)"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vec           "Venetian"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('090982daac9e0e3a617bd9d6757626a7'
         '555d1b803bb1044149caddb92a4f7949'
         '14c4278edef9c56151d6dbddd4e48e16'
         '9962f821acb8594eb91af459a3837450'
         '34e41fc3fa2f7ed0f75d376b4c730cb4'
         '8446820715db814f33f2962991ad24f3'
         'd9333f2450b9a2f598493e64e6191b02'
         '76210cd8ab859690b13d01935a1f2953'
         'a562aef475f995b9c95d77cf0a2c9e6a'
         'bb056846f5dafb2f145ee070f7ccc75b'
         '66a12fac7726df26cb527fa38dd1db39'
         'c7a769f5968ee96f86a2eee04f6a1faf'
         'c79bfd36634acb0152ed367e3a3cb12d'
         '6bb7d2273e935069d4422ee1c505991c'
         'f27d13e55d8cae1eef60c29513b184bb'
         'c1297fc254c720c86d4e39b077ac2f54'
         'a98e84f49c182a4431d129b6e287c203'
         'bad1d52bee19e1211ea77ae57093e405'
         '79d0eaa62122ed8c6bb2a3d1d61d786a'
         'd6b444a80342b210e3befce5455ffae7'
         '27de4a4c972347a6d8356f68e1f2a798'
         '17abb3f8dedb1fe75f706a4280b2de1e'
         'd6c3a5509b518a155bdc549f147040b0'
         'cd25a18cf43b8bba8127ed69271583c6'
         '43779a2ba3eecb20edb5a5317abdcb39'
         '816fd4f972bc2fec186daf1851dc5876'
         '1be63e202fdaa3b8b319acd74413f46b'
         'a679035d54e3266d8de29716000cc8c7'
         '45f2142a9892339b2aa69ea9d7faab84'
         '9118c0502effa761b6824030f4e850c4'
         '99510f1fcc8279e82cc6ebc777a9c527'
         '8dac192cb4d59116572ccdd99905e725'
         '5355a52c16f71069308b2bb1befe91b4'
         'ea5daa6dda9bedb2b4eebe263a8585cf'
         '37823681db81fd70052e2cd6bf22213d'
         '9b9e30331fc558af787ce58069bea25f'
         'a4c33c5424ebd2e9a1c8f689bcf9f0d0'
         '86b2c97792e7d70d50f2ecffd2317b93'
         '7dd88f42a69104c27398c0571cbba3ca'
         '71fce19211c82a26111e373129fb964b'
         '85af5f97c2767c05e9a8d131e0de1499'
         '7b835b2f0f1d36e8f650d5bfcff7692f'
         '29c019fdca8bce7d8bd70a9add190089'
         '03cd3f516e14ea66c26a68ac6b24a33e'
         '7bbf16b3f7cdbd0025fb2523e8c56789'
         '9a3b4ba73a837cebe3e03fde2d4f9fb6'
         '974d27660cdce5e843bf4916eb949c21'
         '9003896804c23c9ba57e432374626446'
         'aae0d70fe6a4aa89a0fe2f83b5bb0cca'
         '505d40234575f526af9de8da7c3dc658'
         '5b1f71be42071dc5adca7a29b8609f55'
         '517c684a1ef92e2d6e44bdc42b3d45d8'
         'c2333df32ed8f1bb63bc391a148841af'
         '83a80af6bf71eaa46305d59cc1a14294'
         'd50d2b76db382b9a8ead7a636a2f604e'
         'd3027bbd41d871286bfc2044dcf42889'
         '9787203b88625c58cb44f9522b35c7d9'
         '644d809175609e9b9061ad33e2450bb1'
         'a0a2fcc7b2d4bc761f59a64d7d646966'
         'b64e6c0279842fff3927394af6a4ecc8'
         '4308d0b776df87ec440bb9002bbcf1d3'
         'c147a0e332fd926d639e138aad01f316'
         '694a6353ea74f8f53c0420fda9a8b792'
         'da0697a8656b66fb0676dea94cb8d7eb'
         'd4e1d5eea85246aba0ae39742c20aaca'
         'a6f3d0bf221575be13ae2ae5419ec373'
         'dc635546964450c773490db626296623'
         '787f93e9ba409593f959a48ea3114702'
         '153393018ea2a8bce3da897efd64966e'
         'feccf0f1f279f08c47b0abbf6b6530d0'
         '2ea2eec9b28b9384f89c4ed442dc20d0'
         '6d9f3c26fac66e3337a5e2bd39d2fe39'
         'c9e2df70fcce70030cb877fe8cbc532d'
         '2375c0423fa9e9dcc02ca3623672ea28'
         '0f6d63a7aa5fbd18a7bd2d5b214af5d5'
         'dfc170180a26a0c6007950dfd4d6734c'
         'f7376944c06113515b1e9c67bc7ab587'
         '3ba033fbbd5bd8af14d6a668366f8c30'
         'ed5ef0762efccbc065e37a949edade14'
         '2ed46b21cb75f6045a29836db5cdcfb3'
         '7432218b989651d5da3647c4ce4957fe'
         '95ea6a01f893115e43796148e65d874b'
         '90df1e40754c985936335cfb7c0d38c0'
         'be7babb533382499d698271591b8d415'
         '2c2f9d4a592281374f874d32b6cb4a04'
         '9031d8b111e192f02efcd5a44980379d'
         '2b26cfc18fc18eb1fb157cfa33168018'
         'c999ef759d405e05664fa23bcdd88067'
         'e74c1c3f2d4c60a979b6b1e3d7e1e435'
         '0c3673e117f4c6e6c86bf583f13c99d1'
         '15f491828620bbdeadff14401010b88c'
         '98f2e90332e2d9b7389672d7cc2120f9'
         '2934d5d4c91e7c1d04f5acf827125dae'
         '0fb370be25a59a867650ae3c91097927'
         '9dba82fe95dc78a2e6782604c0de12e1'
         'f5d691c8f2f65687128f3a1de6a1b73d'
         '4f5f24733691225b47e829e90c9748e6'
         'ecc3f6c5ef67c1784df4aed0d005d695'
         '541c340db90bf7bcda87c38d85e713cf'
         '5e2c5f059ffff832f8d45e63c3450d12'
         'd3ca3fb4e81d27fcf5e1b230cd248c9c'
         '0f3bb821d02c4c6b88a4dd923eaf48a9'
         '30221f0d382ec2e134f0ac3b758a1ba6'
         '1e1e11d475be704dff6a1c601f1c0506'
         'e37e75e7f286b1fb15a7ec8c9798072c'
         '7718d3ebf3a8cef22c2d9624b8d7adb8'
         '419a90fb3be54f29c64ac3766a6899ea'
         '0f5444a1c034a1df94a455e246e267aa'
         '6a2ca28de60e64720106d3e12093321d'
         '96ec6144404c08a971416a801e7f29ca'
         '3018f0e6eed126cff7e4970b4e23f116'
         '33c3ba48b2b6e2b7584df101af626353'
         '6be6b23430c73cb807c8c8b8e8e8add0'
         'c4bce4990154417e63b018f1ea694ab0'
         '150012e2fe96dd8c5c488f59400d3735'
         '23e8551eb754f213d972f6a79a91b1cf'
         '8735640eb5a41ea0b641ce2e39eac99b'
         '9b0860e3e7cf21937f547e3487cf80db'
         '4c9ea2e165666bdb61481ed1e83d72b4'
         '0681a9f94db89cbc7b3fb9173efcc92c'
         '5385ada275ea5b25d1f217c1e96cf636'
         'ab6dc45deb37c44ae4a8150044d26e7b'
         '249909f73d8a2a825e9c1e19eced698d'
         '93721d394a32d8d3523104ecdd4371c4'
         'ebee5a868eb998536df45146b4e6dd5e'
         '3b06736a836fdf0729e01cbc717d7381'
         '91eca760da4222cef55b330cae1481ce'
         'b7a24c44cba6cbaa9e5fab1f0269d319'
         'b473d69857d3bb7f742fb16a2d69116a'
         '8e5981a39f966ed47cfee54841547d1d'
         'd5ff35f8132653121d81d2adbc808c69'
         '6acf4636e01ca3b8d0088acfbba61a71'
         '80491bd5afb437f4f71c10eee105ce1e'
         'dcaeba64621aefc40ebec905da0ef296'
         '08e600809f8b66269fed161c2a47f073'
         '3077b3af58204a9f20049255050aa700'
         'e2a03b1f75d3849e269b3d69389884d0'
         '3b925c02aef629494321c2dc59b22666'
         '94e49da1a466c74646c2a1ae9fcd570a'
         '2e4d20021742a58e5e85393e0a1f9ef1'
         '3d5df8bd9a177906cba206aef0607bb0'
         'cadbfe7da2b58955c64abc9c0b6f7731'
         'e487438511a9bf5dee01ed6af1af12c9'
         '41aa6a9cf174ea829b9dd718858a172f'
         '572967b81761b9650641dd7c1193e48f'
         '4b80d8abd618924d29f127017b023609'
         '9e2f76d1ccc374ab11b5fdac98b699f1'
         '4f8af4a703963536fdda4329f34e42d2'
         '47921984e3700063e6582ae9ee29cf99'
         'b4613378551497c36858575065672274'
         '6b569b04c1926c092d40d1e88bcfde1a'
         'b755a1388aefd6d4acdb1841010ed963'
         '9d23dfeb34f2eaa85d19b170da305350'
         '8751a1a045c10272fd1325f4dedf1d09'
         '1b1df0d6aa2ca2e71b5a8393db5b062f'
         '18f4d098dd5edb6098116a87587f2932'
         '5e041ecffcef5ea353c2aad286e2df5b'
         '882e34b8fe9fbf7e843496ac2c9d4e2a'
         'c5df49770816ed1ada8afadee5495d37'
         '3dadc789650bdaae5983742063f235e1'
         'b9ba1490623a4b1aca617d5fec043981'
         '6204f7813c5021055881d7e62d3cc487'
         '412eb0401bb531ca4b27dc7fb90e7143'
         'd50793ad4be6be6ba2dd981313940e48'
         '4042c719f2f0d43b36654ac9ce5e76c3'
         '2d4faf95a5f8548349bd92f1525d4d6d'
         'd0fc392dd710cd47940cda1b12cedd4d'
         'a8130f49625ea15549630923c71ec10f'
         '7840314b1386b509a493343ff88ce6df'
         '5d881db203ef9065117ec2d5d97abeaf'
         'b21adc17cb09e52004d9bfe561cb7974'
         '5b75aeb1119eb77c712d84805c988f9e'
         '3150fd2135d4d52ffaf6b04a15c89925'
         '041ac38535d6951aeb40541cc8a5f520'
         'a1f664795253c5e102493af3bfe7d658'
         '0717a1309ce3673dfefc5c270d38943a')
