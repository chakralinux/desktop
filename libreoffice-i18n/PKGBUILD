#
# Chakra Packages for Chakra, part of chakraos.org
#

pkgbase="libreoffice-i18n"

_rcver=5.3.1.2
pkgver=5.3.1
pkgrel=1
depends=("libreoffice-common>=$pkgver")

_oodlver=${pkgver}
#_oodlver=${_rcver}
_dirver=${_rcver}

arch=('x86_64')
url="http://www.documentfoundation.org"
license=('LGPL')
makedepends=('rpmextract')

# http://wiki.documentfoundation.org/Language_Teams
_url="http://download.documentfoundation.org/libreoffice/stable"

#_url+="/${pkgver}-rc2/rpm/x86"
_url+="/${pkgver}/rpm/x86"
#_url+="/rpm/x86"

_languages=(
  'af            "Afrikaans"'
  'am            "Amharic"'
  'ar            "Arabic"'
  'as            "Assamese (India)"'
  'ast           "Asturianu"'
  'be            "Belarusian"'
  'bg            "Bulgarian"'
  'bn            "Bengali"'
  'bn-IN         "Bengali (India)"'
  'bo            "Tibetan"'
  'br            "Breton"'
  'brx           "Bodo"'
  'bs            "Bosnian"'
  'ca            "Catalan"'
  'ca-valencia   "Catalan (Valencia)"'
  'cs            "Czech"'
  'cy            "Welsh"'
  'da            "Danish"'
  'de            "German"'
  'dgo           "Dogri"'
  'dz            "Dzongkha"'
  'el            "Greek"'
  'en-GB         "English (GB)"'
  'en-ZA         "English (ZA)"'
  'eo            "Esperanto"'
  'es            "Spanish"'
  'et            "Estonian"'
  'eu            "Basque"'
  'fa            "Persian"'
  'fi            "Finnish"'
  'fr            "French"'
  'ga            "Irish"'
  'gd            "Gaelic (Scottish)"'
  'gl            "Galician"'
  'gu            "Gujarati"'
  'he            "Hebrew"'
  'hi            "Hindi"'
  'hr            "Croatian"'
  'hu            "Hungarian"'
  'id            "Indonesian"'
  'is            "Icelandic"'
  'it            "Italian"'
  'ja            "Japanese"'
  'ka            "Georgian"'
  'kk            "Kazakh"'
  'km            "Khmer (Cambodia)"'
  'kmr-Latn      "Kurdish"'
  'kn            "Kannada"'
  'ko            "Korean"'
  'kok           "Konkani"'
  'ks            "Kashmiri"'
  'lb            "Luxembourgish"'
  'lo            "Lao"'
  'lt            "Lithuanian"'
  'lv            "Latvian"'
  'mai           "Maithili"'
  'mk            "Macedonian"'
  'ml            "Malayalam"'
  'mn            "Mongolian"'
  'mni           "Manipuri"'
  'mr            "Marathi"'
  'my            "Burmese"'
  'nb            "Norwegian Bokmal"'
  'ne            "Nepali"'
  'nl            "Dutch"'
  'nn            "Norwegian Nynorsk"'
  'nr            "Ndebele (South)"'
  'nso           "Northern Sotho"'
  'oc            "Occitan"'
  'om            "Oromo"'
  'or            "Oriya"'
  'pa-IN         "Punjabi (India)"'
  'pl            "Polish"'
  'pt            "Portuguese"'
  'pt-BR         "Portuguese (Brasil)"'
  'ro            "Romanian"'
  'ru            "Russian"'
  'rw            "Kinyarwanda"'
  'sa-IN         "Sanskrit (India)"'
  'sat           "Santali"'
  'sd            "Sindhi"'
  'si            "Singhalese"'
  'sid           "Sidama"'
  'sk            "Slovak"'
  'sl            "Slovenian"'
  'sq            "Albanien"'
  'sr            "Serbian"'
  'sr-Latn       "Serbian (Latin)"'
  'ss            "Swati"'
  'st            "Southern Sotho"'
  'sv            "Swedish"'
  'sw-TZ         "Swahili (Tanzania)"'
  'ta            "Tamil"'
  'te            "Telugu"'
  'tg            "Tajik"'
  'th            "Thai"'
  'tn            "Tswana"'
  'tr            "Turkish"'
  'ts            "Tsonga"'
  'tt            "Tatar"'
  'ug            "Uighur"'
  'uk            "Ukrainian"'
  'uz            "Uzbek"'
  've            "Venda"'
  'vi            "Vietnamese"'
  'xh            "Xhosa"'
  'zh-CN         "Chinese (simplified)"'
  'zh-TW         "Chinese (traditional)"'
  'zu            "Zulu"'
)

prepare() {
  for i in ${pkgname[@]}; do
    _pkglang=${i#*-}
    echo ${_pkglang} " unpacking..."
    cd ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_${_pkglang}/RPMS

    # Remove dictionaries, which have duplicate files for different languages,
    # to be shipped separately.
    rm -vf *-dict-*.rpm || /bin/true

    for j in *.rpm
      do rpmextract.sh $j
    done
    
    # the helppack rpm goes also into the langpack dir - so far we don't want to split the helppacks separate
    rpmextract.sh ${srcdir}/LibreOffice_${_dirver}_Linux_x86_rpm_helppack_${_pkglang}/RPMS/*.rpm || /bin/true
  done
}

_package() {
  pkgdesc="$2 language pack for LibreOffice"
  provides=('libreoffice-langpack')

  cd "$srcdir"/LibreOffice_${_dirver}_Linux_x86_rpm_langpack_$1/RPMS
  mkdir -p "$pkgdir"/usr/lib/libreoffice
  cp -R opt/libreoffice*/* "$pkgdir"/usr/lib/libreoffice
  chown root:root -R "$pkgdir"/usr/lib/libreoffice
}
  
for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=libreoffice-$_locale
  source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_langpack_${_locale}.tar.gz)

  if curl -o /dev/null -s -I -f ${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz; then
    source+=(${_url}/LibreOffice_${_oodlver}_Linux_x86_rpm_helppack_${_locale}.tar.gz)
  fi

  pkgname+=($_pkgname)
  eval "package_${_pkgname}() {
    _package $_lang
  }"
done
md5sums=('fe2b804fc1653e99e40c21dda56b2e98'
         '1b8e45713f848eee708f6bc8d93fb5e3'
         'b4f37b1643b9e05e11401b5dfa68c202'
         'c13630291545795d1e05d97714e510ac'
         'ac6b7a58bc39f3b4101b4b77790053b0'
         '6250ea6fbd59980b73a5e040002b2395'
         '1687e7829b3bb4533df25ad0c17b407c'
         '8a328c3e9eacad7c5c6f723bcaee816c'
         'f5e43c197b4816a24a3a221f5b1f0270'
         '8a450c49b4cce6dd0ce34d480ead1432'
         'f75f9ab6bc99d89b47eb9c2e8ba6b92c'
         '99b8171343a7abd209552d03d72ebeb5'
         '1faa9e006b9f182a7018ad7451bc96db'
         '93313bece045115eaacefc2ee465267d'
         '465ab556a125b7fe14fda85b0122d521'
         'b6152009bd0a48dcf17a108f36114f68'
         '9379a5869facbfcc9ecbda4751e86809'
         '79694679f3465be14472490db23ca8cf'
         '0a19e2efad24977b86fed30116b1d9c6'
         'f9f67cb4f8d58b292ef8f6d76d80c3b9'
         '7970daace29a388abbe5a87be56f1470'
         '139e396f1b0522f34cecb174747d14fb'
         '9f83fa197184403151b7cccc50d3e02e'
         'bdc54132698e68613838f742c77e5cba'
         '6b5d0b2ae3013f6f339a7d9af2a61889'
         '5052cdb5f2471feafbf6122f3a292629'
         'f518aa1c992507a38b2a4809c749447e'
         'c74af2480e418dfd129a7b938e5c19d6'
         '2d74fd784b47a1b11a9a97ec243d87c7'
         'b2d470b801b2365d37d948cad3a41a94'
         '77495bc493dcccd8a034cc10f683e630'
         '9f3be8ebf02c53ec0a547fa1eb77a2dd'
         '40b0a8fa9cb2597187e0a9d9cc4f3ec7'
         'e0d7a1e6aa4344fee0550bb1ef79e063'
         '1e51a312ae3193a2aab88af386873e44'
         'ee9b6dbec6daa305e4e5d55fa9540d7e'
         '0a520956a1576451d32b969527ab19da'
         'b3ae0c66434d072163f9d291225d08b6'
         '590828f47f852543a4220d2eb5d8a9b8'
         '71686ac1d630de207e5a3cad51b6c6ee'
         'ee78406c65198f51b210fcfe02ad3e92'
         'a18abcbdcfc8ed7dbb08969719daa350'
         'a5e46ab5ee8ac50ee0d087d3d25250c2'
         '765bce99b16b24f76faa0bb07797dc0e'
         'b4af678ac9e457ef3704518d60e55180'
         '3e2daa52849c905aabd35a3fa73fb4c7'
         '36e2f27b65582495ceb6e19885db434c'
         'b24d6810e0a3709acafa86a7e587a1ed'
         '718a1e37e8e0d7f93f1b5e7c1f15a461'
         '4746ea988158455c8fe75888f7d3db51'
         '3c39e28c878fb73cdfc544676881206c'
         '5523dc54afef70ffd5391a23893d5733'
         'b28b574e4c47364b5e3305874ac3aeb4'
         'cdad2bfeb82ee030f6d55bec0bf33ffe'
         'b85a9968bff093954165173876a152f5'
         '29be19c376ca08cdf29b59737c17464a'
         '03082a20c43680f45fbd178d0ac9cc3d'
         'e5360696337f3050172dbe31c7360c3e'
         'e9d846ac625b7e6a2eeb656c7cc1a01e'
         '91dd6413dcb87f783af4a8d573572cef'
         '0902782cd8cbfc30cf086a836e6bb14d'
         '387a5051a80cf84616887f6d8302ea2b'
         '055b1fa4d478343febf6082d2a72fadf'
         'fd70a94551c8b53d6106ee152ed07deb'
         '9fdf0fd99e50c05de437616576711fce'
         'ae8b9acf02b92fa1488ed8bbdfb0e107'
         'a27e0a4bc13151f6622c1d27f7ae2b51'
         '107e94d63e13bedce55232d83d42016f'
         'a85a432e1a7740ff052bad457b52674f'
         '62fc1f4651d13ef2e0e0c309df0b3f4b'
         'c7c8d346fbd6397b222de26a3497d7ef'
         '778eddb38c9fff4cb43fa7f16a40b11a'
         '4010b3b540c34ca1df840b06ef6bb591'
         '4fba31373b1675d958d7649e3ecf83ca'
         '8176c1f3fd1aee0ac050dca442def11d'
         'e7be4d8ea8b574b3c768bdede505bb05'
         '250ce319b58c583b299d6e0e6f984911'
         '3bdfa64578706d705fea6fd06ae0871e'
         '9f975687f22b105b247993ad36ddc0a4'
         'b5c3bf652fffe58ec17c1e65ed3ed533'
         '8f952602daa0efce0f416d5117cf1447'
         '68798672d72f66929851f559fb1fbe78'
         '01694048d32653d6bc20abea29e89e4f'
         '15851c019f635d99800c70d7001f2222'
         'a401c4ccf08c9be0f4d947b8f952a289'
         '70dc83a39ca9a515f5ebe9feb8bdfff6'
         'cb4e05424ee813c47884b8e876a07732'
         '038dc3b1df65aaae01da70cf0672a1e6'
         'e7e87df5dbfb1b06e86469be21334cb6'
         '86b34f24ad9ca4965a7da3524380192f'
         '0d064fcb8931a38393e6ef8d77a2020d'
         '1251f6087758fe35d56e35c92d7d80d4'
         '4680b31ced5690c55ac32d1e055462ff'
         '49ce394b1fc32a0971edd52654f98124'
         'fb1c0b6ea668aee4f2126d27124d12b5'
         '36245a3093d264a9a696e23c9955e94a'
         '0e1b59d84965aa7f518970c257cedb27'
         'daacbc4d8c93178d2a54d54e318a6192'
         '18b87eeb2d9ee85992e8c3576ed4f836'
         'a494decdc00bd29cca605dbb6bc96c40'
         'db67fea1e9efcca8b9e79d44b7ddc089'
         'd6fc88d9c78a606d089e2683828e00e2'
         'cb9bbb5b20153f6ccd237ab6effae45a'
         'da6130257ad524fdb9f130e145eda64c'
         'd0558748de503029f1f110ac1bbb0b19'
         '921ed6ec56fca778d4d98fe81ac55f28'
         '7a2c38b0fba5ef2cfe28c25bc545c84d'
         '72e87f8a0e17dffde853ec9354afc241'
         'b78ce3ccad0de6d4f711667460393d1f'
         'f45f6f8b9ef4d29d5f1fd1302b6fdaef'
         '6af7e042d94d54f6a32b0003bf279478'
         '9cb3ea6094daea9ab487041d07aead5b'
         '9d75f0363a77ba072e78f53e992eb579'
         'd581cdc316c0dc93a9bd33963a664853'
         '52218147a56948d67b9fc9f8e7194de0'
         '7480a125b5709741acbe88d3418e6730'
         '3e5762462bc14118023410f1375f5651'
         '753f278fefe3f982a0a6772c968aa456'
         'b7e60c10556c353ed30769892001d60b'
         'e4a1394039897419b607d5b784bcf9fd'
         '9c0b177ca97e9255b4ffc2de613971f3'
         '6515708fa2a4d029e3d47e24ce6f8985'
         'c382b288c97d09408f00fef583d117f4'
         'c57e54a8ded0fa184a4b05a5658cb1a5'
         '9d92155f5f3a01bbd5d12b0bea9070fd'
         '7f85ccb28e47a50c95b9d547c448ade1'
         '59dfb0939b494232186639fca724a3b3'
         'c265998eeaaf32f9dc01b86039854a67'
         '0a07cdb864875a53968d47dd9716a8b1'
         'd7e9387f26aa89930631b2772b7104d1'
         'efff1ef168167e2b4a059e1e2b70e1a6'
         '47c10325b4a08cb975a0007e3ca0c7e2'
         'e72c0d4851033cb50531ba3193f724da'
         '008debb653e4a8f400d1ee038d6656e9'
         '966744e25dbc911c457b1ec91e6ceeff'
         'e67b615adeef6df214504ae21a895a2e'
         '05ff9fbd199d7ff990f3fd659affe2c3'
         '5cc5d7df0a11a5b90400421c74a0a957'
         'c5500ce6289641279b0206adb0132ee1'
         '0c64bcb7c9202ed88fd2adeb58b09aa0'
         'e38a2c4b1e39e01ef93f523c5fecff8c'
         '4889e4e5c3e0d0a115c9a07dec315d48'
         '540260bc88190668a450e8d315ff04f4'
         '89ac8e2e5b6b1974c11bef9f0c3aba43'
         'b652f312e134a4164044a4c86b790b36'
         'fc0cb80583a21aecf1ee5e2b7b05bd5b'
         '635e934d30ba3d243ed9de17b7d10fda'
         '9a70df71cc02fbc261c553293c3be6ea'
         '377acbb338d38aa628ee796127b03b92'
         '60588f601034cb09c9e1d5370fe4b49b'
         'b72879a33aa9b0b78d1368e6bef3c4eb'
         '33219f99c88aa0b351f029820848cfb2'
         'f28468ea634bb751281499890999326a'
         'e5081028d642857a6281b8523a590ada'
         '6332476dbbb2fbaf140ebdef98ae5f0d'
         '34bca3d3811a6836b7771d7bb8490b8d'
         '2e358e139acb8f144ae12b7a0bf3198c'
         'e2d9d68afa66fd16ebe0455b30c9267d'
         'ca31e19655bdbc015f871cf59a5217a8'
         'f2c62d40c49855346be1ecbfe926c58c'
         '2b863acbcf5e97139e042d6fd875e9ee'
         '83ac639adc7cdee5574f915dade79c35'
         'bc1a455bf476faad2d48f223c12118f7'
         '36f7f50f283607eab2e7c6512dfc12cf'
         '417e33fb3791501b32cdeff1583ff4e6'
         '980a029eb8bdbf63f0558fc903ec3a91'
         '192d13bb465fc8a712e96d242cef0b9e'
         'b3b00f40497db9ecd4dce4da6eb4c0cf'
         '02ea685a105f37b4e1a7488668f2fc1d'
         '40b12f0c7d54add4d05b017baf3f33e8'
         '77c98091d241efbc15f124aaa626feba'
         '9603eed4abfcc77282582b82e37cb2e9'
         'a1de7f7f03d3d6eff1ad47079b5446a6')
