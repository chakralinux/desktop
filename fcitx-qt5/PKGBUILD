# Maintainer: Weng Xuetian <wengxt@gmail.com>

pkgname=fcitx-qt5
pkgver=0.1.3
pkgrel=1
pkgdesc="QT5 IM Module for Fcitx"
arch=('x86_64')
url="https://fcitx-im.org/wiki/Fcitx"
license=('GPL')
depends=('fcitx>=4.2.7' 'qt5-base')
makedepends=('cmake')
source=("http://download.fcitx-im.org/${pkgname}/${pkgname}-${pkgver}.tar.xz")

build() {
  cd "$srcdir/${pkgname}-${pkgver}"

  [[ -d build ]] && rm -rf build || mkdir build
  cd build

  export Qt5Core_DIR=/usr/lib/qt5
  export Qt5Gui_DIR=/usr/lib/qt5
  export Qt5DBus_DIR=/usr/lib/qt5
  export Qt5Widgets_DIR=/usr/lib/qt5

  cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_LIBDIR=lib ..
  make
}

package() {
  cd "$srcdir/${pkgname}-${pkgver}/build"
  make install DESTDIR="${pkgdir}"
}
md5sums=('68ad5a87ad215161831cf4d439db58bc')
