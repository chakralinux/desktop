# maintainer: Neophytos Kolokotronis <tetris4@gmail.com>
# contributor: Jakub Kozisek <nodevel at gmail dot com>

_pkgname=kdev-python
pkgname=kdev-python-py3
pkgver=1.7.1
_pkgver=4.7.1
_branch=stable
pkgrel=1
pkgdesc="Python language plugin for KDevelop‚Äù"
arch=('x86_64')
url="http://www.kdevelop.org/"
license=('GPL')
depends=('kdevelop')
makedepends=('cmake' 'automoc4' 'kdevelop-pg-qt')
conflicts=('kdev-python')
source=("http://download.kde.org/${_branch}/kdevelop/${_pkgver}/src/${_pkgname}-${pkgver}-py3.tar.xz")
md5sums=('f670af81e55bbc68fd3bd0443b0fc34e')

build() {
    mkdir build && cd build 
    cmake \
        -DCMAKE_BUILD_TYPE=RELWITHDEBINFO \
        -DCMAKE_{SHARED,MODULE,EXE}_LINKER_FLAGS='-Wl,--no-undefined -Wl,--as-needed' \
        -DCMAKE_INSTALL_PREFIX=/usr \
        "../${_pkgname}-${pkgver}-py3"
    make parser
    make
}

package() {
    cd build
    make DESTDIR="${pkgdir}" install
}
