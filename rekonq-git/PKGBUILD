#
# KDE SC Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=rekonq-git
pkgver=20100523
pkgrel=1
pkgdesc="rekonq is a KDE web browser based on QtWebKit."
arch=('i686' 'x86_64')
url="http://rekonq.sourceforge.net/"
license=('GPL')
groups=()
depends=('kdelibs>=4.4.0' 'qt>=4.6')
makedepends=('gcc' 'cmake' 'automoc4' 'git')
provides=(rekonq)
conflicts=(rekonq)
replaces=()
backup=()
options=()
source=()
noextract=()
md5sums=()

_gitroot="git://gitorious.org/rekonq/mainline.git"
_gitname="mainline"


build(){

  cd $srcdir

  if [[ -d $_gitname ]]; then
	(cd $_gitname && git pull origin)
  else
	git clone $_gitroot $_gitname
  fi
  
  cd $_gitname
  
  rm -rf build
  mkdir build && cd build
    cmake -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_SKIP_RPATH=ON \
    -DCMAKE_INSTALL_PREFIX=/usr .. || return 1
  make || return 1
  make DESTDIR=${pkgdir} install
}
 
