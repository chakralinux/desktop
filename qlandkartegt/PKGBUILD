pkgname=qlandkartegt
pkgver=1.8.1
pkgrel=2
pkgdesc="Use your GPS with Linux"
screenshot="http://sourceforge.net/dbimage.php?id=176174"
arch=('x86_64')
url="http://www.qlandkarte.org"
license=('GPL')
depends=('gdal' 'gpsd' 'libdmtx' 'libexif' 'libmysqlclient' 'mesa' 'postgresql-libs'
         'qt' 'shared-mime-info' 'qtwebkit' 'unixodbc' 'glu' 'libxslt')
makedepends=('cmake' 'proj' 'xerces-c')
optdepends=('libexif: to create wayoints from geotagged images'
	    'libdmtx: to summarize waypoints as  2D barcode'
	    'libgpsd: to use gpsd support')
categories=('utils')
source=("http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz"
        'qlandkartegt-mimetypes.xml')
sha512sums=('de32546762db0a6b9311e5b63dc4bbca12a51160c1c50aa63c04270fdc0e7edfce3fa8062dac2aff6837f82f0a243328da591a660c88c4a09c2a0ea7d545dc34'
            '298b5b18ede6f3daf4a29655ae22ea123c0fc2813bfe5705a61e4c6b247b56891143c8db7c8de79e564e791d0bc3ecf0154e5100fe16a9da32dbba19cacbe3a1')

build() {
  cd ${srcdir}/$pkgname-$pkgver

  install -d ${srcdir}/$pkgname-$pkgver/build
  cd ${srcdir}/$pkgname-$pkgver/build

  cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release ..
  make
}

package(){
  cd ${srcdir}/$pkgname-$pkgver/build

  make DESTDIR=${pkgdir} install

  install -D -m644 ${srcdir}/$pkgname-mimetypes.xml \
    ${pkgdir}/usr/share/mime/packages/$pkgname-mimetypes.xml
}
