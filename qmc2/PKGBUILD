pkgname=qmc2
pkgver=0.52
pkgrel=1
pkgdesc="Qt 4 based UNIX MAME frontend supporting SDLMAME."
url="http://qmc2.arcadehits.net"
license=("GPL")
arch=('x86_64')
depends=('qt' 'phonon' 'sdl' 'libxmu')
makedepends=('rsync' 'mesa')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.bz2
        'qmamecat.desktop')
sha512sums=('e7871cdddbab5619df37c7330c8faefe513eb7bcaf70e38c2f4271caca2b58d309c2523085a20151e662bdad767663a5352199f74fd28e0df4b2e470a315abd6'
            '1d6d3a07d5fea21fde2c620485c9ea0f85c8ccd70500ce1d24805603a12869964eaf35829ecdd21ff01e92ae8c269306bb4162309fa6f8cf149c377380345938')

package() {
  cd "$srcdir/$pkgname"

  export CTIME=0

  make PREFIX=/usr DATADIR=/usr/share SYSCONFDIR=/etc QTDIR=/usr || return 1
  make PREFIX=/usr DATADIR=/usr/share SYSCONFDIR=/etc QTDIR=/usr DESTDIR=$pkgdir install || return 1

  mkdir -p $pkgdir/usr/share/{applications,pixmaps}

  install -D -m644 "$srcdir/qmamecat.desktop" "$pkgdir/usr/share/applications" && \
  install -D -m644 "$srcdir/qmc2/data/img/mame.png" "$pkgdir/usr/share/pixmaps"
}
