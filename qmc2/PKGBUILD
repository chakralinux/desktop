pkgname=qmc2
pkgver=0.55
pkgrel=1
pkgdesc="Qt 4 based UNIX MAME frontend supporting SDLMAME."
url="http://qmc2.arcadehits.net"
license=("GPL")
arch=('x86_64')
depends=('qt' 'phonon' 'sdl' 'libxmu')
makedepends=('rsync' 'mesa')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.bz2
        'qmamecat.desktop')
sha512sums=('d38c3a3b2f5925b9c2fece3527da6d5279ab0761fc5f5dafe2489efea8c269d28577d5bdf07160302ae8e20e1649d6670961b7938bd468f9640838b22852e8f6'
            '1d6d3a07d5fea21fde2c620485c9ea0f85c8ccd70500ce1d24805603a12869964eaf35829ecdd21ff01e92ae8c269306bb4162309fa6f8cf149c377380345938')

package() {
  cd "$srcdir/$pkgname"

  export CTIME=0

  make PREFIX=/usr DATADIR=/usr/share SYSCONFDIR=/etc QTDIR=/usr || return 1
  make PREFIX=/usr DATADIR=/usr/share SYSCONFDIR=/etc QTDIR=/usr DESTDIR=$pkgdir install || return 1

  mkdir -p $pkgdir/usr/share/{applications,pixmaps}

  install -D -m644 "$srcdir/qmamecat.desktop" "$pkgdir/usr/share/applications" && \
  install -D -m644 "$srcdir/qmc2/data/img/mame.png" "$pkgdir/usr/share/pixmaps"
}
