pkgname=check
pkgver=0.11.0
pkgrel=1
pkgdesc="A unit testing framework for C"
arch=('x86_64')
url="https://libcheck.github.io/check/"
license=('LGPL')
options=('!libtool')
categories=('programming')
install=$pkgname.install
source=(https://github.com/libcheck/check/archive/$pkgver.tar.gz)
sha512sums=('829adee2a5793dda6ac88162e355268019dd82e7a8ad95f1287bd262c3a7764425fba6a8347f1aeebdad642a972043b70aa59d54c87b3c46e1b5b569290dc359')

prepare() {
  cd $pkgname-$pkgver
  autoreconf -fvi
}

build() {
  cd $pkgname-$pkgver
  ./configure --prefix=/usr --disable-static
  make
}

package() {
  cd ${srcdir}/$pkgname-$pkgver

  make DESTDIR=${pkgdir} install

  #get rid of the package's info directory
  rm ${pkgdir}/usr/share/info/dir || return 1
  
  # svn log file is too big
  rm "$pkgdir"/usr/share/doc/check/*ChangeLog*
}

