#
# KDE SC Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

pkgname=mediastreamer
pkgver=2.7.3
pkgrel=4
pkgdesc="A library written in C that allows you to create and run audio and video streams."
arch=('i686' 'x86_64')
url="http://www.linphone.org"
license=('GPL')
depends=('ortp' 'speex' 'v4l-utils' 'ffmpeg>=0.8.9' 'libxv')
makedepends=('cmake' 'automoc4')
source=("http://download-mirror.savannah.gnu.org/releases/linphone/mediastreamer/mediastreamer-$pkgver.tar.gz"
        disable-v4l1.patch)
md5sums=('5213307f557d86aa648f1a53a885138c'
         '0dd7e7bb49f148cc8ed9d749e463f481')

build() {

  cd "$srcdir"/$pkgname-$pkgver/
  patch -p2 -i "${srcdir}"/disable-v4l1.patch
  ./configure --prefix=/usr
  make
}

package() {
  cd "${srcdir}"/$pkgname-$pkgver
  make DESTDIR="${pkgdir}" install
}
