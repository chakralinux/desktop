#
# Apps Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=packer
pkgver=20110715
pkgrel=1
pkgdesc="Bash wrapper for pacman and aur"
url="http://github.com/bruenig/packer"
license="GPL"
arch=('any')
makedepends=('git')
depends=('grep' 'sed' 'coreutils' 'bash' 'wget' 'pacman')
optdepends=('sudo: install and update packages as non-root'
            'pacman-color: colorized output'
            'base-devel: for building packages')
_gitroot='http://github.com/bruenig/packer.git'
_gitname='packer'

build() {
    cd "$startdir/src"
  
    msg "Connecting to github GIT server...."
    
    if [ -d "$startdir/src/$_gitname" ] ; then
        cd $_gitname && git pull origin
    else
        git clone "$_gitroot"
        cd $_gitname
    fi
      
    mkdir -p "$startdir/pkg/usr/bin/"
    mkdir -p "$startdir/pkg/usr/share/man/man8/"
    install -m 755 packer "$startdir/pkg/usr/bin/packer"
    install -m 644 packer.8 "$startdir/pkg/usr/share/man/man8/packer.8"
}
