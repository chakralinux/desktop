#
# Games Packages for Chakra, part of chakra-project.org
#
# Maintainer: Atephen McIntosh (stephenmac7) <stephenmac7 gmail.com>

pkgname=supertux
pkgver=0.3.3
pkgrel=4
pkgdesc="A classic 2D jump'n run sidescroller game in a style similar to the original SuperMario games"
arch=('i686' 'x86_64')
url="http://super-tux.sourceforge.net/"
license=('GPL')
depends=('sdl_image' 'curl' 'physfs' 'openal' 'libvorbis' 'libgl' 'glew')
makedepends=('cmake' 'boost')
categories=('games')
source=(http://download.berlios.de/supertux/${pkgname}-${pkgver}.tar.bz2
        
"supertux2-0.3.3-squirrel-gcc47.patch::https://projects.archlinux.org/svntogit/community.git/plain/trunk/supertux2-0.3.3-squirrel-gcc47.patch?h=packages/supertux")
md5sums=('f3f803e629ee51a9de0b366a036e393d'
         'eb06315514be4f200428f14b927beb66')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  patch -p1 -i "${srcdir}/supertux2-0.3.3-squirrel-gcc47.patch"
  sed -i '1i#include <cstddef>' src/supertux/screen_manager.hpp
  sed -i '/types\.h/d' src/addon/addon_manager.cpp
  cmake -D CMAKE_INSTALL_PREFIX=/usr -D INSTALL_SUBDIR_BIN=bin .
  make
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}

  make DESTDIR=${pkgdir} install
}
md5sums=('f3f803e629ee51a9de0b366a036e393d'
         '2de311b985c24f962fe62c5801a0e734')
