pkgname=systemd-swap
pkgver=3.1.1
pkgrel=1
pkgdesc="Script for creating hybrid swap space from zram swaps, swap files and swap partitions."
arch=('x86_64')
url="https://github.com/TimofeyTitovets/systemd-swap"
license=('GPL3')
conflicts=('systemd-loop-swapfile' 'zramswap' 'zram')
depends=('systemd' 'bash')
replace=('zramswap')
backup=(etc/systemd-swap.conf)
install=$pkgname.install
source=("https://github.com/Nefelim4ag/${pkgname}/archive/${pkgver}.tar.gz")
md5sums=('a092b1977ed9b3ae4b1cce3c33c9e474')

prepare() {
  # Upstream approach doesn't seem to work :/
  sed -i 's_^PREFIX="/"$_PREFIX="$1"_' ${pkgname}-${pkgver}/install.sh
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  ./install.sh "$pkgdir"
}
