# Maintainer: Ernesto Manr√≠quez <alejandronova@gmail.com>

pkgbase=py-oauth2
pkgname=("python2-${pkgbase}" "python3-${pkgbase}")
pkgver=0.0.9
pkgrel=1
arch=('x86_64')
url=("http://liluo.org/${pkgbase}/")
license=('MIT')
makedepends=('python2-setuptools' 'python3-setuptools')
source=("https://pypi.python.org/packages/source/p/py-oauth2/${pkgbase}-${pkgver}.tar.gz")
md5sums=('0f0708857b1e5fff8624e6cf06b94ac5')

build() {
  install -d ${srcdir}/build{2,3} && for i in 2 3; do
  cp -r "${srcdir}/${pkgbase}-${pkgver}" ${srcdir}/build${i}
  cd ${srcdir}/build${i}/${pkgbase}-${pkgver}/
  python${i} setup.py build
  done
}

package_python2-py-oauth2() {
  depends=('python2-magic' 'python2-oauth2' 'python2-sqlalchemy' 'python2-beautifulsoup')
  pkgdesc="A Python wrapper for the OAuth2 specification - Python2 version"
  provides="${pkgbase}"
  conflicts="${pkgbase}"
  replaces="${pkgbase}"
  
  cd "${srcdir}/build2/${pkgbase}-${pkgver}/"
  python2 setup.py install --root=$pkgdir
}

package_python3-py-oauth2() {
  depends=('python3-magic' 'python3-oauth2' 'python3-sqlalchemy' 'python3-beautifulsoup')
  pkgdesc="A Python wrapper for the OAuth2 specification - Python3 version"
  
  cd "${srcdir}/build3/${pkgbase}-${pkgver}/"
  python3 setup.py install --root=$pkgdir
}
