# contribution from Arch https://www.archlinux.org/packages/community/x86_64/ccid/

pkgname=ccid
pkgver=1.4.19
_code=4132
pkgrel=1
pkgdesc="A generic USB Chip/Smart Card Interface Devices driver"
arch=('x86_64')
url="http://pcsclite.alioth.debian.org/ccid.html"
license=('LGPL' 'GPL')
depends=('pcsclite')
backup=(etc/reader.conf.d/libccidtwin)
source=("https://alioth.debian.org/frs/download.php/file/${_code}/$pkgname-$pkgver.tar.bz2")
sha512sums=('24d37a22703b15cfffbc1606dd3d6388fcc101924f2feafbf6b23793171b25b91c66b3d7e3739f3e6ee3b981fdf9972c0feeebb1878e8eb899cd8629cc7d6669')

build() {
  cd $srcdir/$pkgname-$pkgver
  ./configure \
    --enable-twinserial \
    --prefix=/usr \
    --sysconfdir=/etc
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make DESTDIR=$pkgdir install
  install -D -m644 src/92_pcscd_ccid.rules  $pkgdir/usr/lib/udev/rules.d/85-pcscd-ccid.rules
}
