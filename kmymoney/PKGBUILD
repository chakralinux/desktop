pkgname=kmymoney
pkgver=4.8.1
pkgrel=2
pkgdesc="A finance manager for KDE4 with HBCI support"
arch=('x86_64')
url="http://kmymoney2.sourceforge.net"
license=('GPL')
depends=('kde-runtime' 'shared-mime-info' 'aqbanking' 'libofx' 'libalkimia' 'boost-libs' 'libical')
makedepends=('cmake' 'automoc4' 'docbook-xml' 'docbook-xsl' 'boost' 'doxygen')
categories=('office')
install=$pkgname.install
source=(https://download.kde.org/stable/$pkgname/$pkgver/src/$pkgname-$pkgver.7z)
sha256sums=('4435acabb3c9771dd39471651767c857087b5fe4f5cd43132c19cdc92aa6cbab')

prepare() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  mkdir -p build
}

build() {
  cd "${srcdir}/${pkgname}-${pkgver}/build"
  cmake ../ \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_BUILD_TYPE=RELEASE -DCMAKE_SKIP_RPATH=YES
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}/build"

  make DESTDIR="${pkgdir}" install
}
