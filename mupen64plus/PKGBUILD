#
# Apps Packages for Chakra, part of chakra-project.org
#
# Maintainer: Adrián Chaves Fernández (Gallaecio) <adriyetichaves gmail.com>

pkgname=mupen64plus
pkgver=2.0
pkgrel=1
pkgdesc='Nintendo64™ Emulator.'
arch=('i686' 'x86_64')
url='http://code.google.com/p/mupen64plus/'
license=('GPL3')
depends=('freetype2' 'mesa' 'libpng' 'libsamplerate' 'sdl')
categories=('system')
screenshot='http://mupen64plus.googlecode.com/svn/wiki/Screenshot-01-PaperMario.png'
source=("http://mupen64plus.googlecode.com/files/${pkgname}-bundle-src-${pkgver}.tar.gz")
sha1sums=('078a518e1b162bd88993e1815967fdafe61d9e28')

build() {
  cd $srcdir/$pkgname-bundle-src-$pkgver
  sh m64p_build.sh
}

package() {
  cd $srcdir/$pkgname-bundle-src-$pkgver
  
  # Set LDCONFIG since we are using fakeroot and scripts. Run root commands by checking the uid.
  ./m64p_install.sh DESTDIR=$pkgdir PREFIX=/usr MANDIR=/usr/share/man LDCONFIG=true
}
