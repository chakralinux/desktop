pkgname=htmlcxx
pkgver=0.85
pkgrel=1
pkgdesc="A simple non-validating CSS1 and HTML parser for C++."
arch=('x86_64')
url="http://sourceforge.net/projects/htmlcxx/"
license=('LGPL')
source=("http://heanet.dl.sourceforge.net/project/${pkgname}/${pkgname}/${pkgver}/${pkgname}-${pkgver}.tar.gz"
        "missing-header.patch")
sha512sums=('a385b65fb668727b0034a95e5dcda18939e4cd2fa5140bbf3bc63907abc481cb4e6f2f46089eac131cde2b8234a4fc5db4f81253b10e6dff6b42632cea990a61'
            'e97cbd8884e4704579676d28c37e002fbcff06234934aa324b9cd84d54b6c30b8adf92cdfc40a3a730e0cde4b0bdd1b5f2011a0702434f02259fc2ec2339aca5')

build() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	
	# Thanks to jgehring for the patch.
	patch -p1 -i "${srcdir}/missing-header.patch"
	
	LDFLAGS="$LDFLAGS -Wl,--no-as-needed"
	./configure --prefix=/usr
	make
}

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	make DESTDIR="${pkgdir}" install
}
