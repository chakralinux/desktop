# Maintainer: yugrotavele <yugrotavele at archlinux dot us>
# Contributor: Paolo Stivanin <admin AT polslinux DOT it>

pkgname=winff
pkgver=1.5.0
pkgrel=2
pkgdesc="GUI for ffmpeg"
url="http://code.google.com/p/winff/"
license=('GPL3')
arch=('x86_64')
depends=('ffmpeg' 'qt' 'xterm' 'fpc-qtbindings')
makedepends=('lazarus')
source=(http://winff.googlecode.com/files/winff-$pkgver-source.tar.gz
	winff.desktop)
md5sums=('6d5deb2c4472150289753264ec791325'
         '84d2c5ee3b65cb5d0548d46593dad27b')

build() {
  cd $srcdir/$pkgname
  lazbuild --lazarusdir=/usr/lib/lazarus winff.lpr --ws=qt
}

package() {
  cd ${srcdir}/
  install -Dm 755 $srcdir/$pkgname/$pkgname $pkgdir/usr/bin/winff
  install -dm 755 ${pkgdir}/usr/share/winff/
  find . -name "*.xml" -exec install -Dm 644 {} ${pkgdir}/usr/share/winff/ \; &> /dev/null
  install -Dm 644 $srcdir/winff.desktop $pkgdir/usr/share/applications/winff.desktop
  install -Dm 644 $srcdir/$pkgname/winff-icons/16x16/winff.png $pkgdir/usr/share/icons/hicolor/16x16/apps/winff.png
  install -Dm 644 $srcdir/$pkgname/winff-icons/24x24/winff.png $pkgdir/usr/share/icons/hicolor/24x24/apps/winff.png
  install -Dm 644 $srcdir/$pkgname/winff-icons/32x32/winff.png $pkgdir/usr/share/icons/hicolor/32x32/apps/winff.png
  install -Dm 644 $srcdir/$pkgname/winff-icons/48x48/winff.png $pkgdir/usr/share/icons/hicolor/48x48/apps/winff.png
  install -dm 755 ${pkgdir}/usr/share/winff/languages/
  find . -name "*.po"  -exec install -Dm 644 {} ${pkgdir}/usr/share/winff/languages/ \; &> /dev/null
  rm ${srcdir}/$pkgname/presets.xml
}
