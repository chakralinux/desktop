#
# Games Packages for Chakra, part of chakra-project.org
#
# Maintainer: Adrián Chaves Fernández (Gallaecio) <adriyetichaves gmail.com>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=supertuxkart
_pkgname=SuperTuxKart
pkgver=0.7.1b
_pkgver=0.7.1
pkgrel=1
pkgdesc="Kart racing game featuring Tux and friends."
url="http://supertuxkart.sourceforge.net/"
arch=('i686' 'x86_64')
license=('GPL3' 'GPL2' 'CCPL-by' 'CCPL-by-sa' 'custom:Creative Commons Sampling Plus 1.0' 'custom:FreeArt License' 'custom:SoundSnap license' 'custom:Public Domain')
depends=('enet' 'irrlicht' 'libgl' 'libogg' 'libvorbis' 'openal')
conflicts=('supertuxkart-svn')
changelog=ChangeLog
source=(http://downloads.sourceforge.net/project/$pkgname/$_pkgname/$_pkgver/$pkgname-$pkgver-src.tar.bz2)
md5sums=('8538d147d3178035be6e1519a509e4f5')

build() {
  cd $srcdir/$pkgname-$pkgver
  
  LDFLAGS="-lpng -ljpeg" \
  LIBS="-lbz2" \
  ./configure \
    --prefix=/usr \
    --datadir=/usr/share

  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  
  make DESTDIR=$pkgdir install

  # Add executable link from /usr/bin
  mkdir -p $pkgdir/usr/bin/
  echo "#!/bin/bash"		 > $pkgname
  echo "/usr/games/$pkgname"	>> $pkgname
  chmod +x ./$pkgname
}
