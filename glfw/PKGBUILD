#
# Games Packages for Chakra, part of chakra-project.org
#
# Maintainer: Adrián Chaves Fernández (Gallaecio) <adriyetichaves gmail.com>

pkgname=glfw
pkgver=2.7.7
pkgrel=1
pkgdesc="A free, open source, portable framework for OpenGL application development."
arch=('i686' 'x86_64')
url="http://glfw.sourceforge.net/"
license=('ZLIB')
depends=('mesa' 'xorg-server')
source=(http://sunet.dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.bz2 )
md5sums=('873a721fc415268e2b794d4dd08c558f')

build() {
  cd $srcdir/$pkgname-$pkgver

  mkdir -p $pkgdir/usr/lib $pkgdir/usr/include/GL
  CXXFLAGS="" \
  LDFLAGS="-lrt" \
  make VERBOSE=1 x11
}

package() {
  cd $srcdir/$pkgname-$pkgver

  make PREFIX=$pkgdir/usr x11-install

  cp $srcdir/$pkgname-$pkgver/lib/x11/libglfw.so $pkgdir/usr/lib
  sed -i 's#'$pkgdir'##g' $pkgdir/usr/lib/pkgconfig/libglfw.pc
}
