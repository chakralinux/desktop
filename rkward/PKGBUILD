# Maintainer: Neophytos Kolokotronis <tetris4 AT gmail DOT com>
# Contributions from AUR: http://aur.archlinux.org/packages.php?ID=4277

pkgname=rkward
pkgver=0.6.1
pkgrel=3
pkgdesc="Easy to use transparent frontend to R for KDE4"
arch=('x86_64')
url="http://rkward.sourceforge.net/"
license=('GPL')
depends=('kdelibs' 'qt' 'r' 'docbook-xsl')
categories=('programming')
makedepends=('cmake' 'automoc4' 'icu')
source=(http://downloads.sourceforge.net/sourceforge/${pkgname}/${pkgname}-${pkgver}.tar.gz)
md5sums=('aa2c16c4b76f729289bd2853fa4da2a8')
screenshot="http://sourceforge.net/apps/mediawiki/rkward/nfs/project/r/rk/rkward/0/0a/RKWard_060_450.png"
	 
build() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	mkdir -p build
	cd build
	cmake .. -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` -DCMAKE_BUILD_TYPE=Release
	make 
}

package(){
	cd "${srcdir}/${pkgname}-${pkgver}/build"
	make DESTDIR="$pkgdir" install
	
	# Some cleanup
	rm -vf "${pkgdir}/usr/lib/R/library/R.css"
	rm -vf "${pkgdir}/usr/share/apps/katepart/syntax/r.xml"
	rm -vf "${pkgdir}/usr/share/doc/kde/html/en/rkward/common"	
}
