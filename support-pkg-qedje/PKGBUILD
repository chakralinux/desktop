#
# KDE SC Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf



# original name (used for the source and pkgnames)
_origname=qedje



pkgname=${_origname}
pkgver=0.4.0
pkgrel=1

pkgdesc="Enlightenment Edje bindings for the Qt toolkit."
url="http://code.openbossa.org/projects/qedje/"
license=('GPL')

source=(http://chakra-project.org/sources/qedje/qedje-0.4.0.tar.gz)
md5sums=(b6a63f587cd0783b855d4a915e291574)

arch=('i686' 'x86_64')

depends=("${_qtpkg}>=${_qtver}" 'eet-svn' "qzion=$pkgver")
groups=("kde-uninstall" "kde-support")
options=('!splitdbg' '!splithdr')
makedepends=('gcc' 'make')

build()
{
	mkdir -p ${_origname}-build
	cd ${_origname}-build

	cmake ../${_origname}-mainline -DCMAKE_BUILD_TYPE=${_build_type} \
			-DCMAKE_INSTALL_PREFIX=${_installprefix} \
			-DCMAKE_SKIP_RPATH=ON \
			-DCMAKE_{SHARED,MODULE,EXE}_LINKER_FLAGS='-Wl,--no-undefined -Wl,--as-needed'

	# workaround, fix build issue
	cp src/qedje.pc qedje.pc

	# Make and install the package
	make DESTDIR=${pkgdir} install || return 1
}
